{"version":3,"file":"link-editor.umd.js","sources":["../../../../src/data/language.js","../../../../src/components/controls/link/link-editor.vue"],"sourcesContent":["export const languages = {\r\n    \"ar\" : \"العربية\",\r\n    \"zh\" : \"中文\",\r\n    \"en\" : \"English\",\r\n    \"es\" : \"Español\",\r\n    \"fr\" : \"Français\",\r\n    \"ru\" : \"Русский\"\r\n}","<template> \r\n    <div id=\"linkEditorModal\" v-if=\"modalOpen\" class=\"modal fade show overflow-auto d-block scbd-controls link-editor\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"linkEditor\" >\r\n        <div class=\"modal-dialog\" role=\"document\" >\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">     \r\n                    <h3 class=\"modal-title\"><slot name=\"modalTitle\">Editing link</slot></h3>  \r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"  @click=\"close\" >\r\n                    <span aria-hidden=\"true\">×</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                        <div class=\"alert alert-info\">Please provide the URL of the website (e.g.\r\n                            <a rel=\"noopener\" translation-url target=\"_blank\" href=\"http://www.cbd.int\">https://www.cbd.int</a> )and the name of the website (e.g. \"The Convention on Biological Diversity\").\r\n                        </div>                  \r\n                        <form>\r\n                        <div class=\"mb-3\" >\r\n                            <label class=\"col-form-label\" for=\"url\">Url <span class=\"text-danger\"> *</span></label><br/>\r\n                            <small class=\"help-block\">Protocol is required (https:// or http://)</small>                                \r\n                            <input class=\"form-control\"  id =\"url\" v-model=\"link.url\" type=\"url\"  placeholder=\" https://www.\" />\r\n                            <p v-if=\" checkValidation &&  !isUrlValid\"  ><span class=\"text-danger\"> Please provide valid URL</span></p>\r\n                        </div>\r\n                        <div class=\"mb-3\" >\r\n                            <label for=\"name\" class=\"col-form-label\" >Name</label>\r\n                            <input class=\"form-control\" id=\"name\" v-model=\"link.name\" type=\"text\"  placeholder=\"example:SCBD website\" />\r\n                        </div>\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"language\" class=\"col-form-label\">Language <span class=\"text-danger\"> *</span></label>   \r\n                                <select class=\"form-select\"  name=\"language\" id=\"language\" v-model=\"link.language\"> \r\n                                <option v-for=\"(language, key) in languages\" :value=\"key\" :key=\"key\">{{ language }}</option> \r\n                            </select>\r\n                            <p v-if=\"checkValidation && !isLangValid\"  ><span class=\"text-danger\"> Please select Language </span></p>\r\n                        </div>\r\n                        </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" @click=\"close\" >Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-primary  \" @click=\"save\" >Save</button>  \r\n                </div>    \r\n            </div>        \r\n        </div>\r\n    </div>     \r\n  </template>\r\n  \r\n  <script setup >\r\n    import { defineEmits, ref, computed } from \"vue\"; \r\n    import { languages } from '../../../data/language';\r\n    \r\n    //TODO: use km-form-control when its available    \r\n    \r\n    const modalOpen = ref(false) ;\r\n    const link = ref({});     \r\n  \r\n    const emit = defineEmits(['onClose']);\r\n    const isUrlValid  = computed(()=>{ return isValidHttpUrl(link.value.url)});\r\n    const isLangValid = computed(()=>!!link.value?.language?.trim() && Object.keys(languages).includes(link.value.language));  \r\n    const checkValidation = ref(false);\r\n \r\n    const show= (linkToEdit)=>{  \r\n        checkValidation.value=false; \r\n        modalOpen.value = true;    \r\n        const  { url, name, language } = linkToEdit  \r\n        link.value = { url, name, language }; \r\n    }\r\n    const close = () => {      \r\n      modalOpen.value = false;  \r\n      checkValidation.value=false; \r\n      emit(\"onClose\");  \r\n    }  \r\n    const save = () =>{  \r\n      checkValidation.value=true; \r\n      if (isUrlValid.value && isLangValid.value){   \r\n        const newLink = { \"url\": link.value.url , \"name\": link.value.name , \"language\": link.value.language  };\r\n        modalOpen.value = false;        \r\n        emit(\"onClose\", newLink);      \r\n      }\r\n    }\r\n    \r\n    const isValidHttpUrl =(string)=> {\r\n        try {\r\n            const newUrl = new URL(string);\r\n            return newUrl.protocol === 'http:' || newUrl.protocol === 'https:';\r\n        }\r\n        catch(e){};\r\n        \r\n        return false;\r\n    }\r\n    defineExpose({\r\n        show\r\n    })\r\n  </script>"],"names":["languages","modalOpen","ref","link","emit","__emit","isUrlValid","computed","isValidHttpUrl","value","url","isLangValid","_link$value","language","trim","Object","keys","includes","checkValidation","show","linkToEdit","name","close","save","newLink","string","newUrl","URL","protocol","e","__expose"],"mappings":";;;;;EAAO,MAAMA,SAAS,GAAG;IACrB,IAAI,EAAG,SAAS;IAChB,IAAI,EAAG,IAAI;IACX,IAAI,EAAG,SAAS;IAChB,IAAI,EAAG,SAAS;IAChB,IAAI,EAAG,UAAU;IACjB,IAAI,EAAG;EACX,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECwCA;;;;;;;;;;MAEI,MAAMC,SAAS,GAAGC,OAAG,CAAC,KAAK,CAAC;MAC5B,MAAMC,IAAI,GAAGD,OAAG,CAAC,CAAA,CAAE,CAAC;MAEpB,MAAME,IAAI,GAAGC,MAAwB;MACrC,MAAMC,UAAU,GAAIC,YAAQ,CAAC,MAAI;QAAE,OAAOC,cAAc,CAACL,IAAI,CAACM,KAAK,CAACC,GAAG,CAAC;MAAA,CAAC,CAAC;MAC1E,MAAMC,WAAW,GAAGJ,GAAAA,CAAAA,QAAQ,CAAC;QAAA,IAAAK,WAAA;QAAA,OAAI,CAAC,GAAAA,WAAA,GAACT,IAAI,CAACM,KAAK,cAAAG,WAAA,gBAAAA,WAAA,GAAVA,WAAA,CAAYC,QAAQ,cAAAD,WAAA,eAApBA,WAAA,CAAsBE,IAAI,CAAA,CAAE,KAAIC,MAAM,CAACC,IAAI,CAAChB,SAAS,CAAC,CAACiB,QAAQ,CAACd,IAAI,CAACM,KAAK,CAACI,QAAQ,CAAC;MAAA,EAAC;MACxH,MAAMK,eAAe,GAAGhB,OAAG,CAAC,KAAK,CAAC;MAElC,MAAMiB,IAAI,GAAGC,UAAU,IAAG;QACtBF,eAAe,CAACT,KAAK,GAAC,KAAK;QAC3BR,SAAS,CAACQ,KAAK,GAAG,IAAI;QACtB,MAAO;UAAEC,GAAG;UAAEW,IAAI;UAAER;QAAU,CAAA,GAAGO,UAAU;QAC3CjB,IAAI,CAACM,KAAK,GAAG;UAAEC,GAAG;UAAEW,IAAI;UAAER;QAAQ,CAAE;MACvC,CAAA;MACD,MAAMS,KAAK,GAAGA,CAAA,KAAM;QAClBrB,SAAS,CAACQ,KAAK,GAAG,KAAK;QACvBS,eAAe,CAACT,KAAK,GAAC,KAAK;QAC3BL,IAAI,CAAC,SAAS,CAAC;MAChB,CAAA;MACD,MAAMmB,IAAI,GAAGA,CAAA,KAAK;QAChBL,eAAe,CAACT,KAAK,GAAC,IAAI;QAC1B,IAAIH,UAAU,CAACG,KAAK,IAAIE,WAAW,CAACF,KAAK,EAAC;UACxC,MAAMe,OAAO,GAAG;YAAE,KAAK,EAAErB,IAAI,CAACM,KAAK,CAACC,GAAG;YAAG,MAAM,EAAEP,IAAI,CAACM,KAAK,CAACY,IAAI;YAAG,UAAU,EAAElB,IAAI,CAACM,KAAK,CAACI;UAAQ,CAAG;UACtGZ,SAAS,CAACQ,KAAK,GAAG,KAAK;UACvBL,IAAI,CAAC,SAAS,EAAEoB,OAAO,CAAC;QACzB;MACF,CAAA;MAED,MAAMhB,cAAc,GAAGiB,MAAM,IAAI;QAC7B,IAAI;UACA,MAAMC,MAAM,GAAG,IAAIC,GAAG,CAACF,MAAM,CAAC;UAC9B,OAAOC,MAAM,CAACE,QAAQ,KAAK,OAAO,IAAIF,MAAM,CAACE,QAAQ,KAAK,QAAQ;QACrE,CAAA,CACD,OAAMC,CAAC,EAAC,CAChB;QACQ,OAAO,KAAK;MACf,CAAA;MACDC,QAAY,CAAC;QACTX;MACR,CAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}