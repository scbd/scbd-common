{"version":3,"file":"preview.umd.js","sources":["../../../src/components/controls/km-input-lstring.vue","../../../src/data/language.js","../../../src/components/controls/link/km-view-links.vue","../../../src/components/controls/link/link-editor.vue","../../../src/components/controls/link/km-add-link.vue","../../../src/components/controls/view/km-help.vue","../../../src/components/controls/km-form-group.vue","../../../src/services/util/arrays.js","../../../src/services/util/lstring.js","../../../src/services/util/helper.js","../../../src/services/util/utils.js","../../../src/components/controls/view/km-lstring-value.vue","../../../src/components/controls/view/km-value-bool.vue","../../../src/components/controls/view/km-locales.vue","../../../src/components/controls/view/km-term.vue","../../../src/components/controls/link/file-upload-editor.vue","../../../src/components/controls/view/km-value-term.vue","../../../src/components/controls/preview-component.vue?vue&type=template&id=f50e6ea2&lang.js","../../../src/components/controls/multi-selector.vue","../../../src/components/inputs/select-file-button.vue","../../../src/components/controls/link/km-add-file.vue","../../../src/components/controls/km/km-form-wizard.vue","../../../src/components/controls/km/km-form-wizard-tab-content.vue","../../../src/services/composables/i18n.js","../../../src/components/controls/spinner.vue","../../../src/components/controls/spinner-modal.vue","../../../src/services/api/api-base.js","../../../src/services/api/km-storage/KmDocuments.js","../../../src/services/api/km-storage/KmDrafts.js","../../../src/services/api/km-storage/KmStorage.js","../../../src/components/inputs/ck-editor/ck-editor.vue","../../../src/services/filters/lstring.js","../../../src/components/inputs/ck-editor/all-plugins-config.js","../../../src/components/controls/km/km-input-rich-lstring.vue","../../../src/components/controls/preview.vue"],"sourcesContent":["<template>\r\n  <div class=\"scbd-controls km-input-lstring\" >\r\n    <slot></slot>\r\n    <div class=\"input-group mb-1\" v-for=\"locale in locales\" :key=\"locale\" :class=\"`km-input-lstring-${locale}`\">\r\n      <input     v-if=\"rows==1\" type=\"text\"  class=\"form-control\" :placeholder=\"placeholder\" aria-describedby=\"lstring-text\"     v-model=\"model[locale]\" :dir=\"locale == 'ar' ? 'rtl' : 'ltr'\" @input=\"$emit('update:modelValue', model)\"/> \r\n      <textarea  v-if=\"rows>1\"  :rows=rows   class=\"form-control\" :placeholder=\"placeholder\" aria-describedby=\"lstring-textarea\" v-model=\"model[locale]\" :dir=\"locale == 'ar' ? 'rtl' : 'ltr'\" @input=\"$emit('update:modelValue', model)\"/>      \r\n    \r\n      <div class=\"input-group-append\">\r\n        <button class=\"btn btn-outline-primary\" type=\"button\" id=\"basic-addon2\" :data-bs-toggle=\"'tooltip'\" :data-bs-placement=\"'top'\" :title=\"getTerm(locale).title\">\r\n          {{ locale.toUpperCase() }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n    import { watch, onMounted } from \"vue\";\r\n    import { without } from \"lodash\";\r\n\r\n    const model = defineModel({type:Object, required: true, default:{}})\r\n    const props = defineProps({\r\n      locales:  { type: Array, required: true },\r\n      disabled: { type: Boolean, default: false },\r\n      rows:     { type: Number, required: false, default: 1 },\r\n      placeholder: {type: String, required: false }\r\n    });\r\n\r\n    const loadLanguages = () => {\r\n      props.locales?.forEach((e) => {\r\n        //TODO: call thesaurus service API\r\n      });\r\n    };\r\n\r\n    const getTerm = (term) => {\r\n      //TODO: call thesaurus service API\r\n      return { title: term };\r\n    };\r\n\r\n    watch(()=>props.locales,\r\n      (newVal, oldVal) => {\r\n        const deleted = without(Object.keys(model.value), ...newVal);\r\n        if (deleted?.length) {\r\n          deleted.forEach((e) => {\r\n            model.value[e] = undefined;\r\n          });\r\n        }\r\n        loadLanguages();\r\n      }, {deep:true}\r\n    );\r\n\r\n    onMounted(() => {\r\n      loadLanguages();\r\n    });\r\n</script>\r\n","export const languages = {\r\n    \"ar\" : \"العربية\",\r\n    \"zh\" : \"中文\",\r\n    \"en\" : \"English\",\r\n    \"es\" : \"Español\",\r\n    \"fr\" : \"Français\",\r\n    \"ru\" : \"Русский\"\r\n}","<template>\r\n    <div class=\"scbd-common km-view-links\">\r\n        <table class=\" table table-striped\" v-if=\"links?.length\"> \r\n            <tbody>\r\n                <tr  v-for=\"(item, index) in links\" :key=\"index\">  \r\n                    <td  class=\"align-middle\" >\r\n                        <span> {{languages[item.language]}}  </span>    \r\n                    </td>        \r\n                    <td  class=\"align-middle\" >                                 \r\n                        <a :href=\"item.url\" >\r\n                            {{item.name}} \r\n                        </a>\r\n                    </td>   \r\n                    <td  class=\"align-middle\" >                                   \r\n                        <span v-if=\"item.tag\">\r\n                            ({{ item.tag }})\r\n                        </span>            \r\n                    </td>  \r\n                    <td class=\"text-nowrap text-right align-middle\">              \r\n                        <button class=\"btn btn-outline-secondary\" @click=\"edit(index)\"><i class=\"bi bi-pencil-square\"></i></button>\r\n                        <button class=\"btn btn-outline-secondary\" @click=\"remove(index)\"><i class=\"bi bi-trash3\"></i></button>\r\n                    </td>      \r\n            </tr>             \r\n            </tbody>\r\n        </table> \r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n  import { defineEmits, computed } from 'vue'\r\n  import { languages } from '../../../data/language'\r\n\r\n  const model = defineModel({type:Array, required:true});\r\n  const emit = defineEmits(['onDelete','onEdit']);\r\n   \r\n    let links = computed(()=>{\r\n        if(model.value)\r\n            return  model.value;\r\n        return [];\r\n    });   \r\n \r\n    const remove = (index) =>{    \r\n        emit(\"onDelete\", index);        \r\n    }\r\n\r\n    const edit = (index) =>{    \r\n        emit(\"onEdit\", index);        \r\n    }\r\n</script>","<template> \r\n    <div id=\"linkEditorModal\" v-if=\"modalOpen\" class=\"modal fade show overflow-auto d-block scbd-controls link-editor\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"linkEditor\" >\r\n        <div class=\"modal-dialog\" role=\"document\" >\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">     \r\n                    <h3 class=\"modal-title\"><slot name=\"modalTitle\">Editing link</slot></h3>  \r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"  @click=\"close\" >\r\n                    <span aria-hidden=\"true\">×</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                        <div class=\"alert alert-info\">Please provide the URL of the website (e.g.\r\n                            <a rel=\"noopener\" translation-url target=\"_blank\" href=\"http://www.cbd.int\">https://www.cbd.int</a> )and the name of the website (e.g. \"The Convention on Biological Diversity\").\r\n                        </div>                  \r\n                        <form>\r\n                        <div class=\"mb-3\" >\r\n                            <label class=\"col-form-label\" for=\"url\">Url <span class=\"text-danger\"> *</span></label><br/>\r\n                            <small class=\"help-block\">Protocol is required (https:// or http://)</small>                                \r\n                            <input class=\"form-control\"  id =\"url\" v-model=\"link.url\" type=\"url\"  placeholder=\" https://www.\" />\r\n                            <p v-if=\" checkValidation &&  !isUrlValid\"  ><span class=\"text-danger\"> Please provide valid URL</span></p>\r\n                        </div>\r\n                        <div class=\"mb-3\" >\r\n                            <label for=\"name\" class=\"col-form-label\" >Name</label>\r\n                            <input class=\"form-control\" id=\"name\" v-model=\"link.name\" type=\"text\"  placeholder=\"example:SCBD website\" />\r\n                        </div>\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"language\" class=\"col-form-label\">Language <span class=\"text-danger\"> *</span></label>   \r\n                                <select class=\"form-select\"  name=\"language\" id=\"language\" v-model=\"link.language\"> \r\n                                <option v-for=\"(language, key) in languages\" :value=\"key\" :key=\"key\">{{ language }}</option> \r\n                            </select>\r\n                            <p v-if=\"checkValidation && !isLangValid\"  ><span class=\"text-danger\"> Please select Language </span></p>\r\n                        </div>\r\n                        </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" @click=\"close\" >Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-primary  \" @click=\"save\" >Save</button>  \r\n                </div>    \r\n            </div>        \r\n        </div>\r\n    </div>     \r\n  </template>\r\n  \r\n  <script setup >\r\n    import { defineEmits, ref, computed } from \"vue\"; \r\n    import { languages } from '../../../data/language';\r\n    \r\n    //TODO: use km-form-control when its available    \r\n    \r\n    const modalOpen = ref(false) ;\r\n    const link = ref({});     \r\n  \r\n    const emit = defineEmits(['onClose']);\r\n    const isUrlValid  = computed(()=>{ return isValidHttpUrl(link.value.url)});\r\n    const isLangValid = computed(()=>!!link.value?.language?.trim() && Object.keys(languages).includes(link.value.language));  \r\n    const checkValidation = ref(false);\r\n \r\n    const show= (linkToEdit)=>{  \r\n        checkValidation.value=false; \r\n        modalOpen.value = true;    \r\n        const  { url, name, language } = linkToEdit  \r\n        link.value = { url, name, language }; \r\n    }\r\n    const close = () => {      \r\n      modalOpen.value = false;  \r\n      checkValidation.value=false; \r\n      emit(\"onClose\");  \r\n    }  \r\n    const save = () =>{  \r\n      checkValidation.value=true; \r\n      if (isUrlValid.value && isLangValid.value){   \r\n        const newLink = { \"url\": link.value.url , \"name\": link.value.name , \"language\": link.value.language  };\r\n        modalOpen.value = false;        \r\n        emit(\"onClose\", newLink);      \r\n      }\r\n    }\r\n    \r\n    const isValidHttpUrl =(string)=> {\r\n        try {\r\n            const newUrl = new URL(string);\r\n            return newUrl.protocol === 'http:' || newUrl.protocol === 'https:';\r\n        }\r\n        catch(e){};\r\n        \r\n        return false;\r\n    }\r\n    defineExpose({\r\n        show\r\n    })\r\n  </script>","\r\n<template>\r\n  <button type=\"button\" class=\"btn btn-primary\" @click=\"addLink()\">\r\n    <slot name=\"link-button-label\">+ Add Link</slot>\r\n  </button>  \r\n  <link-editor ref=\"linkEditorRef\" @on-close=\"onLinkEditorClose\">\r\n    <template v-slot:modalTitle>\r\n      <slot name=\"link-dialog-title\"   >        \r\n        Edit link    \r\n      </slot>\r\n     </template>       \r\n  </link-editor>\r\n  <slot name=\"links-view\">\r\n    <km-view-links v-model=\"links\"   @on-delete = \"removeLink($event)\"   @on-edit = \"editLink($event)\"></km-view-links>  \r\n  </slot>\r\n</template>\r\n\r\n<script setup>\r\n  import { ref ,shallowRef} from 'vue'  \r\n  import kmViewLinks from './km-view-links.vue';\r\n  import linkEditor  from './link-editor.vue';\r\n\r\n  const linkEditorRef= shallowRef(null); \r\n  let editedLinkIndex = -1;   \r\n  const links = defineModel({type:Array, required:true, default:[]});\r\n\r\n    function addLink() {  \r\n        editLink(-1);\r\n    }      \r\n\r\n    function editLink(index) {  \r\n        editedLinkIndex = index;  \r\n        linkEditorRef.value.show(links.value[index] ||{})     \r\n    }\r\n\r\n    function removeLink(index) {  \r\n        links.value.splice(index, 1);   \r\n    }\r\n\r\n    function onLinkEditorClose(newValue) {    \r\n        if(Object.keys(newValue).length ==0) {// mean cacnel => return              \r\n            return;\r\n        } \r\n        else{\r\n            if(editedLinkIndex<0) {  \r\n                      \r\n                links.value.push(newValue);\r\n            } \r\n            else {        \r\n                links.value[editedLinkIndex]=newValue;\r\n            } \r\n            editedLinkIndex = -1;\r\n        }       \r\n    }\r\n    \r\n</script>\r\n","<template>\r\n    <span ref=\"helpAnchor\" class=\"show-pop\" data-animation='pop'>\r\n        <slot></slot>\r\n        <slot name=\"icon\">\r\n            {{\" \"}}<i class=\"bi bi-question-circle-fill\" v-if=\"!slots.icon && !slots.default\"></i>\r\n        </slot>\r\n    </span>\r\n\r\n    <div class=\"webui-popover-content\">\r\n        <slot name=\"content\">\r\n            <div v-html=\"content\"></div>\r\n        </slot>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport 'webui-popover';\r\nimport 'webui-popover/dist/jquery.webui-popover.css'\r\nimport $ from 'jquery'\r\nimport {ref, useSlots, onMounted, onBeforeUnmount, defineProps } from 'vue'\r\n\r\nconst helpAnchor = ref(null);\r\nconst props = defineProps({\r\n    title: {type:String},\r\n    content: {type:String, required: true}\r\n})\r\nconst slots  = useSlots();\r\n\r\nonMounted(()=>{    \r\n    const settings = {\r\n        trigger: 'hover',\r\n        title: props.title || \"Help\",\r\n        closeable: true,\r\n        dismissible: true,\r\n        padding: true,\r\n        backdrop: false,\r\n        style: 'inverse',\r\n        delay: {\r\n            show: null,\r\n            hide: 200\r\n        }\r\n    };\r\n    \r\n    $ (helpAnchor.value)\r\n        .webuiPopover('destroy')\r\n        .webuiPopover(settings);\r\n});\r\n\r\nonBeforeUnmount(()=>{\r\n    $(helpAnchor.value).webuiPopover('destroy')\r\n})\r\n</script>\r\n\r\n<style>\r\n    .show-pop{\r\n        color: unset;\r\n        text-decoration-style: dotted;\r\n        border-bottom: 3px solid rgb(93, 136, 221);\r\n        text-decoration-color: rgb(93 136 221);    \r\n        text-decoration-thickness: 3px;\r\n    }\r\n</style>","<template>\r\n    <div :id=\"$attrs.id\" class=\"scbd-controls km-form-group form-group mb-3\" \r\n    :class=\"{'has-error':hasError(), 'has-help':helpContent, 'mandatory':required}\">\r\n        <label class=\"mb-1 km-form-group-label\" v-if=\"caption\" \r\n        :for=\"name\" :name=\"name\" :required=\"required ? true : null\">\r\n            {{caption}}             \r\n        </label>\r\n        <km-help v-if=\"helpContent\" :title=\"helpTitle\" :content=\"helpContent\" class=\"ms-1 me-1\"></km-help>\r\n        <div>\r\n            <slot></slot>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport '../../assets/km.css'\r\nimport { ref, provide, defineProps, inject, computed } from 'vue'\r\nimport KmHelp  from './view/km-help.vue';   \r\n\r\nconst props = defineProps({\r\n    name      : { type:String, default:\"\" },\r\n    caption   : { type:String, required: true },\r\n    required  : { type:Boolean, default:false },\r\n    isValid : { type:Function },\r\n    helpContent: { type: String, required: true },\r\n    helpTitle: { type:String }\r\n});\r\n\r\nlet reviewError = inject('validationReview')\r\n\r\nconst hasError    = ()=>{\r\n    return props.name && props.required && reviewError?.isValid(props.name);\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n    .km-form-group.mandatory{\r\n        border-left: 5px solid red;\r\n        padding-left: 10px;\r\n    }\r\n    .km-form-group label.required:after, .km-form-group label[required]:after {\r\n        color: #e32;\r\n        content: ' * ';\r\n    }\r\n    .km-form-group.has-help label.form-group{\r\n        display: unset;\r\n    }\r\n    .km-form-group .form-group{\r\n        font-weight: 500;\r\n    }\r\n</style>\r\n","import _ from 'lodash';\r\nimport { useI18n} from '@/services/composables/i18n';\r\nimport { lstring } from '@/services/filters/lstring'  \r\n\r\n\r\nexport function asArray(data) {\r\n    return _([ data ])\r\n      .flatten()\r\n      .compact()\r\n      .value();\r\n}\r\n\r\nexport function sortBy(list, property){    \r\n  //const { locale } = useNuxtApp().$i18n;\r\n  const {t, locale }    = useI18n();  \r\n  return list.sort((a ,b )=>{\r\n      let valueA = a[property];\r\n      let valueB = b[property];\r\n\r\n      if(isLString(valueA)){\r\n          valueA = lstring(valueA, locale.value)\r\n          valueB = lstring(valueB, locale.value)\r\n      }\r\n\r\n      return valueA.localeCompare(valueB);\r\n\r\n  })\r\n}\r\n","export function lstring(ltext, locale) {\r\n  if (Number.isInteger(ltext))\r\n    //is number to handle generic implementation of NR\r\n    return ltext;\r\n\r\n  if (!ltext) return \"\";\r\n\r\n  if (typeof ltext === \"string\") return ltext;\r\n\r\n  locale = locale || lstringLocale(ltext, locale);\r\n  let sText = \"\";\r\n  if (!sText && locale) sText = ltext[locale];\r\n  if (!sText) sText = ltext.en;\r\n  if (!sText) {\r\n    var normalized = normalizeText(ltext);\r\n    if (normalized[locale]) return normalized[locale];\r\n\r\n    for (var key in ltext) {\r\n      sText = ltext[key];\r\n      if (sText) break;\r\n    }\r\n  }\r\n  return sText || \"\";\r\n}\r\n\r\nexport const lstringLocale = (ltext, locale) => {\r\n  // TODO: use thesaraus API\r\n\r\n  // TODO: use thesaraus API, there was an OR case to get value from thesaraus API\r\n  if (!ltext) return locale;\r\n\r\n  if (typeof ltext == \"string\") return locale;\r\n\r\n  if (ltext[locale]) return locale;\r\n\r\n  // TODO: use thesaraus API, there was a conditional check to get value from 'defaultLocale.value'\r\n\r\n  if (ltext.en) return \"en\";\r\n\r\n  if (ltext.fr) return \"fr\";\r\n  if (ltext.es) return \"es\";\r\n  if (ltext.ru) return \"ru\";\r\n  if (ltext.ar) return \"ar\";\r\n  if (ltext.zh) return \"zh\";\r\n\r\n  for (var key in ltext) {\r\n    if (ltext[key]) return key;\r\n  }\r\n\r\n  return locale;\r\n};\r\n\r\nexport const direction = (text, locale) => {\r\n  locale = lstringLocale(text, locale);\r\n\r\n  return localeDirection(locale);\r\n};\r\n\r\nexport const localeDirection = (locale) => {\r\n  // TODO: use thesaraus API\r\n  return locale == \"ar\" ? \"rtl\" : \"ltr\";\r\n};\r\n\r\nfunction normalizeText(text) {\r\n  if (!text) return null;\r\n\r\n  var entry = {\r\n    ar: text.ar,\r\n    en: text.en,\r\n    es: text.es,\r\n    fr: text.fr,\r\n    ru: text.ru,\r\n    zh: text.zh,\r\n  };\r\n\r\n  if (!entry.en) entry.en = entry.fr;\r\n  if (!entry.en) entry.en = entry.es;\r\n  if (!entry.en) entry.en = entry.ru;\r\n  if (!entry.en) entry.en = entry.ar;\r\n  if (!entry.en) entry.en = entry.zh;\r\n\r\n  if (!entry.fr) entry.fr = entry.en;\r\n  if (!entry.es) entry.es = entry.en;\r\n  if (!entry.ru) entry.ru = entry.en;\r\n  if (!entry.ar) entry.ar = entry.en;\r\n  if (!entry.zh) entry.zh = entry.en;\r\n  return entry;\r\n}\r\n","import _ from 'lodash';\r\n\r\nexport const makeSmallUid = () => {\r\n    const key = (S4() + S4()).toUpperCase();\r\n    return 'uid-' + key;\r\n}\r\n\r\nexport function S4() {\r\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n}\r\n\r\nexport const removeEmpty = (obj)=> {\r\n    return function remove(current) {\r\n      _.forOwn(current, function (value, key) {\r\n        if (_.isUndefined(value) || _.isNull(value) || _.isNaN(value) ||\r\n          (_.isString(value) && _.isEmpty(value)) ||\r\n          (_.isObject(value) && _.isEmpty(remove(value)))) {\r\n  \r\n          delete current[key];\r\n        }\r\n      });\r\n\r\n      if (_.isArray(current)) _.pull(current, undefined);\r\n  \r\n      return current;\r\n  \r\n    }(_.cloneDeep(obj));\r\n}","export const useLogger = ()=>{\r\n    return {\r\n        error\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction error(appError, userMessage){\r\n\r\n    if(![404, 401, 403].includes(appError?.status)){\r\n\r\n        try{\r\n            console.error(appError);\r\n            \r\n            const { ACCOUNTS_HOST_URL, TAG, COMMIT } = useRuntimeConfig().public;\r\n            const realmConfStore  = useRealmConfStore();\r\n            const realmConf = realmConfStore.realmConf; \r\n            //TODO: send error to server\r\n            const errorLog = {\r\n                stack : JSON.stringify(appError, Object.getOwnPropertyNames(appError)), \r\n                message: JSON.stringify(userMessage || appError?.message || 'unknown'),\r\n                url      : window.location.href,\r\n                userAgent: window.navigator.userAgent,\r\n                ver      : TAG||COMMIT,\r\n                timestamp: new Date(),\r\n                realm : realmConf.realm\r\n            }; \r\n\r\n            useAPIFetch('/error-logs', {method:'POST', body: errorLog});\r\n        }\r\n        catch(err){\r\n            console.error(err, 'error sending error log to server.')\r\n        }\r\n    }\r\n        \r\n    if(userMessage){\r\n        const $toast = useToast();\r\n        $toast.error(userMessage, {position:'top-right'}); \r\n    }\r\n}\r\n","<template>\r\n  <div :id=\"$attrs.id\" class=\"scbd-controls km-lstring-value\">\r\n    <div :class=\"`input-group input-lang-${locale}`\">\r\n      <div v-if=\"type === 'string'\" class=\"form-control km-value km-value-string\" \r\n           :dir=\"direction(valueLstring, locale)\">\r\n            {{ valueLstring }}\r\n      </div>\r\n      <div v-else-if=\"type === 'html'\" class=\"form-control km-value km-value-lstring-html ck-content\" \r\n           :dir=\"direction(valueLstring, locale)\" v-html=\"valueLstring\">\r\n      </div>\r\n      <span class=\"input-group-text\" style=\"cursor: default\">\r\n        <div data-toggle=\"tooltip\" data-placement=\"top\" :title=\"lstring(getTerm.title, locale)\">\r\n            <span class=\"d-inline-block\" :tabindex=\"0\">{{ valueLocale.toUpperCase() }}</span>\r\n        </div>\r\n      </span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { computed, defineProps } from 'vue';\r\nimport { direction, lstringLocale, lstring } from '../../../services/util/index';\r\n\r\nconst { value, locale, type } = defineProps({\r\n  value: { type: Object, required: true },\r\n  locale: { type: String, required: true },\r\n  type: { type: String, default: 'string' },\r\n});\r\n\r\nconst valueLocale = computed(() => lstringLocale(value, locale));\r\nconst valueLstring = computed(() => lstring(value, locale));\r\n\r\nconst getTerm = computed(() => {\r\n    // TODO: use thesaraus API\r\n    return {\r\n        title: valueLocale.value\r\n    }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n","<template>\r\n  <div class=\"scbd-controls km-value-bool\" :id=\"$attrs.id\">\r\n    <div :class=\"`input-group input-lang-${locale}`\">\r\n      <div class=\"form-control km-value\" :dir=\"direction(value, locale)\">\r\n        <span v-if=\"value\">{{ t('yes') }}</span>\r\n        <span v-else>{{ t('no') }}</span>\r\n      </div>\r\n      <span class=\"input-group-text\" style=\"cursor: default\">\r\n        {{ locale.toUpperCase() }}\r\n      </span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps } from 'vue';\r\nimport { direction } from \"../../../services/util/index\"\r\n\r\nconst props = defineProps({\r\n  value: { type: Boolean, required: true },\r\n  locale: { type: String, required: true }\r\n});\r\n\r\nfunction t(str){\r\n    //use 'vue-i18n' library\r\n    return str;\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Add your Bootstrap styles here */\r\n</style>\r\n","<template>\r\n  <div class=\"scbd-controls km-locales btn-group\" role=\"group\" aria-label=\"Document locales\" :id=\"$attrs.id\">\r\n    <button v-for=\"locale in locales\" :key=\"locale\" :class=\"['btn', 'btn-primary', { active: locale === modelValue }]\" \r\n        @click=\"onLocaleSelected(locale)\">\r\n      <div data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" class=\"d-inline-block\" :title=\"lstring(getTerm(locale), appLocale)\">\r\n        <span tabindex=\"0\">{{ locale.toUpperCase() }}</span>\r\n      </div>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n  import { defineProps, ref, watch } from 'vue';\r\n  import { lstring } from \"../../../services/util/index\"\r\n\r\n  const model = defineModel({type:String, required: true})\r\n  const props = defineProps({  \r\n    locales: { type: Array, required: true },\r\n  });\r\n\r\n  // TODO: use i18n\r\n  // const { t, locale : appLocale } = useI18n();\r\n  const appLocale = ref(\"en\");\r\n\r\n  function onLocaleSelected(locale) {\r\n    model.value = locale;\r\n  }\r\n\r\n  function setDefaultLocale(languages) {\r\n    if (languages?.length) {\r\n      if (languages.length === 1 || languages.includes(appLocale.value)) {\r\n        onLocaleSelected(appLocale.value);\r\n      } else {\r\n        onLocaleSelected(languages[0]);\r\n      }\r\n    }\r\n  }\r\n\r\n  watch(props.locales, (languages) => {\r\n    setDefaultLocale(languages);\r\n  });\r\n\r\n  function getTerm(lang) {\r\n    //TODO: Use thesaurus API\r\n    // thesaurusStore.loadTerm(`lang-${lang}`)\r\n    // return thesaurusStore.getTerm(`lang-${lang}`)||{};   \r\n    return lang;   \r\n  }\r\n</script>","<template>\r\n  <span class=\"scbd-controls km-term\">\r\n    <div v-if=\"error\" class=\"alert alert-danger\" role=\"alert\">Error loading term {{ value.identifier }}</div>\r\n    {{ lstring(term, locale) }}\r\n    <slot name=\"help\" :term=\"term\"></slot>\r\n  </span>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, defineEmits, ref } from 'vue';\r\nimport { lstring } from \"../../../services/util/index\";\r\n\r\nconst emit = defineEmits(['onTermLoad']);\r\nconst props = defineProps({\r\n  value: { type: Object, required: true },\r\n  locale: { type: String, required: true },\r\n});\r\n\r\nconst term = ref(null);\r\nconst error = ref(null);\r\n\r\nif (!props.value?.identifier || props.value) {\r\n    try {\r\n      // TODO: Use thesaurus API\r\n      // term = await  thesaurusStore.loadTerm(value.value?.identifier||value.value);\r\n      term.value = { title: 'SCBD Term' }; \r\n      if (term.value) {\r\n        emit('onTermLoad', term.value);\r\n      }\r\n      //TODO: Use Thesaurus API\r\n    } catch (error) {\r\n      error.value = error;\r\n      console.error(`Error loading term ${value.value}`, error);\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n/* Add scoped styles if needed */\r\n</style>\r\n","<template> \r\n    <div id=\"linkEditorModal\" v-if=\"modalOpen\" \r\n    class=\"scbd-common file-upload-editor modal fade show overflow-auto d-block scbd-controls link-editor\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"fileUploadEditor\" >\r\n        <div class=\"modal-dialog\" role=\"document\" >\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">     \r\n                    <h3 class=\"modal-title\"><slot name=\"modalTitle\">Uploading File</slot></h3>  \r\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"  @click=\"close\" >\r\n                    <span aria-hidden=\"true\">×</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"modal-body\">                    \r\n                        \r\n                        <div v-if=\"isAddingNewFile\" >   \r\n                            <div class=\"alert alert-danger\" role=\"alert\" v-if=\"isUploadingError\" >\r\n                                <h4>An error has occured</h4>                              \r\n                            </div>                 \r\n                            \r\n                            <div >\r\n                                <label>Uploading <span >{{ link.name }}</span> </label>                              \r\n                                <div class=\"progress\" role=\"progressbar\" aria-valuenow=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\">\r\n                                        <div class=\"progress-bar\" style=\"width: 100%\">100%</div>\r\n                                </div>\r\n                            </div>\r\n                        </div>  \r\n                        <form>\r\n                        \r\n                        <div class=\"mb-3\" >\r\n                            <label for=\"name\" class=\"col-form-label\" >File name</label>\r\n                            <input class=\"form-control\" id=\"name\" v-model=\"link.name\" type=\"text\"  placeholder=\"example:SCBD website\" />\r\n                        </div>\r\n                        <div class=\"mb-3\">\r\n                            <label for=\"language\" class=\"col-form-label\">Language <span class=\"text-danger\"> *</span></label>   \r\n                                <select class=\"form-select\"  name=\"language\" id=\"language\" v-model=\"link.language\"> \r\n                                <option v-for=\"(language, key) in languages\" :value=\"key\" :key=\"key\">{{ language }}</option> \r\n                            </select>                 \r\n                        </div>\r\n                        <div class=\"mb-3\" >\r\n                            <label for=\"tag\" class=\"col-form-label\" >Tags</label>\r\n                            <input class=\"form-control\" id=\"tag\" v-model=\"link.tag\" type=\"text\"  placeholder=\"example: Biodiversity, Aichi target\" />\r\n                        </div>\r\n                        </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                    <button type=\"button\" class=\"btn btn-secondary\" @click=\"close\" >Cancel</button>\r\n                    <button type=\"button\" class=\"btn btn-primary  \" @click=\"save\" >Save</button>  \r\n                </div>    \r\n            </div>        \r\n        </div>\r\n    </div>     \r\n  </template>\r\n  \r\n  <script setup >\r\n    import { defineEmits, ref, computed } from \"vue\"; \r\n    import { languages } from '../../../data/language';\r\n    \r\n    //TODO: use km-form-control when its available   \r\n    //TODO: upload file, uploading process bar, error msg , showing file.size \r\n    \r\n    const modalOpen = ref(false) ;\r\n    const isAddingNewFile = ref(false);\r\n    const isUploadingError= ref(false);\r\n    const link = ref({});  \r\n    const newFile = ref({});   \r\n  \r\n    const emit = defineEmits(['onClose']);\r\n    \r\n    const show= (linkToEdit,isNew, file)=>{ \r\n        modalOpen.value = true;    \r\n        const  { url, name, language ,tag} = linkToEdit  \r\n        link.value = { url, name, language, tag };    \r\n        isAddingNewFile.value = isNew;  \r\n        newFile.value = file;  \r\n    }\r\n    const close = () => {      \r\n      modalOpen.value = false;  \r\n      emit(\"onClose\");  \r\n    }  \r\n    const save = () =>{         \r\n        const newLink = { \"url\": link.value.url , \"name\": link.value.name , \"language\": link.value.language ,\"tag\": link.value.tag };      \r\n        modalOpen.value = false;               \r\n        emit(\"onClose\", newLink);  \r\n    }\r\n  \r\n    defineExpose({\r\n        show\r\n    })\r\n  </script>\r\n  ","<template>\r\n  <div :id=\"$attrs.id\" class=\"scbd-controls km-value-term\">\r\n    <div :class=\"`input-group input-lang-${locale}`\">\r\n      <div class=\"form-control km-value\" :dir=\"direction(termValue?.title, locale)\">\r\n        <km-term :value=\"value\" :locale=\"locale\" @on-term-load=\"onTermLoad\">\r\n        </km-term>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps } from 'vue';\r\nimport { direction } from \"../../../services/util/index\"\r\nimport KmTerm from './km-term.vue';\r\n\r\nconst props = defineProps({\r\n  value: { type: Object, required: true },\r\n  locale: { type: String, required: true },\r\n});\r\nconst termValue = ref(null);\r\n\r\nconst onTermLoad = function(term){\r\n    termValue.value = { title: 'SCBD Term' }\r\n    // thesaurusStore.loadTerm(`lang-${term}`);\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any scoped styles here */\r\n</style>\r\n","<template>\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">\r\n          {{ $attrs[\"card-header\"] }}\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <div class=\"row\">\r\n            <div class=\"col-6\" ref=\"wrap\">\r\n              <slot name=\"left\"></slot>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <div class=\"callout callout-warning\">\r\n                <code>\r\n                  <slot name=\"right\"></slot>\r\n                </code>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup></script>\r\n\r\n<style scoped></style>\r\n","\r\n<template> \r\n  <VueMultiselect\r\n    v-model=\"selectItems\"\r\n    :label=\"label\"\r\n    :track-by=\"trackBy\"\r\n    :placeholder=\"placeholder\"\r\n    :open-direction=\"openDirection\"\r\n    :options=\"options\"\r\n    :group-values=\"groupValues\"\r\n    :group-label=\"groupLabel\"\r\n    :group-select=\"groupSelect\"\r\n    :multiple=\"multiple\"\r\n    :clear-on-select=\"clearOnSelect\"\r\n    :close-on-select=\"closeOnSelect\"      \r\n    :searchable=\"searchable\"\r\n    :disabled=\"disabled\"\r\n    @search-change=\"onEventTextChange\"\r\n    \r\n    :custom-label=\"customLabel\"\r\n    :allow-empty=\"allowEmpty\"\r\n    deselect-label=\"Can't remove this value\"\r\n  > \r\n    <slot name=\"clear\">\r\n      <template slot=\"clear\">\r\n        <div\r\n          v-if=\"selectItems.length && !disabled\"\r\n          class=\"multiselect__clear\"\r\n          @mousedown.prevent.stop=\"selectItems = null; $emit('change', null)\"\r\n        />\r\n      </template>\r\n    </slot>     \r\n  </VueMultiselect>\r\n\r\n</template>\r\n\r\n<script setup >  \r\nimport VueMultiselect from 'vue-multiselect';\r\nimport { asArray } from   '../../services/util/index.js';\r\nimport { isEqual, compact } from 'lodash';\r\n\r\nimport {computed, ref, defineProps, defineEmits, onMounted,defineModel} from 'vue'\r\nconst emit = defineEmits(['update:model-value', \"on-select\",\"on-remove\",\"on-search-change\",\"on-open\", \"on-close\", \"on-add-tag\",\"on-value-change\"]);\r\n\r\nconst props = defineProps({   \r\n    modelValue     : {type:[ String, Array, Object ], required:true, default:() => []},\r\n    options      : { type: Array, required: true },\r\n    label        : { type: String },\r\n    trackBy      : { type: String },  \r\n    placeholder  : { type: String,  default: 'Select option' },\r\n    openDirection: { type: String, default: 'below' },\r\n    groupValues  : { type: String },\r\n    groupLabel   : { type: String },\r\n    groupSelect  : { type: Boolean, default: false },\r\n    multiple     : { type: Boolean, default: false },\r\n    clearOnSelect: { type: Boolean, default: true },  \r\n    closeOnSelect: { type: Boolean, default: true },\r\n    searchable   : { type: Boolean, default: true },\r\n    disabled     : { type: Boolean, default: false },\r\n    customLabel  : { type: Function,\r\n      default (option, label) {\r\n        // if (isEmpty(option)) return ''\r\n        return label ? option[label] : option\r\n      }\r\n    },\r\n    allowEmpty   : { type: Boolean, default: true },\r\n    valueKey     : { type: String, required: true},\r\n    customSelectedItem  : {type: Function,default (item) {return item;}},\r\n    isValid      : { type: [ Boolean, Function ],  default: null },   \r\n});\r\n\r\nconst onEventTextChange=(...args)=>{\r\n  this.$emit('on-search-change', ...args)\r\n};\r\nconst fetchOptions=()=>{\r\n  this.options = this.optionsFn();\r\n}   \r\nlet selectItems = computed({  \r\n    get() {\r\n      const selected = asArray(props.modelValue).map((value) => {\r\n        return props.options?.find((option) => {\r\n          const customSelectedItem =props.customSelectedItem(option[props.valueKey], option);\r\n          \r\n          return isEqual(customSelectedItem, value);\r\n        })\r\n      });\r\n\r\n      return compact(selected)\r\n    },\r\n    set(events) {\r\n      let ids = asArray(events).map((event) => props.customSelectedItem(event[props.valueKey], event));     \r\n      emit('update:model-value', props.multiple ? ids : ids[0]);\r\n    },\r\n  }\r\n); \r\n</script>\r\n<!-- ToDo: need to fix the path -->\r\n<!-- <style src=\"vue-multiselect/dist/vue-multiselect.css\"></style> -->\r\n","<template>\r\n    <button    \r\n      class=\"scbd-common select-file-button btn btn-primary\"\r\n      type=\"button\"\r\n      :id=\"$attrs.id\"\r\n      @click.prevent.stop=\"selectFile()\">  \r\n      <slot name=\"default\" ></slot>\r\n    </button> \r\n</template>\r\n  \r\n<script setup>\r\n  const emit = defineEmits(['onFileSelected']);\r\n  const props = defineProps({ \r\n    multiple: { type: Boolean, require: false, default: false },\r\n    accept: { type: Array, require: false, default: ['*/*'] }\r\n  })  \r\n  \r\n  const selectFile = () =>{   \r\n    const fileInput = document.createElement('input');\r\n   \r\n    fileInput.type = 'file';\r\n    fileInput.style.display = 'none';\r\n  \r\n    if (props.multiple) fileInput.setAttribute('multiple', props.multiple);\r\n    if (props.accept && !props.accept?.includes('*/*')) fileInput.setAttribute('accept', props.accept?.join(', '));\r\n  \r\n    fileInput.addEventListener('click', ($event) => $event.stopPropagation());    \r\n    fileInput.addEventListener('change', ({ target }) => { \r\n      const files = [...target.files]; \r\n      if (props.multiple)\r\n        emit('onFileSelected', files);   \r\n      else \r\n        emit('onFileSelected', files[0]);   \r\n      \r\n    }) \r\n\r\n    fileInput.click();   \r\n  } \r\n</script>","<template>    \r\n    <div class=\"scbd-common km-add-file\" >\r\n        <select-file-button  @on-file-selected=\"receiveFile\"> <slot name=\"file-button-label\">+ Add Files</slot></select-file-button> \r\n              \r\n        <file-upload-editor ref=\"fileEditorRef\" @on-close=\"onFileUploadEditorClose\">\r\n            <template v-slot:modalTitle>\r\n            <slot name=\"link-dialog-title\"   >        \r\n                File Upload   \r\n            </slot>\r\n            </template>       \r\n        </file-upload-editor>\r\n        <slot name=\"links-view\">\r\n            <km-view-links v-model=\"links\"   @on-delete = \"removeLink\"   @on-edit = \"editLink\"></km-view-links>  \r\n        </slot>\r\n    </div>\r\n</template>\r\n<script setup>\r\n    import { shallowRef } from 'vue'  \r\n    import kmViewLinks from './km-view-links.vue';\r\n    import fileUploadEditor  from './file-upload-editor.vue';\r\n    import selectFileButton from '../../inputs/select-file-button.vue'\r\n  \r\n\r\n    const links = defineModel({type:Array, required:true, default:[]});\r\n    const props = defineProps({multiple: { type: Boolean, require: false, default: false }});\r\n\r\n    const fileEditorRef= shallowRef (null); \r\n    let editedLinkIndex = -1;\r\n    \r\n    function addLink(file) {        \r\n        editedLinkIndex = -1; \r\n        fileEditorRef.value.show({url:\"\",name:file.name, language:\"en\", tag:\"\"}, true,file); \r\n    }      \r\n    function editLink(index) {         \r\n        editedLinkIndex = index;  \r\n        fileEditorRef.value.show(links.value[index] ||{}, false, {})     \r\n    }\r\n    function removeLink(index) {  \r\n        links.value.splice(index, 1);   \r\n    }\r\n    function onFileUploadEditorClose(newValue) {         \r\n     \r\n        if(!newValue) {// mean cacnel => return  \r\n            return;\r\n        } \r\n        else{   \r\n            if(editedLinkIndex<0) { \r\n                links.value.push(newValue);\r\n            } \r\n            else {        \r\n                links.value[editedLinkIndex]=newValue;\r\n            } \r\n            editedLinkIndex = -1;\r\n        }       \r\n    }\r\n\r\n \r\n    const receiveFile = (selectedFile) => {  \r\n         addLink(selectedFile);            \r\n    };\r\n\r\n\r\n</script> \r\n ","<template>\r\n  <div :id=\"$attrs.id\" class=\"sbcd-controls km-form-wizard\">\r\n    <div class=\"nav-header mb-2\">\r\n      <ul class=\"nav nav-pills nav-fill\">\r\n        <li\r\n          @click.prevent.stop=\"selectTab(index)\"\r\n          class=\"nav-item\"\r\n          :class=\"{ active: tab.isActive }\"\r\n          v-for=\"(tab, index) in tabs\"\r\n          :key=\"`tab-${index}`\"\r\n        >\r\n          <a class=\"nav-link\" href=\"#\">\r\n            <span class=\"tabStatus\">{{ index + 1 }} </span>\r\n            <span class=\"tabLabel\">{{ tab.title }}</span>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"nav-body\">\r\n      <form>\r\n        <slot></slot>\r\n      </form>\r\n    </div>\r\n    <div class=\"nav-footer mt-2\">\r\n      <ul class=\"nav nav-pills nav-fill\">\r\n        <li\r\n          @click.prevent.stop=\"selectTab(index)\"\r\n          class=\"nav-item\"\r\n          :class=\"{ active: tab.isActive }\"\r\n          v-for=\"(tab, index) in tabs\"\r\n          :key=\"`tab-${index}`\"\r\n        >\r\n          <a class=\"nav-link\" href=\"#\">\r\n            <span class=\"tabStatus\">{{ index + 1 }} </span>\r\n            <span class=\"tabLabel\">{{ tab.title }}</span>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onBeforeMount, computed, defineEmits, provide } from \"vue\";\r\n\r\nconst tabs = ref([]);\r\nconst emits = defineEmits([\"onTabChange\"]);\r\n\r\nconst selectTab = (index) => {\r\n  switchTab(index);\r\n};\r\nconst switchTab = (index) => {\r\n  tabs.value.forEach((tab) => {\r\n    tab.isActive = false;\r\n  });\r\n  tabs.value[index].isActive = true;\r\n  emits(\"onTabChange\", index);\r\n};\r\nconst totalTabs = computed(() => this.tabs.length);\r\nconst currentTab = computed(() => this.tabs.find((e) => e.isActive));\r\n\r\nonBeforeMount(() => {\r\n   provide(\"addFormWizardTabKey\", (tab) => {\r\n    tabs.value.push(tab);\r\n  });\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.km-form-wizard ul.nav-pills > li {\r\n  position: relative;\r\n  overflow: visible;\r\n  border-right: 15px solid transparent;\r\n  border-left: 15px solid transparent;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li + li {\r\n  margin-left: 0;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:first-child {\r\n  border-left: 0;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:first-child a {\r\n  border-radius: 5px 0 0 5px;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:last-child {\r\n  border-right: 0;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:last-child a {\r\n  border-radius: 0 5px 5px 0;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li a {\r\n  border-radius: 0;\r\n  background-color: #eee;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:not(:last-child) a:after {\r\n  right: -20px;\r\n  border-color: transparent transparent transparent #eee;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:not(:first-child) a:before,\r\n.km-form-wizard ul.nav-pills > li:not(:last-child) a:after {\r\n  position: absolute;\r\n  content: \"\";\r\n  top: 0;\r\n  width: 0;\r\n  height: 0;\r\n  border-style: solid;\r\n  border-width: 20px 0 20px 20px;\r\n  z-index: 150;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:not(:first-child) a:before {\r\n  left: -20px;\r\n  border-color: #eee #eee #eee transparent;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:hover:not(:last-child) a:after {\r\n  border-color: transparent transparent transparent #aaa;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:hover:not(:first-child) a:before {\r\n  border-color: #aaa #aaa #aaa transparent;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li:hover a {\r\n  background-color: #aaa;\r\n  color: #fff;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li.active:not(:last-child) a:after {\r\n  border-color: transparent transparent transparent #428bca;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li.active:not(:first-child) a:before {\r\n  border-color: #428bca #428bca #428bca transparent;\r\n}\r\n\r\n.km-form-wizard ul.nav-pills > li.active a {\r\n  background-color: #428bca;\r\n  color: #fff;\r\n}\r\n\r\n.tabStatus {\r\n  display: inline-block;\r\n  width: 1.5rem;\r\n  height: 1.5rem;\r\n  margin-right: 0.5rem;\r\n  line-height: 1.5rem;\r\n  color: #fff;\r\n  text-align: center;\r\n  background: rgba(0, 0, 0, 0.38);\r\n  border-radius: 50%;\r\n}\r\n\r\n.nav-pills .nav-item {\r\n  margin: 0 10px;\r\n}\r\n</style>\r\n","<template>\r\n  <div v-if=\"isActive\" class=\"scbd-controls km-form-wizard-tab-content\" :id=\"$attrs.id\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { inject, defineProps, onMounted } from \"vue\";\r\n\r\nconst props = defineProps({\r\n  isActive: { type:Boolean, default: false },\r\n  title: { type: String, required: true },\r\n});\r\n\r\nonMounted(() => {\r\n  const addTab = inject(\"addFormWizardTabKey\");\r\n\r\n  addTab({\r\n    title: props.title,\r\n    isActive: props.isActive,\r\n  });\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","export const  useI18n = ()=>{\r\n    return {\r\n        t       : (key)=>key,\r\n        locale  : 'en'\r\n    }\r\n}","<template>\r\n    <div class=\"scbd-common spinner\" :class=\"{'d-flex justify-content-center' : alignCenter}\">\r\n        \r\n        <span :class=\"variant\" role=\"status\"></span>\r\n        <slot>\r\n            <span class=\"ms-2\" v-if=\"message\">{{ message }}</span>\r\n            <span class=\"ms-2\" v-if=\"!message\">{{t('loading')}}...</span>\r\n        </slot>\r\n    </div>\r\n</template>\r\n\r\n<script setup >\r\n    import { useAttrs, computed } from 'vue'\r\n    import { useI18n } from '../../services/composables/i18n';\r\n\r\n    const props = defineProps({ \r\n        message : { type: String },\r\n        variant : { type: String, default:'spinner-border'}\r\n    })\r\n\r\n    const { t } = useI18n();  \r\n    const attrs = useAttrs();\r\n\r\n    const alignCenter = computed(()=>attrs.hasOwnProperty('center'));  \r\n\r\n</script>\r\n","<template>\r\n    <div class=\"scbd-common spinner-modal\" tabindex=\"-1\" role=\"dialog\" v-if=\"props.visible\" >\r\n        <div class=\"modal-dialog\" role=\"document\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h5 class=\"modal-title\">{{props.title|| t('processing')}}</h5>          \r\n            </div>\r\n            <div class=\"modal-body\">\r\n                <slot>\r\n                    <spinner :message=\"message || t('loading')\"> </spinner>        \r\n                </slot>\r\n            </div>         \r\n          </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script setup >\r\n    import { useI18n} from '../../services/composables/i18n';\r\n    import spinner from './spinner.vue';\r\n\r\n    const {t, locale } = useI18n();  \r\n\r\n    const props = defineProps({\r\n        visible : { type:Boolean, default:false},\r\n        title   : { type:String},\r\n        message : { type:String}\r\n    })\r\n</script>\r\n\r\n","import axios from 'axios'\r\nimport { isFunction } from 'lodash'\r\nimport * as Vue from 'vue'\r\n\r\nlet sitePrefixUrl = 'https://api.cbd.int';\r\n\r\nif(/\\.cbd\\.int$/i   .test(window?.location?.hostname || '')) sitePrefixUrl= 'https://api.cbd.int';\r\nif(/\\.cbddev\\.xyz$/i.test(window?.location?.hostname || '')) sitePrefixUrl= 'https://api.cbddev.xyz';\r\nif(/\\localhost$/i   .test(window?.location?.hostname || '')) sitePrefixUrl= '/';\r\n\r\nconst defaultOptions = { \r\n   prefixUrl:  sitePrefixUrl, \r\n   timeout  : 30 * 1000,\r\n   token: Vue?.prototype?.$auth?.strategy?.token?.get()  \r\n}\r\n\r\nexport default class ApiBase\r\n{\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    if(isFunction(options)) options = { token : options }\r\n\r\n    const { token, prefixUrl, timeout, tokenType } = { ...defaultOptions, ...options }\r\n\r\n    this.config = {\r\n      baseURL : prefixUrl,\r\n      timeout,\r\n      tokenType,\r\n      token,\r\n    }\r\n\r\n    const http = async function (...args) {   \r\n      return (await loadAsyncHeaders(this.config))(...args);\r\n    }\r\n\r\n    http.get     = async (...args)=> (await loadAsyncHeaders(this.config)).get    (...args);\r\n    http.head    = async (...args)=> (await loadAsyncHeaders(this.config)).head   (...args);\r\n    http.post    = async (...args)=> (await loadAsyncHeaders(this.config)).post   (...args);\r\n    http.put     = async (...args)=> (await loadAsyncHeaders(this.config)).put    (...args);\r\n    http.patch   = async (...args)=> (await loadAsyncHeaders(this.config)).patch  (...args);\r\n    http.delete  = async (...args)=> (await loadAsyncHeaders(this.config)).delete (...args);\r\n    http.options = async (...args)=> (await loadAsyncHeaders(this.config)).options(...args);\r\n    http.request = async (...args)=> (await loadAsyncHeaders(this.config)).request(...args);\r\n\r\n    this.http = http;\r\n  }\r\n}\r\n\r\nasync function loadAsyncHeaders(baseConfig) {\r\n\r\n  const { token, tokenType, ...config } = baseConfig || {}\r\n\r\n  const headers = { ...(config.headers || {}) };\r\n\r\n  if(token) {\r\n      headers.Authorization = `${tokenType||'Bearer'} ${token}`;\r\n  }\r\n\r\n  return axios.create({ ...config, headers } );\r\n\r\n}\r\n\r\n//////////////////////////\r\n// Helpers\r\n////////////////////////\r\n\r\nexport function tryCastToApiError(error) {\r\n\r\n  if(error && error.response && error.response.data && error.response.data.code) {\r\n      const apiError = error.response.data\r\n      throw error.response.data;\r\n  }\r\n\r\n  throw error\r\n}\r\n\r\nexport function stringifyUrlParam(value) {\r\n  if (value instanceof(Date))   {return value.toISOString()}    \r\n  if (value instanceof(Object)) {return JSON.stringify(value)}  \r\n  return value; \r\n}\r\n\r\nexport function stringifyUrlParams(valueObj) {\r\n  const returnObj = {};\r\n\r\n  for (const [key, value] of Object.entries(valueObj)) {\r\n    if (isValid(value)){\r\n      returnObj[key] = stringifyUrlParam(value);\r\n    }\r\n  }\r\n  \r\n  return returnObj;\r\n}\r\n\r\nexport function mapObjectId(id){  \r\n  return isObjectId(id)? { $oid: id } : id\r\n}\r\n\r\nexport function isObjectId(id){\r\n  return /^[a-f0-9]{24}/i.test(id);\r\n}\r\n\r\nexport function isValid(params){\r\n  return ![undefined, null].includes(params);\r\n}","import ApiBase, { tryCastToApiError, isValid, stringifyUrlParams } from '../api-base';\r\n\r\nconst  serviceUrls = { \r\n  documentQueryUrl      (                     ){ return \"/api/v2013/documents\" },\r\n  documentUrl           (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}` },\r\n  documentInfoUrl       (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/info` }, \r\n  validateUrl           (                     ){ return \"/api/v2013/documents/x/validate\" },\r\n  attachmentUrl         (identifier, filename ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/attachments/${encodeURIComponent(filename)}` },\r\n  temporaryAttachmentUrl(                     ){ return `/api/v2015/temporary-files` },\r\n  persistAttachmentUrl  (identifier, guid     ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/attachments/persist-temporary/${encodeURIComponent(guid)}` },\r\n  securityUrl           (identifier, operation){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/securities/${encodeURIComponent(operation)}` },\r\n  documentVersionListUrl(identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions` },\r\n  documentVersionUrl    (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/:revision` },\r\n  documentVersionInfoUrl(identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/:revision/info` } \r\n}\r\n\r\n\r\nexport class KmDocumentsApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {  \r\n    super(options );\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n\r\n  async query( {realm, q, s, l, sk }={}){\r\n    const params = stringifyUrlParams( { \r\n      $filter:q, \r\n      $orderby:s,\r\n      $skip:sk, \r\n      $top:l,\r\n      collection : \"my\"\r\n    });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n    \r\n    return this.http.get(serviceUrls.documentQueryUrl(), { headers, params } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async get(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n        \r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.documentUrl(identifier) ,{ headers } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n\r\n  async getInfo(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n        \r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.documentInfoUrl(identifier) ,{ headers } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async exists( identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.head(serviceUrls.documentUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async put( identifier, body, {realm}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(body)) throw Error(`invalid value for body`);  \r\n  \r\n    const Realm =  { Realm : realm || this.#realm || undefined };  \r\n    const ContentType = { 'Content-Type': 'application/json' };\r\n    const headers =  { ...Realm , ...ContentType}\r\n    \r\n    return this.http.put(serviceUrls.documentUrl(identifier), body , { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async delete(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.delete(serviceUrls.documentUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n   \r\n  async validate(body, {realm, schema, metadata }={}){\r\n    if(!isValid(body)) throw Error(`invalid value for body`);  \r\n\r\n    const params = stringifyUrlParams( { schema, metadata });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n   \r\n    return this.http.put(serviceUrls.validateUrl(), body, { headers, params } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async canCreate(identifier, {realm, schema, metadata}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(schema)) throw Error(`invalid value for schema`);  \r\n\r\n    const params = stringifyUrlParams({ schema, metadata });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.get(serviceUrls.securityUrl(identifier, 'create'), { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async canUpdate(identifier,  {realm, metadata }={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const params = stringifyUrlParams( {metadata });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.get(serviceUrls.securityUrl(identifier, 'update'), { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  } \r\n \r\n  async canDelete(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n    \r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n   \r\n    return this.http.get(serviceUrls.securityUrl(identifier, 'delete'), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n}\r\n\r\nexport class KmDocumentsVersionApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {    \r\n    super(options);\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n  \r\n\r\n  async query(identifier, {realm}={}){\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n    \r\n    return this.http.get(serviceUrls. documentVersionListUrl(identifier) , { headers, params } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async get(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n        \r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.get(serviceUrls.documentVersionUrl(identifier) ,{ headers } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n\r\n  async getInfo(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n        \r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.get(serviceUrls.documentVersionInfoUrl(identifier) ,{ headers } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async exists( identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.head(serviceUrls.documentVersionUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n}\r\n\r\nexport class KmAttachmentsApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {    \r\n    super(options);\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n\r\n  async uploadTempFile(identifier, file, fileName, options)  {\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(file))       throw Error(`invalid value for file`);  \r\n    if(!isValid(fileName))   throw Error(`invalid value for fileName`);  \r\n    if(!isValid(options))    throw Error(`invalid value for options`);  \r\n    \r\n    \r\n    const { timeout, onUploadProgress, onDownloadProgress }= { ...(options||{}) };\r\n\r\n    const apiConfig = {\r\n      headers: {},\r\n      timeout: timeout || 60 * 60 * 1000,\r\n      onUploadProgress, \r\n      onDownloadProgress\r\n    };\r\n    \r\n    const tempSlotBody = {\r\n        filename    : fileName,\r\n    }\r\n\r\n    //find the content type and validate with whitelist\r\n    if(file instanceof FormData){\r\n        const tempFile = formData.get('file')\r\n        if(tempFile){\r\n            tempSlotBody.contentType = this.getMimeType(file);\r\n        }\r\n    }\r\n    else if(file instanceof File){\r\n        tempSlotBody.contentType = this.getMimeType(file)\r\n    }\r\n    else{\r\n        throw new Error('Unable to read file information.')\r\n    }\r\n    \r\n    if (this.mimeTypeWhitelist().indexOf(tempSlotBody.contentType) < 0) {\r\n        throw new Error(\"File type not supported: \" + mimeType + \"(\" + file.name + \")\");\r\n    }\r\n\r\n    //const key = S4();\r\n    // get a temporary slot from S3 to upload the file\r\n    const temporarySlot = this.http.put(serviceUrls.temporaryAttachmentUrl(),  tempSlotBody  )\r\n                                   .then(res => res.data)\r\n                                   .catch(tryCastToApiError);\r\n    \r\n    // upload the file to the temporary slot on S3    \r\n    apiConfig.headers['Content-Type' ] = temporarySlot.contentType;\r\n    //apiConfig.headers['Authorization'] = undefined;\r\n    const temporaryAttachment =  this.http.put(temporarySlot.url, file,  {  ...apiConfig} )\r\n                                         .then(res => res.data)\r\n                                         .catch(tryCastToApiError);\r\n\r\n    //persists the file using the KM persists attachments endpoint\r\n    const persistedAttachment =  this.http.post(serviceUrls.persistAttachmentUrl(identifier, temporarySlot.uid), fileName,  { params } )\r\n                                          .then(res => res.data)\r\n                                          .catch(tryCastToApiError);\r\n    \r\n    const config = useRuntimeConfig();\r\n    return {\r\n        ...persistedAttachment,\r\n        url     : config.public.API_URL+persistedAttachment.url        \r\n    };\r\n  }\r\n\r\n  async upload(identifier, file,  {contentType, headers  }={}) {\r\n        if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n        if(!isValid(file)) throw Error(`invalid value for file`);  \r\n\r\n        params = {contentType, identifier, filename } || {};\r\n        params.identifier = identifier;\r\n        params.filename = file.name;\r\n\r\n        var contentType = params.contentType || this.getMimeType(file);\r\n\r\n        // params.contentType = undefined;\r\n        params.headers = params.header || {};\r\n        params.headers[\"Content-Type\"] = contentType;\r\n\r\n        ////TEMP////////////////\r\n            //upload to temp url\r\n            const data = this.http.put(serviceUrls.attachmentUrl(identifier, file.name), body=file,  { params } )\r\n                                  .then(res => res.data)\r\n                                  .catch(tryCastToApiError);\r\n            \r\n            const config = useRuntimeConfig()\r\n            data.url = config.public.API_URL+data.url;\r\n            data.urls = {//required by ckeditor\r\n                \"default\": data.url \r\n            };\r\n            \r\n            return data;\r\n        ///////TEMP////////////////\r\n\r\n      //TODO : use s3\r\n      //1 request for temp file from s3\r\n      //upload file \r\n      //return s3 location\r\n      //persist temp file location in api\r\n  }\r\n  getMimeType(file) {\r\n    if(!isValid(file)) throw Error(`invalid value for file`);  \r\n\r\n    const filename = file.name\r\n    let  sMimeType = file.type || \"application/octet-stream\";     \r\n\r\n    if (filename && sMimeType == \"application/octet-stream\") {\r\n        var sExt = \"\";\r\n        var iIndex = filename.lastIndexOf(\".\");\r\n\r\n        if (iIndex >= 0)\r\n            sExt = filename.substring(iIndex).toLowerCase();\r\n\r\n        if (sExt == \".json\") sMimeType = \"application/json\";\r\n        if (sExt == \".geojson\") sMimeType = \"application/json\";\r\n        if (sExt == \".xml\") sMimeType = \"application/xml\";\r\n    }\r\n\r\n    return sMimeType;\r\n  }\r\n  \r\n}\r\n\r\nexport const mimeTypeWhitelist =\r\n   [\r\n    \"application/json\",\"application/ogg\",\"application/pdf\",\"application/xml\",\"application/zip\",\r\n    \"application/x-zip\",\"application/x-zip-compressed\",\"audio/mpeg\",\"audio/x-ms-wma\",\"audio/x-wav\",\r\n    \"image/gif\",\"image/jpeg\", \"image/png\",\"image/bmp\",\r\n    \"image/tiff\",\r\n    \"text/csv\",\"text/html\",\"text/plain\",\"text/xml\",\"video/mpeg\",\"video/mp4\",\"video/quicktime\",\r\n    \"video/x-ms-wmv\",\"video/x-msvideo\",\"video/x-flv\",\"application/vnd.oasis.opendocument.text\",\r\n    \"application/vnd.oasis.opendocument.spreadsheet\",\"application/vnd.oasis.opendocument.presentation\",\"application/vnd.oasis.opendocument.graphics\",\r\n    \"application/vnd.ms-excel\",\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\"application/vnd.ms-powerpoint\",\"application/msword\",\r\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n  ]\r\n","import ApiBase, { tryCastToApiError, isValid, stringifyUrlParams } from '../api-base';\r\n\r\nconst  serviceUrls = { \r\n  documentQueryUrl      (                     ){ return \"/api/v2013/documents\" },\r\n  draftUrl              (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/draft` },\r\n  draftSecurityUrl      (identifier, operation){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/draft/securities/${encodeURIComponent(operation)}` },\r\n  draftLockUrl          (identifier, lockID   ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/draft/locks/${encodeURIComponent(lockID)}` },\r\n  draftLockListUrl      (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/draft/locks` },\r\n}\r\n\r\nexport class KmDraftsApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {    \r\n    super(options);\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n\r\n  async query({realm, q, s, l, sk }={}){  \r\n    const params = stringifyUrlParams( {    \r\n      $filter:q, \r\n      $orderby:s,\r\n      $top:l,\r\n      $skip:sk, \r\n      collection : \"mydraft\"  \r\n    });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    const data =  this.http.get(serviceUrls.documentQueryUrl(), { headers, params} )\r\n                           .then(res => res.data)\r\n                           .catch(tryCastToApiError);\r\n     \r\n    if(data?.Items?.length){\r\n      data.Items = data.Items.map(e=>{\r\n            if(e.workingDocumentBody){\r\n                e.body = e.workingDocumentBody;\r\n            }\r\n            return e;\r\n      });\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  async get(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    \r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    const data =  this.http.get(serviceUrls.draftUrl(identifier), { headers })\r\n                           .then(res => res.data)\r\n                           .catch(tryCastToApiError);\r\n    \r\n    if(data.workingDocumentBody){\r\n        data.body = data.workingDocumentBody;\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  async exists( identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n     return this.http.head(serviceUrls.draftUrl(identifier), { headers })\r\n                     .then(res => res.data)\r\n                     .catch(tryCastToApiError);\r\n  }\r\n\r\n  async put( identifier, body, {realm, schema}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(body)) throw Error(`invalid value for body`);  \r\n\r\n    const params = stringifyUrlParams( {schema}); \r\n\r\n    const Realm =  { Realm : realm || this.#realm || undefined };\r\n    const ContentType = { 'Content-Type': 'application/json' };\r\n    const headers =  { ...Realm , ...ContentType}\r\n\r\n    return this.http.put(serviceUrls.draftUrl(identifier),  body , { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async delete(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.delete(serviceUrls.draftUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n  \r\n  async canCreate(identifier, {realm, schema, metadata }={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const params = stringifyUrlParams( {schema, metadata }); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.draftSecurityUrl(identifier, 'create'), { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async canUpdate(identifier, {realm, metadata}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    const params = stringifyUrlParams( {metadata}); \r\n    return this.http.get(serviceUrls.draftSecurityUrl(identifier, 'update'), { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async canDelete(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.draftSecurityUrl(identifier, 'delete'), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n}\r\n\r\n\r\nexport class KmLocksApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {    \r\n    super(options);\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n\r\n  async query(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n \r\n    return this.http.get(serviceUrls.draftLockListUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async get(identifier, lockID, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(lockID)) throw Error(`invalid value for lockID`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.draftLockUrl(identifier, lockID), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async exists(identifier,lockID, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(lockID)) throw Error(`invalid value for lockID`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.head(serviceUrls.draftLockUrl(identifier, lockID), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }  \r\n \r\n  async put(identifier,lockID, body, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(lockID)) throw Error(`invalid value for lockID`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n    \r\n    return this.http.put(serviceUrls.draftLockUrl(identifier,lockID), body, { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n \r\n  async delete(identifier,lockID, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(lockID)) throw Error(`invalid value for lockID`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.delete(serviceUrls.draftLockUrl(identifier,lockID), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n}\r\n","import ApiBase from '../api-base';\r\nimport { KmDocumentsApi, KmDocumentsVersionApi, KmAttachmentsApi } from './KmDocuments'\r\nimport { KmDraftsApi, KmLocksApi } from './KmDrafts' \r\n\r\nexport default class KmStorageApi extends ApiBase \r\n{\r\n  constructor(options) {\r\n    super(options);\r\n    \r\n    this.documents           = new KmDocumentsApi(options);\r\n    this.documentsVersion    = new KmDocumentsVersionApi(options);\r\n    this.drafts              = new KmDraftsApi(options);\r\n    this.locks               = new KmLocksApi(options);\r\n    this.attachments         = new KmAttachmentsApi(options);    \r\n  }\r\n}\r\n\r\n","<template>\r\n    <div>\r\n      <div style=\"border: 1px solid #eee\" v-if=\"editorConfig\" class=\"vld-parent\">\r\n          <!-- <overlay-loading :active=\"isUploadingFile\" \r\n          :can-cancel=\"false\" background-color=\"rgb(9 9 9)\"\r\n          :is-full-page=\"false\">\r\n          <km-spinner size=\"lg\" \r\n              :message=\"t('uploadingFile')\"></km-spinner>\r\n      </overlay-loading>\r\n   -->\r\n      <ckeditor \r\n          v-model=\"binding\"\r\n          :editor=\"editor\"\r\n          :config=\"editorConfig\"\r\n          :tagName=\"tagName\"\r\n          :disabled=\"$attrs.disabled\"      \r\n          @ready=\"onEditorReady\"\r\n          @focus=\"onEditorFocus\"\r\n          @blur=\"onEditorBlur\"\r\n          @input=\"onEditorInput\"\r\n          @destroy=\"onEditorDestroy\"\r\n        ></ckeditor>\r\n      </div>\r\n      <p style=\"border: 1px solid #eee; border-top: none\">\r\n        {{ t('attachmentMessage') }}\r\n        <span class=\"float-end\" id=\"wordCountSec\" style=\"padding-right: 5px\">\r\n          <strong>{{ t('wordCount') }}: {{ wordCount }}</strong></span>\r\n      </p>\r\n      <p style=\"border: 1px solid #eee; border-top: none\" v-if=\"uploadErrors.length\">         \r\n          <div class=\"alert alert-danger\" role=\"alert\">\r\n            {{ t('uploadError') }} \r\n            <ul><li v-for=\"error in uploadErrors\" :key=\"error\">{{ error.file }}</li></ul>\r\n          </div>\r\n        </p>\r\n    </div>\r\n  </template>\r\n\r\n  <script setup> \r\n    import  \"@ckeditor/ckeditor5-vue/dist/ckeditor.js\";\r\n    import CKEditor   from '@ckeditor/ckeditor5-vue';\r\n    import ClassicEditor from '@scbd/ckeditor5-build-inline-full/build/ckeditor.js';    \r\n    import '@scbd/ckeditor5-build-inline-full/build/ckeditor.css';  \r\n    import { useI18n} from '../../../services/composables/i18n.js'\r\n    import { computed, onMounted, ref , defineComponent} from 'vue';\r\n    import { useLogger } from '../../../services/util/index.js';\r\n    import KmStorageApi from '../../../services/api/km-storage/KmStorage.js';\r\n\r\n    //   import OverlayLoading from 'vue3-loading-overlay';\r\n    //   import 'vue3-loading-overlay/dist/vue3-loading-overlay.css';\r\n    //   import KmSpinner from '../KmSpinner.vue';\r\n    \r\n    const model    = defineModel({type:String, required:true, default:''});\r\n\r\n    const props = defineProps( {     \r\n        tagName  : { type: String, required: false,default: 'div'},     \r\n        uploadUrl: { type: String, required: false},\r\n        config   : { type: Object, required: true},\r\n        identifier: { type: String, required: true}  \r\n    });    \r\n\r\n \r\n    const emit     = defineEmits(['update:modelValue', 'onFileUpload', 'onEditorDestroy']);\r\n\r\n    const api          = new KmStorageApi({});\r\n    const ckeditor     = CKEditor.component;\r\n    const editor       = ClassicEditor;\r\n    const uploadErrors = [];\r\n\r\n    const {t, locale }    = useI18n();\r\n    const wordCount       = ref(0);\r\n    const isUploadingFile = ref(false);\r\n\r\n    const  binding  = computed({       \r\n        get()      {  return model.value;  },        \r\n        set(value) {  emit('update:modelValue', value);  }\r\n    })      \r\n  \r\n     \r\n    const onEditorReady=(ed)  =>{    \r\n        class UploadAdapter {\r\n          constructor(loader) {\r\n            this.loader = loader;\r\n          }\r\n          upload() {\r\n            const loader = this.loader;\r\n            return this.loader.file.then(function(file){\r\n              \r\n              isUploadingFile.value = true;  \r\n              return api.attachments.uploadTempFile(props.identifier, file, file.name)   \r\n                  .then(function(success) {                 \r\n                      success.urls = { \"default\": success.url }\r\n                      loader.uploaded = success;\r\n                      return success;\r\n                  })\r\n                  .catch(function(error) {                   \r\n                      uploadErrors.push({file:file.name })  \r\n                      useLogger().error(error);                     \r\n                      throw error;\r\n                  })\r\n                  .finally(()=>{\r\n                      isUploadingFile.value = false;  \r\n                  });\r\n            })\r\n          }\r\n          abort() {\r\n          }\r\n        }\r\n        ed.plugins.get('FileRepository').createUploadAdapter = function(loader){\r\n            const uploadAdapter = new UploadAdapter(loader);\r\n            uploadAdapter.loader.on('change:uploaded' , onEditorImageUploaded);\r\n            return uploadAdapter;\r\n        };\r\n  \r\n        ed.editing.view.document.on('paste', function (eventInfo, data) {\r\n          // console.debug('paste', eventInfo, data)\r\n        })\r\n  \r\n        ed.editing.view.document.on('drop', async function (eventInfo, data) {\r\n          if(data.dataTransfer){\r\n              isUploadingFile.value = true;   \r\n  \r\n              const fileUploads = data.dataTransfer.files.map(function(file, i){\r\n                  const formData = new FormData();\r\n                  const fileType = file.type.substring( 0, 5 );\r\n                  const mimeType = api.attachments.getMimeType(file);   \r\n  \r\n                  if(fileType == \"image\")\r\n                      return;\r\n                  if (api.attachments.mimeTypeWhitelist().indexOf(mimeType) < 0) {   \r\n                      alert(\"File type not supported: \" + mimeType + \"(\" + file.name + \")\");\r\n                      return;\r\n                  }\r\n  \r\n                  formData.append('file', file);\r\n                  return api.attachments.uploadTempFile(props.identifier, file, file.name)   \r\n                      .then(function(success) {\r\n                          const viewFragment = ed.data.processor.toView('<span class=\"me-2\">&nbsp;<a rel=\"noopener noreferrer\" target=\"_blank\" href=\"'+success.url+'\">'+success.filename+ '</a>&nbsp;</span>' );\r\n                          const modelFragment = ed.data.toModel(viewFragment);\r\n                          ed.model.insertContent( modelFragment);\r\n                          onFileUpload({file:success});   \r\n                      })\r\n                      .catch(e=>{\r\n                          uploadErrors.push({file:file.name })   \r\n                          useLogger().error(e)\r\n                      })\r\n              });\r\n  \r\n              try{\r\n                  await Promise.all(fileUploads)\r\n              }\r\n              catch(e){\r\n                  useLogger().error(e)\r\n                }\r\n              finally{\r\n                  isUploadingFile.value = false   \r\n                };\r\n            }\r\n        })\r\n  \r\n        ed.model.document.on('change:data', function (eventInfo, data) {\r\n          // console.debug('change', eventInfo, data)\r\n        })\r\n  \r\n        function onEditorImageUploaded(eventInfo, name, value, oldValue){\r\n          // console.log((eventInfo, name, value, oldValue))\r\n          //TODO: check why url is not in event args\r\n            if(value.url){\r\n                onFileUpload({file:value})    \r\n            }\r\n        }  \r\n        emit('onEditorReady', ed);      \r\n    }\r\n     \r\n    const onEditorFocus=( event, editor )=> {\r\n        // console.debug( 'Editor focused.', { event, editor } );\r\n        emit('onEditorFocus', event, editor);\r\n    }\r\n\r\n    const onEditorBlur=( event, editor ) =>{\r\n        // console.debug( 'Editor blurred.', { event, editor } );\r\n        emit('onEditorBlur', event, editor);\r\n    }\r\n\r\n    const onEditorInput=( data, event, editor )=> {       \r\n        emit('onEditorInput', event, editor);     \r\n    }\r\n    \r\n    const  onEditorDestroy=( editor )=> {\r\n        // console.debug( 'Editor destroyed.', { editor } );\r\n        emit('onEditorDestroy', editor);\r\n    }\r\n    \r\n    const onFileUpload=(params)=>{\r\n        emit('onFileUpload', params);\r\n    }\r\n\r\n    const editorConfig = computed(()=>{     \r\n          return {\r\n            ...props.config,  \r\n            language: { ui: locale, content: locale },\r\n            wordCount: {\r\n                onUpdate: function (stats) {\r\n                    wordCount.value = stats.words;\r\n                },\r\n            }\r\n        }          \r\n    })\r\n \r\n  \r\n  </script>\r\n\r\n  <style scope>  \r\n    .ck.ck-balloon-panel.ck-balloon-panel_visible {\r\n        /* stylelint-disable-line */\r\n        z-index: 10000 !important;\r\n    }\r\n  </style>\r\n","\r\nexport function lstring(ltext, locale) {\r\n  \r\n    if(Number.isInteger(ltext)) //is number to handle generic implementation of NR\r\n      return ltext;\r\n  \r\n    if (!ltext)\r\n      return \"\";\r\n    if (typeof(ltext) == 'string')\r\n      return ltext;\r\n    let sText=\"\";\r\n    if (!sText && locale)\r\n      sText = ltext[locale];\r\n    if (!sText)\r\n      sText = ltext.en;\r\n    if (!sText) {\r\n      var normalized = normalizeText(ltext)\r\n      if(normalized[locale])\r\n        return normalized[locale];\r\n\r\n      for (var key in ltext) {\r\n        sText = ltext[key];\r\n        if (sText)\r\n          break;\r\n      }\r\n    }\r\n    return sText || \"\";\r\n}\r\n\r\n\r\nfunction normalizeText(text) {\r\n  if(!text) return null;\r\n\r\n  var entry = { ar: text.ar, en: text.en, es: text.es, fr: text.fr, ru: text.ru, zh: text.zh };\r\n\r\n  if(!entry.en) entry.en = entry.fr;\r\n  if(!entry.en) entry.en = entry.es;\r\n  if(!entry.en) entry.en = entry.ru;\r\n  if(!entry.en) entry.en = entry.ar;\r\n  if(!entry.en) entry.en = entry.zh;\r\n\r\n  if(!entry.fr) entry.fr = entry.en;\r\n  if(!entry.es) entry.es = entry.en;\r\n  if(!entry.ru) entry.ru = entry.en;\r\n  if(!entry.ar) entry.ar = entry.en;\r\n  if(!entry.zh) entry.zh = entry.en;\r\n  return entry;\r\n}","export const allPluginsConfig= {  \r\n     toolbar: {\r\n            items: ['heading', 'fontSize', 'fontColor', '|', 'bold', 'italic', 'link', '|',\r\n            'indent', 'outdent', 'alignment', '|', 'bulletedList', 'numberedList', 'blockQuote', '|',\r\n            'highlight', 'insertTable', '|', 'imageInsert', 'mediaEmbed', '|', 'horizontalLine', '|',\r\n            'removeFormat', 'undo', 'redo', '|', 'pageBreak'],\r\n            shouldNotGroupWhenFull: true\r\n        },\r\n        alignment: { options: ['left', 'right', 'center', 'justify'] },\r\n        fontColor: {\r\n            colors: [\r\n            { color: 'hsl(0, 0%, 0%)', label: 'Black' },\r\n            { color: 'hsl(0, 0%, 30%)', label: 'Dim grey' },\r\n            { color: 'hsl(0, 0%, 60%)', label: 'Grey' },\r\n            { color: 'hsl(0, 0%, 90%)', label: 'Light grey' },\r\n            { color: 'hsl(0, 0%, 100%)', label: 'White', hasBorder: true }\r\n            ],\r\n        },\r\n        list: { properties: { styles: true, startIndex: true, reversed: true } },\r\n        image: {\r\n            styles: ['alignCenter', 'alignLeft', 'alignRight'],\r\n            resizeOptions: [\r\n                            { name: 'imageResize:original', label: 'Original', value: null },\r\n                            { name: 'imageResize:25', label: '25%', value: '25' },\r\n                            { name: 'imageResize:50', label: '50%', value: '50' },\r\n                            { name: 'imageResize:75', label: '75%', value: '75' },\r\n                            ],\r\n            toolbar: ['imageTextAlternative', 'toggleImageCaption', '|',\r\n                    'imageStyle:inline', 'imageStyle:wrapText', 'imageStyle:breakText',\r\n                    'imageStyle:side', '|', 'resizeImage'],\r\n            insert: { integrations: ['insertImageViaUrl'] },\r\n        },\r\n        heading: {\r\n            options: [{ model: 'paragraph', title: 'Paragraph', class: 'ck-heading_paragraph' },\r\n                      { model: 'heading1', view: 'h1', title: 'Heading 1', class: 'ck-heading_heading1' },\r\n                      { model: 'heading2', view: 'h2', title: 'Heading 2', class: 'ck-heading_heading2' },\r\n                      { model: 'heading3', view: 'h3', title: 'Heading 3', class: 'ck-heading_heading3' }],\r\n        },\r\n        fontSize: {\r\n            options: [8, 10, 12, 14, 'default', 18, 20, 22],\r\n            supportAllValues: true,\r\n        },\r\n        table: {\r\n            contentToolbar: ['tableColumn', 'tableRow', 'mergeTableCells', 'tableProperties', 'tableCellProperties', 'toggleTableCaption']\r\n        },\r\n        link: {\r\n            addTargetToExternalLinks: false,\r\n            defaultProtocol: 'https://',\r\n            decorators: [\r\n            { mode: 'manual', label: 'Downloadable', attributes: { download: 'download', }, },\r\n            { mode: 'manual', label: 'Open in a new tab', attributes: { target: '_blank', rel: 'noopener noreferrer', }, },\r\n            ],\r\n        },\r\n        mediaEmbed: {\r\n            previewsInData: false,\r\n            removeProviders: ['youtube'],\r\n            extraProviders: [\r\n            {\r\n                name: 'youtubePlaylist',\r\n                url: [/^youtube\\.com\\/embed\\/videoseries\\?list=([\\w-]+)/],\r\n                html: (match) => {\r\n                const id = match[1]\r\n    \r\n                return (\r\n                    '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' +\r\n                    `<iframe src=\"https://www.youtube.com/embed/videoseries?list=${id}\" ` +\r\n                    'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' +\r\n                    'frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen>' +\r\n                    '</iframe>' +\r\n                    '</div>'\r\n                )\r\n                },\r\n            },\r\n            {\r\n                name: 'youtube',\r\n                url: [\r\n                /^(?:m\\.)?youtube\\.com\\/watch\\?v=([\\w-]+)/,\r\n                /^(?:m\\.)?youtube\\.com\\/v\\/([\\w-]+)/,\r\n                /^youtube\\.com\\/embed\\/([\\w-]+)/,\r\n                /^youtu\\.be\\/([\\w-]+)/,\r\n                ],\r\n                html: (match) => {\r\n                const id = match[1]\r\n    \r\n                return (\r\n                    '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' +\r\n                    `<iframe src=\"https://www.youtube.com/embed/${id}\" ` +\r\n                    'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' +\r\n                    'frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen>' +\r\n                    '</iframe>' +\r\n                    '</div>'\r\n                )\r\n                },\r\n            },\r\n            {\r\n                name: 'customEmbed',\r\n                url: [\r\n                /cdn\\.knightlab\\.com\\/libs\\/timeline3\\/.*/,\r\n                /uploads\\.knightlab\\.com\\/storymapjs\\/.*/,\r\n                /cdn\\.knightlab\\.com\\/libs\\/juxtapose\\/.*/,\r\n                /uploads\\.knightlab\\.com\\/scenevr\\/.*/,\r\n                /cdn\\.knightlab\\.com\\/libs\\/storyline\\/.*/,\r\n                /theydrawit\\.mucollective\\.co\\/vis\\/.*/,\r\n                /youtube\\.com\\/embed\\/videoseries.*/,\r\n                ],\r\n                html: function (id) {\r\n                return (\r\n                    '<figure class=\"media\">' + '\t<oembed url=\"' + id.input + '\">' +\r\n                    '<a href=\"' + id.input + '\">' + id.input + '</a>' + '\t</oembed>' + '</figure>'\r\n                )\r\n                },\r\n            },\r\n            ],\r\n        }      \r\n}","<template>\r\n    <div class=\"scbd-common km-input-rich-lstring\">\r\n        <div :id=\"`km-rich-lstring-${uid}`\"> \r\n            <ul class=\"nav nav-tabs\">      \r\n               <li class=\"nav-item\"  v-for=\"locale in props.locales\" :key=\"locale\" :id=\"`lstringTab-${uid}`\">           \r\n                  <a class=\"nav-link \" aria-current=\"page\"  href=\"javascript:void(0);\" :class=\"{'active': selectedLocale === locale}\"  @click=\"onTabChange(locale)\">      \r\n                  {{lstring(getTerm(locale).title||locale)}}   \r\n                    \r\n                  </a>\r\n              </li>        \r\n            </ul>   \r\n          \r\n            <div class=\"mt-2\" :aria-labelledby=\"`tabContent-${locale}-${uid}`\" v-for=\"locale in locales\" :key=\"locale\"  :class=\"{'d-none': selectedLocale != locale}\" :id=\"`lstringTabContent-${uid}`\">       \r\n                  <ck-editor v-if=\"selectedLocale==locale\" v-model=\"binding[selectedLocale]\" :identifier=\"identifier\"\r\n                             :locale=\"selectedLocale\"  :config=\"allPluginsConfig\" @update:modelValue=\"onChange\" @on-file-upload=\"onFileUpload\"  >\r\n                  </ck-editor>     \r\n              </div> \r\n          </div>\r\n    </div> \r\n</template>  \r\n\r\n<script setup>\r\n    import { ref, watch, onMounted, computed} from 'vue';\r\n    import {without} from 'lodash';\r\n    import ckEditor from '../../inputs/ck-editor/ck-editor.vue';\r\n    import { useThesaurus }    from '@/services/composables/thesaurus';  \r\n    import { makeSmallUid }   from '@/services/util/index';\r\n    import {lstring } from '../../../services/filters/lstring';   \r\n    import { removeEmpty }  from '../../../services/util/index';\r\n    import { allPluginsConfig } from '../../inputs/ck-editor/all-plugins-config.js';\r\n  \r\n  \r\n    const model = defineModel({ type: Object, required: false, default:{}});\r\n  \r\n    const props = defineProps({\r\n        locales:    { type: Array,    required: true  }, \r\n        disabled:   { type: Boolean,  required: false },\r\n        identifier: { type: String,   required: true  }\r\n    });\r\n\r\n    const emit = defineEmits(['update:modelValue', 'onFileUpload', 'onLanguageFocus']);\r\n\r\n    const activeLocale = ref('');\r\n    const uid = makeSmallUid();  \r\n\r\n    watch(props.locales,  (newVal, oldVal) => {\r\n        const deleted = without(oldVal, ...newVal);\r\n        if(deleted?.length){      \r\n            deleted.forEach(e=>{\r\n                binding.value[e] = undefined;\r\n            })\r\n            onChange();\r\n        }\r\n        if(!newVal.includes(activeLocale.value)){        \r\n        onTabChange(newVal[0]);\r\n        }\r\n        loadLanguages();\r\n    })     \r\n\r\n    const  binding  = computed(()=>{\r\n        return model.value||{};\r\n    })\r\n     \r\n    const selectedLocale  = computed(()=>{           \r\n        return activeLocale.value;\r\n    })\r\n\r\n    const onChange=(value)=>{\r\n        const clean = removeEmpty({...binding.value}); \r\n        emit('update:modelValue', clean);\r\n    }\r\n\r\n    const onFileUpload=({file})=>{\r\n        emit('onFileUpload', {file, locale : activeLocale.value});\r\n    }\r\n\r\n    const loadLanguages=()=>{   \r\n        const thesaurusService  = useThesaurus();\r\n        props.locales?.forEach(e=>{\r\n            thesaurusService.loadDomainTerms (`lang-${e}`);\r\n        });   \r\n    }\r\n\r\n    const  getTerm=(term)=>{     \r\n        const thesaurusService  = useThesaurus();\r\n        return thesaurusService.getDomainTerms(`lang-${term}`)||{};\r\n    }\r\n\r\n    const  onTabChange=(locale)=>{\r\n        activeLocale.value = locale;\r\n        emit('onLanguageFocus', locale);\r\n   } \r\n\r\n    onMounted(() => {\r\n        activeLocale.value =props.locales[0];        \r\n        if(model.value){\r\n            binding.value = {...model.value||{}};\r\n        }\r\n        loadLanguages();\r\n    }) \r\n</script>\r\n  ","<template>\r\n    <div>\r\n        <h3>CBD controls components</h3>\r\n\r\n        <preview-component card-header=\"Available locales\">\r\n            <template #left>\r\n                <div class=\"btn-group\">\r\n                    <button class=\"btn btn-danger\" v-for=\"(locale, index) in locales\" :key=\"locale\" @click=\"removeLocale(index)\">\r\n                        <i class=\"bi bi-trash\"></i> {{locale}}\r\n                    </button>\r\n                </div>\r\n            </template>\r\n            <template #right>\r\n                {{`<button class=\"btn btn-danger\" v-for=\"(locale, index) in locales\" :key=\"locale\" @click=\"removeLocale(index)\">\r\n                    <i class=\"bi bi-trash\"></i></button> `}}\r\n            </template>\r\n        </preview-component>  \r\n\r\n        <preview-component card-header=\"Link editor\">\r\n            <template #left>\r\n                <button class=\"btn btn-default\" @click=\"showLinkEditor()\">Show Link editor</button>\r\n                <link-editor ref=\"linkEditorRef\" @on-close=\"onLinkEditorClose\"></link-editor>\r\n                {{newLink}}\r\n            </template>\r\n            <template #right>\r\n                &lt;button class=&quot;btn btn-default&quot; @click=&quot;showLinkEditor()&quot;&gt;Show Link editor&lt;/button&gt;\r\n                &lt;link-editor ref=&quot;linkEditorRef&quot; @close=&quot;onLinkEditorClose&quot;&gt;&lt;/link-editor&gt;\r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"Km view links\">\r\n            <template #left>\r\n                <km-view-links v-model=\"links\"   @on-edit = \"edit($event)\"  @on-delete = \"remove($event)\"></km-view-links>\r\n            </template>\r\n            <template #right>\r\n                &lt;km-view-links v-model=&quot;links&quot;    @on-edit  = &quot;edit($event)&quot;  @on-delete = &quot;remove($event)&quot;&gt;&lt;/km-view-links&gt;                         \r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"Km value bool\">\r\n            <template #left>\r\n                <km-value-bool value=\"true\" locale=\"en\"></km-value-bool>\r\n            </template>\r\n            <template #right>\r\n                {{`<km-value-bool value=\"true\" locale=\"en\"></km-value-bool>`}}\r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"KmInputLString\">\r\n            <template #left>\r\n                <km-input-lstring v-model=\"kmInputLStringModel\" :locales=\"locales\" placeholder=\"Please enter ...\">\r\n                </km-input-lstring>\r\n                <br/>\r\n                {{ kmInputLStringModel }}\r\n            </template>\r\n            <template #right>                 \r\n                <code>\r\n                    {{ `<km-input-lstring v-model=\"kmInputLStringModel\" :locales=\"locales\" placeholder=\"Please enter ...\" >\r\n                    </km-input-lstring>` }}\r\n                </code>         \r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"KmInputLString \">\r\n            <template #left>\r\n                <km-input-lstring v-model=\"kmInputLStringModel\" :locales=\"locales\" rows=\"5\" placeholder=\"Please enter ...\" >\r\n                </km-input-lstring>\r\n                <br/>\r\n                {{ kmInputLStringModel }}\r\n            </template>\r\n            <template #right>                 \r\n                <code>\r\n                    {{ `<km-input-lstring v-model=\"kmInputLStringModel\" :locales=\"locales\"  rows=\"5\" placeholder=\"Please enter ...\" >\r\n                    </km-input-lstring>` }}\r\n                </code>         \r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"Add Link\">\r\n            <template #left>\r\n                <km-add-link  v-model=\"kmAddLinkModel1\"/>Parent links :   {{ kmAddLinkModel1 }}   \r\n                <br/>\r\n            </template>\r\n            <template #right>\r\n                &lt;km-add-link/&gt;\r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"Add Websites\">\r\n            <template #left>\r\n                <km-add-link v-model=\"kmAddLinkModel2\">\r\n                    <template #link-button-label>\r\n                        Add Websites\r\n                    </template>\r\n                    <template #link-dialog-title>\r\n                        My custom title\r\n                    </template>                                  \r\n                    <template #links-view>     \r\n                        <p></p>                                  \r\n                    </template>\r\n                </km-add-link>\r\n                Parent links :   {{ kmAddLinkModel2 }}   <br/>\r\n            </template>\r\n            <template #right>\r\n                &lt;km-add-link&gt;\r\n                    &lt;template #link-button-label&gt;\r\n                        Add Websites\r\n                    &lt;/template&gt;\r\n                    &lt;template #link-dialog-title&gt;\r\n                        my custom title\r\n                    &lt;/template&gt;                                  \r\n                    &lt;template #links-view&gt;  \r\n                    &lt;p&gt; &lt;/p&gt;                                     \r\n                    &lt;/template&gt;\r\n                &lt;/km-add-link&gt;\r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"Km form group\">\r\n            <template #left>\r\n                <km-form-group required name=\"government\" caption=\"SCBD Control help\" help-content=\"This is a preview of simple help, it also supports <h3>html</h3>\">\r\n                    <input name=\"government-input\" class=\"form-control\" />\r\n                </km-form-group>   \r\n            </template>\r\n            <template #right>\r\n                {{` <km-form-group required name=\"government\" caption=\"SCBD Control help\" help-content=\"This is a preview of simple help, it also supports <h3>html</h3>\">\r\n                    <input name=\"government-input\" class=\"form-control\" />\r\n                </km-form-group>    `}}\r\n                <br><br>\r\n                <select-file-button  multiple @on-file-selected=\"receiveFile\"> <slot name=\"file-button-label\">+ Add Multiple File</slot></select-file-button> \r\n                <br/>   \r\n                <br/>\r\n                <select-file-button  @on-file-selected=\"receiveFile\"> <slot name=\"file-button-label\">+ Add File</slot></select-file-button>                              \r\n                <div v-for=\"(item, index) in files\" :key=\"index\">\r\n                            {{item.name}}     \r\n                </div>   \r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"Km lstring value\">\r\n            <template #left>\r\n                <km-lstring-value value=\"Test Value\" locale=\"en\"></km-lstring-value>                 \r\n            </template>\r\n            <template #right>\r\n                {{`<km-lstring-value value=\"Test Value\" locale=\"en\"></km-lstring-value>`}}\r\n            </template>\r\n        </preview-component> \r\n\r\n        <preview-component card-header=\"Km Value\">\r\n            <template #left>\r\n                <km-value value=\"Test Value\"></km-value>  \r\n            </template>\r\n            <template #right>\r\n                {{`<km-value value=\"Test Value\"></km-value>`}}\r\n            </template>\r\n        </preview-component> \r\n     \r\n        <preview-component card-header=\"Km Locales\">\r\n            <template #left>\r\n                {{ kmLocalesModel }}\r\n                <km-locales\r\n                    :locales=\"locales\"        \r\n                    v-model=\"kmLocalesModel\"                                     \r\n                    >\r\n                </km-locales>\r\n            </template>\r\n            <template #right>\r\n                {{`<km-locales :locales=\"locales\" v-model=\"kmLocalesModel\"></km-locales>`}}\r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"Km Term\">\r\n            <template #left>\r\n                 {{ kmInitializeTerm }}\r\n                    <km-term\r\n                        :value=\"kmTermModel\" :locale=\"kmLocalesModel\" @on-term-load=\"onTermLoad\"                                           \r\n                        >\r\n                    </km-term>\r\n            </template>\r\n            <template #right>\r\n                {{`<km-term\r\n                    :value=\"kmTermModel\" :locale=\"kmLocalesModel\" @on-term-load=\"onTermLoad\"                                           \r\n                    >\r\n                </km-term>`}}\r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"Km value term\">\r\n            <template #left>\r\n                {{kmTermModel}} - {{kmLocalesModel}}\r\n                <km-value-term\r\n                    :value=\"kmTermModel\" :locale=\"kmLocalesModel\"                                          \r\n                    >\r\n                </km-value-term>\r\n            </template>\r\n            <template #right>\r\n                {{` <km-value-term\r\n                :value=\"kmTermModel\" :locale=\"kmLocalesModel\"                                          \r\n                >\r\n                </km-value-term>`}}\r\n            </template>\r\n        </preview-component> \r\n\r\n        <preview-component card-header=\"File Upload Editor\">\r\n            <template #left>\r\n                <button class=\"btn btn-default\" @click=\"showFileUploadEditor()\">Show File Upload editor</button>\r\n                <file-upload-editor ref=\"fileUploadEditorRef\" @on-close=\"onFileUploadEditorClose\"></file-upload-editor>\r\n                {{newFile}}\r\n            </template>\r\n            <template #right>\r\n                &lt;button class=&quot;btn btn-default&quot; @click=&quot;showFileUploadEditor()&quot;&gt;Show File Upload editor&lt;/button&gt;\r\n                &lt;file-upload-editor ref=&quot;fileUploadEditorRef&quot; @on-close=&quot;onFileUploadEditorClose&quot;&gt;&lt;/file-upload-editor&gt;                              \r\n            </template>\r\n        </preview-component>\r\n\r\n        <preview-component card-header=\"Km value terms\">\r\n            <template #left>\r\n                <km-value-terms\r\n                    :value=\"kmValueTermsModel\" :locale=\"kmLocalesModel\"                                          \r\n                    >\r\n                </km-value-terms>\r\n                <br/>\r\n            </template>\r\n            <template #right>\r\n                {{`<km-value-terms :value=\"kmValueTermsModel\" :locale=\"kmLocalesModel\"></km-value-terms>`}}\r\n            </template>\r\n        </preview-component>        \r\n\r\n        <preview-component card-header=\"Add File\">\r\n            <template #left>\r\n                <km-add-file v-model=\"kmAddFileModel1\" :multiple=\"false\"/>                                \r\n                <br/>Parent links :   {{ kmAddFileModel1 }}   <br/> \r\n            </template>\r\n            <template #right>\r\n                {{`<km-add-file v-model=\"kmAddFileModel1\" :multiple=\"false\"/>`}}\r\n            </template>\r\n        </preview-component>\r\n\r\n\r\n        <preview-component card-header=\"Add File\">\r\n            <template #left>\r\n                <km-add-file v-model=\"kmAddFileModel2\" >                                                                  \r\n                    <template #link-button-label>\r\n                        Add File\r\n                    </template>\r\n                    <template #link-dialog-title>\r\n                        My custom title\r\n                    </template>                                  \r\n                    <template #links-view>     \r\n                        <p></p>                                  \r\n                    </template> \r\n                </km-add-file> \r\n                Parent links :   {{ kmAddFileModel2 }}   <br/> \r\n            </template>\r\n            <template #right>                \r\n                {{` <km-add-file v-model=\"kmAddFileModel2\" >                                                                  \r\n                    <template #link-button-label>\r\n                        Add File\r\n                    </template>\r\n                    <template #link-dialog-title>\r\n                        My custom title\r\n                    </template>                                  \r\n                    <template #links-view>     \r\n                        <p></p>                                  \r\n                    </template> \r\n                </km-add-file>`}}\r\n            </template>\r\n        </preview-component>\r\n\r\n\r\n         <preview-component card-header=\"multi-selector\">\r\n            <template #left>\r\n                <multi-selector\r\n                    v-model=\"selectedItem\"       \r\n                    :options=\"options\"\r\n                    :label=\"label\"\r\n                    :value-key=\"valueKey\"\r\n                    :custom-label=\"customLabel\"\r\n                    :placeholder = \"placeholder\"\r\n                    :track-by = \"trackBy\"\r\n                    :multiple=\"multiple\"\r\n                    :disabled = \"disabled\"\r\n                    :open-direction=\"openDirection\" \r\n                    :searchable=\"searchable\"   \r\n                    @on-search-change=\"onSearchChange\">                                   \r\n                </multi-selector>  \r\n                <br/>selected: {{ selectedItem}} <br/>   \r\n            </template>\r\n            <template #right>\r\n\r\n                {{`<multi-selector\r\n                    v-model=\"selectedItem\"       \r\n                    :options=\"options\"\r\n                    :label=\"label\"\r\n                    :value-key=\"valueKey\"\r\n                    :custom-label=\"customLabel\"\r\n                    :placeholder = \"placeholder\"\r\n                    :track-by = \"trackBy\"\r\n                    :multiple=\"multiple\"\r\n                    :disabled = \"disabled\"\r\n                    :open-direction=\"openDirection\" \r\n                    :searchable=\"searchable\"   \r\n                    @on-search-change=\"onSearchChange\">                                   \r\n                </multi-selector> `}}\r\n\r\n            </template>\r\n        </preview-component> \r\n\r\n        <preview-component card-header=\"Km Form Wizard Tab Content\">\r\n            <template #left>\r\n                <km-form-wizard @on-tab-change=\"onChangeCurrentTab\">\r\n                    <!-- Tab 1 -->\r\n                    <km-form-wizard-tab-content :isActive=\"activeTab === 0\" title=\"Tab 1\">\r\n                        <form  class=\"mx-auto\" style=\"width: 18rem;\">\r\n                            <div class=\"form-group\">\r\n                                <label for=\"exampleInputEmail1\">Email address</label>\r\n                                <input type=\"email\" class=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\">\r\n                            </div>\r\n                            <div class=\"form-group\">\r\n                                <label for=\"exampleInputPassword1\">Password</label>\r\n                                <input type=\"password\" class=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\">\r\n                            </div>\r\n                            <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\r\n                        </form>\r\n                    </km-form-wizard-tab-content>\r\n                    \r\n                    <!-- End of Tab 1 -->\r\n                    <!-- Tab 2 -->\r\n                    <km-form-wizard-tab-content  :isActive=\"activeTab === 1\" title=\"Tab 2\">\r\n                        <div class=\"card mx-auto my-2\" style=\"width: 18rem;\">\r\n                            <div class=\"card-body\">\r\n                                <h5 class=\"card-title\">Card title</h5>\r\n                                <h6 class=\"card-subtitle mb-2 text-muted\">Card subtitle</h6>\r\n                                <p class=\"card-text\">Some quick example text to build on the card title and make up the bulk of the card's content.</p>\r\n                                <a href=\"#\" class=\"card-link\">Card link</a>\r\n                                <a href=\"#\" class=\"card-link\">Another link</a>\r\n                            </div>\r\n                        </div>\r\n                    </km-form-wizard-tab-content>\r\n                    \r\n                    <!-- End of Tab 2 -->\r\n                </km-form-wizard>\r\n            </template>\r\n            <template #right>\r\n                {{`\r\n                    <km-form-wizard-tab-content :isActive=\"activeTab === 0\" title=\"Tab 1\"></km-form-wizard-tab-content>\r\n                `}}\r\n            </template>\r\n        </preview-component>\r\n\r\n\r\n         <preview-component card-header=\"Spinner\">\r\n            <template #left>\r\n                <spinner variant=\"spinner-grow spinner-grow-sm\">New loading</spinner>\r\n            </template>\r\n            <template #right>\r\n                <code>\r\n                    {{ `<spinner></spinner>` }}\r\n                </code>\r\n            </template>\r\n        </preview-component> \r\n\r\n         <preview-component card-header=\"spinner modal\">\r\n            <template #left>\r\n                <spinner-modal :visible=\"true\" title=\"Title\" message=\"Please wait\"></spinner-modal>\r\n            </template>\r\n            <template #right>\r\n                <code>\r\n                    {{ `<spinner-modal :visible=\"true\" title=\"Title\" message=\"Please wait\"></spinner-modal>` }}\r\n                </code>\r\n            </template>\r\n        </preview-component> \r\n\r\n\r\n         <preview-component card-header=\"km input rich lstring\">\r\n            <template #left>\r\n                <km-input-rich-lstring :locales=\"locales\"  v-model=\"richLstringModel\" ></km-input-rich-lstring>\r\n                data: {{ richLstringModel }}\r\n            </template>          \r\n            <template #right>\r\n                <code>\r\n                    {{ ` <km-input-rich-lstring :locales=\"locales\" v-model=\"richLstringModel\"></km-input-rich-lstring>` }}\r\n                </code>\r\n            </template>\r\n        </preview-component> -\r\n\r\n        <!-- <preview-component card-header=\"Link editor\">\r\n            <template #left></template>\r\n            <template #right>\r\n                <code></code>\r\n            </template>\r\n        </preview-component> -->\r\n\r\n    </div>\r\n</template>\r\n<script setup>\r\n    import { onBeforeMount, ref, shallowRef, defineProps, inject, provide, reactive, onMounted} from 'vue'\r\n    import KmInputLstring from \"./km-input-lstring.vue\";\r\n    import kmViewLinks from './link/km-view-links.vue';\r\n    import kmAddLink from './link/km-add-link.vue';\r\n    import linkEditor from './link/link-editor.vue';\r\n    import KmFormGroup from \"./km-form-group.vue\"\r\n    import kmLstringValue from \"./view/km-lstring-value.vue\"\r\n    import kmValueBool from \"./view/km-value-bool.vue\"\r\n    import kmValue from \"./view/km-value.vue\"\r\n    import kmLocales from \"./view/km-locales.vue\"\r\n    import kmTerm from \"./view/km-term.vue\"\r\n    import fileUploadEditor from './link/file-upload-editor.vue';\r\n    import kmValueTerm from \"./view/km-value-term.vue\";\r\n    import kmValueTerms from \"./view/km-value-terms.vue\";\r\n    import previewComponent from \"./preview-component.vue\";\r\n    import multiSelector from './multi-selector.vue'\r\n    import kmAddFile from './link/km-add-file.vue';\r\n    import kmFormWizard from \"./km/km-form-wizard.vue\";\r\n    import kmFormWizardTabContent from \"./km/km-form-wizard-tab-content.vue\";\r\n    import spinner from \"./spinner.vue\";\r\n    import spinnerModal from './spinner-modal.vue';\r\n    import kmInputRichLstring from \"./km/km-input-rich-lstring.vue\";\r\n\r\n    const kmValueTermsModel = [\r\n            {\r\n                identifier:\"lang-ar\"\r\n            },\r\n            {\r\n                identifier:\"lang-zh\"\r\n            },\r\n            {\r\n                identifier:\"lang-ru\"\r\n            },\r\n        ]\r\n\r\n    const kmTermModel = {\r\n            identifier:\"lang-zh\"\r\n        }\r\n    const kmLocalesModel = ref('zh');\r\n   \r\n    const kmInputLStringModel = ref({});\r\n    const locales = ref([\"en\", \"fr\", 'zh', 'ru']);\r\n    const kmInitializeTerm = ref(null);\r\n    const activeTab = ref(0)\r\n\r\n    const onTermLoad = function(term){\r\n        kmInitializeTerm.value = term\r\n        // thesaurusStore.loadTerm(`lang-${term}`);\r\n    }\r\n\r\n    const linkEditorRef = shallowRef();\r\n    const fileUploadEditorRef = shallowRef();\r\n    const kmAddLinkModel1 = ref([ { \"url\": \"http://cbd.int\", \"name\": \"CBD website\", \"language\": \"en\" } ]);\r\n    const kmAddLinkModel2 = ref([ ]);\r\n    const kmAddFileModel1 = ref([ { \"url\": \"http://api.cbd.int/api/2013\", \"name\": \"report.pdf\", \"language\": \"en\" ,tag:\"Biodiversity\"} ]);\r\n    const kmAddFileModel2 = ref([ { \"url\": \"http://api.cbd.int/api/2013\", \"name\": \"report.pdf\", \"language\": \"en\" ,tag:\"Biodiversity\"} ]);\r\n    const links = ref([\r\n        { \"url\": \"http://cbd.int\", \"name\": \"CBD website\", \"language\": \"en\" ,tag:\"Biodiversity\"},\r\n        { \"url\": \"http://cbd.int\", \"name\": \"CBD website\", \"language\": \"en\" ,tag:\"Biodiversity\"},\r\n        { \"url\": \"http://cbd.int\", \"name\": \"CBD website\", \"language\": \"en\" ,tag:\"Biodiversity\"}]);\r\n  \r\n     const validationReview = {\r\n        \"identifier\": \"4DE6D968-FBB4-135A-3D23-DA52FB705939\",\r\n        \"schema\": \"authority\",\r\n        \"locales\": [\r\n            \"en\"\r\n        ],\r\n        \"title\": {},\r\n        \"summary\": {},\r\n        \"errors\": [\r\n            {\r\n            \"code\": \"Error.Mandatory\",\r\n            \"property\": \"government\"\r\n            },\r\n            {\r\n            \"code\": \"Error.Mandatory\",\r\n            \"property\": \"name\"\r\n            },\r\n            {\r\n            \"code\": \"Error.Mandatory\",\r\n            \"property\": \"city\"\r\n            },\r\n            {\r\n            \"code\": \"Error.Mandatory\",\r\n            \"property\": \"country\"\r\n            },\r\n            {\r\n            \"code\": \"Error.Mandatory\",\r\n            \"property\": \"phones\"\r\n            },\r\n            {\r\n            \"code\": \"Error.Mandatory\",\r\n            \"property\": \"emails\"\r\n            },\r\n            {\r\n            \"code\": \"Error.Mandatory\",\r\n            \"property\": \"responsibleForAll\"\r\n            }\r\n        ]\r\n    };\r\n\r\n    const removeLocale = (index) => {\r\n        locales.value.splice(index, 1);\r\n    }\r\n    \r\n    const isValid = (name)=>{\r\n        console.log(name)\r\n        return !!validationReview?.errors?.find(e=>e.property == name)\r\n    }\r\n\r\n    // link Editor   \r\n    const newLink = ref({url: 'https://cbd.int', name: 'CDB website', language: 'es'}) \r\n\r\n    const showLinkEditor = ()=>{\r\n        linkEditorRef.value.show(newLink.value)\r\n    }  \r\n    function onLinkEditorClose(newValue) {    \r\n        newLink.value = newValue;     \r\n    }\r\n\r\n    // file upload editor\r\n    const newFile = ref({url: 'https://api/cbd.int/api/2013', name: 'report.pdf', language: 'en', tag : \"Biodiversity\"}) \r\n    const showFileUploadEditor=() =>{\r\n        fileUploadEditorRef.value.show(newFile.value)\r\n    }\r\n\r\n    function onFileUploadEditorClose(newValue) {    \r\n        newFile.value = newValue;    \r\n    }\r\n\r\n    const onChangeCurrentTab = (index) => {\r\n        activeTab.value = index;\r\n    }\r\n\r\n   \r\n    onMounted(()=>{\r\n        \r\n    })\r\n    onBeforeMount(()=>{\r\n        provide(\"validationReview\", {\r\n            isValid\r\n        });\r\n    })\r\n    // for select-file-button\r\n    let files = ref([]);\r\n    const receiveFile = (receiveFiles) => {\r\n        if (receiveFiles instanceof Array) {\r\n            files.value = receiveFiles;   \r\n        }\r\n        else{\r\n        if (receiveFiles instanceof Object){         \r\n            files.value=[receiveFiles];   \r\n        }   }      \r\n\r\n    };\r\n\r\n   \r\n    // for multi-selector            \r\n    const label = \"language\";\r\n    const placeholder = \"please select one\";\r\n    const trackBy = \"name\";\r\n    const valueKey = \"name\";\r\n    const multiple= true;\r\n    const openDirection = \"\"; \r\n    const searchable=\"true\";    \r\n    const disabled=false;   \r\n    const customLabel =(item)=>{\r\n        return item.name + '-' + item.language;\r\n    }     \r\n    const selectedItem= ref(\"\");\r\n    const options= [\r\n        { name: 'Vue.js', language: 'JavaScript' },\r\n        { name: 'Rails', language: 'Ruby' },\r\n        { name: 'Sinatra', language: 'Ruby' },\r\n        { name: 'Laravel', language: 'PHP', $isDisabled: true },\r\n        { name: 'Phoenix', language: 'Elixir' }\r\n    ];\r\n\r\n    // km-input-rich-lstring\r\n    const richLstringModel = ref({});\r\n   \r\n</script>\r\n\r\n<style  lang=\"scss\" scoped ></style>"],"names":["model","_useModel","__props","props","loadLanguages","_props$locales","locales","forEach","e","getTerm","term","title","watch","newVal","oldVal","deleted","without","Object","keys","value","length","undefined","deep","onMounted","languages","emit","__emit","links","computed","remove","index","edit","modalOpen","ref","link","isUrlValid","isValidHttpUrl","url","isLangValid","_link$value","language","trim","includes","checkValidation","show","linkToEdit","name","close","save","newLink","string","newUrl","URL","protocol","__expose","linkEditorRef","shallowRef","editedLinkIndex","addLink","editLink","removeLink","splice","onLinkEditorClose","newValue","push","helpAnchor","slots","useSlots","settings","trigger","closeable","dismissible","padding","backdrop","style","delay","hide","$","webuiPopover","onBeforeUnmount","reviewError","inject","hasError","required","isValid","asArray","data","_","flatten","compact","lstring","lstring$1","ltext","locale","Number","isInteger","lstringLocale","sText","en","normalized","normalizeText","key","fr","es","ru","ar","zh","direction","text","localeDirection","normalizeText$1","entry","removeEmpty","obj","current","forOwn","isUndefined","isNull","isNaN","isString","isEmpty","isObject","isArray","pull","cloneDeep","useLogger","error","appError","userMessage","status","console","ACCOUNTS_HOST_URL","TAG","COMMIT","useRuntimeConfig","public","realmConfStore","useRealmConfStore","realmConf","errorLog","stack","JSON","stringify","getOwnPropertyNames","message","window","location","href","userAgent","navigator","ver","timestamp","Date","realm","useAPIFetch","method","body","err","$toast","useToast","position","type","valueLocale","valueLstring","t","str","appLocale","onLocaleSelected","setDefaultLocale","lang","_props$value","identifier","concat","isAddingNewFile","isUploadingError","newFile","isNew","file","tag","termValue","onTermLoad","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_8","_hoisted_9","_openBlock","_createElementBlock","_createElementVNode","createElementVNode","_toDisplayString","toDisplayString","_ctx","$attrs","_hoisted_7","_renderSlot","$slots","onEventTextChange","_len","arguments","args","Array","_key","_this","$emit","selectItems","get","selected","modelValue","map","_props$options","options","find","option","customSelectedItem","valueKey","isEqual","set","events","ids","event","multiple","selectFile","_props$accept","_props$accept2","fileInput","document","createElement","display","setAttribute","accept","join","addEventListener","$event","stopPropagation","_ref7","target","files","click","fileEditorRef","onFileUploadEditorClose","receiveFile","selectedFile","tabs","emits","selectTab","switchTab","tab","isActive","onBeforeMount","provide","addTab","useI18n","attrs","useAttrs","alignCenter","hasOwnProperty","sitePrefixUrl","test","_window","hostname","_window2","_window3","defaultOptions","prefixUrl","timeout","token","Vue","_Vue__namespace$proto","prototype","$auth","strategy","ApiBase","constructor","_this2","isFunction","tokenType","config","baseURL","http","loadAsyncHeaders","head","post","put","patch","delete","request","baseConfig","headers","Authorization","axios","create","tryCastToApiError","response","code","stringifyUrlParam","toISOString","stringifyUrlParams","valueObj","returnObj","entries","params","serviceUrls","documentQueryUrl","documentUrl","encodeURIComponent","documentInfoUrl","validateUrl","attachmentUrl","filename","temporaryAttachmentUrl","persistAttachmentUrl","guid","securityUrl","operation","documentVersionListUrl","documentVersionUrl","documentVersionInfoUrl","_realm","WeakMap","KmDocumentsApi","_classPrivateFieldInitSpec","self","_classPrivateFieldSet","query","q","s","l","sk","$filter","$orderby","$skip","$top","collection","Realm","_classPrivateFieldGet","then","res","catch","Error","getInfo","exists","_ref9","ContentType","validate","schema","metadata","canCreate","canUpdate","canDelete","_realm2","KmDocumentsVersionApi","_realm3","KmAttachmentsApi","uploadTempFile","fileName","onUploadProgress","onDownloadProgress","apiConfig","tempSlotBody","FormData","tempFile","formData","contentType","getMimeType","File","mimeTypeWhitelist","indexOf","mimeType","temporarySlot","persistedAttachment","uid","API_URL","upload","_this3","header","urls","Promise","reject","sMimeType","sExt","iIndex","lastIndexOf","substring","toLowerCase","draftUrl","draftSecurityUrl","draftLockUrl","lockID","draftLockListUrl","_realm4","KmDraftsApi","_data$Items","Items","workingDocumentBody","_realm5","KmLocksApi","KmStorageApi","documents","documentsVersion","drafts","locks","attachments","api","ckeditor","CKEditor","component","editor","ClassicEditor","uploadErrors","wordCount","isUploadingFile","binding","onEditorReady","ed","UploadAdapter","loader","success","uploaded","finally","abort","plugins","createUploadAdapter","uploadAdapter","on","onEditorImageUploaded","editing","view","eventInfo","dataTransfer","fileUploads","i","fileType","alert","append","viewFragment","processor","toView","modelFragment","toModel","insertContent","onFileUpload","all","oldValue","onEditorFocus","onEditorBlur","onEditorInput","onEditorDestroy","editorConfig","ui","content","onUpdate","stats","words","allPluginsConfig","toolbar","items","shouldNotGroupWhenFull","alignment","fontColor","colors","color","label","hasBorder","list","properties","styles","startIndex","reversed","image","resizeOptions","insert","integrations","heading","fontSize","supportAllValues","table","contentToolbar","addTargetToExternalLinks","defaultProtocol","decorators","mode","attributes","download","rel","mediaEmbed","previewsInData","removeProviders","extraProviders","html","match","id","input","activeLocale","makeSmallUid","onChange","onTabChange","selectedLocale","clean","_ref12","_props$locales2","thesaurusService","useThesaurus","loadDomainTerms","getDomainTerms","placeholder","trackBy","openDirection","searchable","disabled","kmValueTermsModel","kmTermModel","kmLocalesModel","kmInputLStringModel","kmInitializeTerm","activeTab","fileUploadEditorRef","kmAddLinkModel1","kmAddLinkModel2","kmAddFileModel1","kmAddFileModel2","validationReview","removeLocale","_validationReview$err","log","errors","property","showLinkEditor","showFileUploadEditor","onChangeCurrentTab","receiveFiles","customLabel","item","selectedItem","$isDisabled","richLstringModel"],"mappings":"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"}