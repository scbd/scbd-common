{"version":3,"file":"km-input-rich-lstring.umd.js","sources":["../../../../src/services/composables/i18n.js","../../../../src/services/util/helper.js","../../../../src/services/util/utils.js","../../../../src/services/api/api-base.js","../../../../src/services/api/km-storage/KmDocuments.js","../../../../src/services/api/km-storage/KmDrafts.js","../../../../src/services/api/km-storage/KmStorage.js","../../../../src/components/inputs/ck-editor/ck-editor.vue","../../../../src/services/filters/lstring.js","../../../../src/components/inputs/ck-editor/all-plugins-config.js","../../../../src/components/controls/km/km-input-rich-lstring.vue"],"sourcesContent":["export const  useI18n = ()=>{\r\n    return {\r\n        t       : (key)=>key,\r\n        locale  : 'en'\r\n    }\r\n}","import _ from 'lodash';\r\n\r\nexport const makeSmallUid = () => {\r\n    const key = (S4() + S4()).toUpperCase();\r\n    return 'uid-' + key;\r\n}\r\n\r\nexport function S4() {\r\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n}\r\n\r\nexport const removeEmpty = (obj)=> {\r\n    return function remove(current) {\r\n      _.forOwn(current, function (value, key) {\r\n        if (_.isUndefined(value) || _.isNull(value) || _.isNaN(value) ||\r\n          (_.isString(value) && _.isEmpty(value)) ||\r\n          (_.isObject(value) && _.isEmpty(remove(value)))) {\r\n  \r\n          delete current[key];\r\n        }\r\n      });\r\n\r\n      if (_.isArray(current)) _.pull(current, undefined);\r\n  \r\n      return current;\r\n  \r\n    }(_.cloneDeep(obj));\r\n}","export const useLogger = ()=>{\r\n    return {\r\n        error\r\n    }\r\n}\r\n\r\n\r\n\r\nfunction error(appError, userMessage){\r\n\r\n    if(![404, 401, 403].includes(appError?.status)){\r\n\r\n        try{\r\n            console.error(appError);\r\n            \r\n            const { ACCOUNTS_HOST_URL, TAG, COMMIT } = useRuntimeConfig().public;\r\n            const realmConfStore  = useRealmConfStore();\r\n            const realmConf = realmConfStore.realmConf; \r\n            //TODO: send error to server\r\n            const errorLog = {\r\n                stack : JSON.stringify(appError, Object.getOwnPropertyNames(appError)), \r\n                message: JSON.stringify(userMessage || appError?.message || 'unknown'),\r\n                url      : window.location.href,\r\n                userAgent: window.navigator.userAgent,\r\n                ver      : TAG||COMMIT,\r\n                timestamp: new Date(),\r\n                realm : realmConf.realm\r\n            }; \r\n\r\n            useAPIFetch('/error-logs', {method:'POST', body: errorLog});\r\n        }\r\n        catch(err){\r\n            console.error(err, 'error sending error log to server.')\r\n        }\r\n    }\r\n        \r\n    if(userMessage){\r\n        const $toast = useToast();\r\n        $toast.error(userMessage, {position:'top-right'}); \r\n    }\r\n}\r\n","import axios from 'axios'\r\nimport { isFunction } from 'lodash'\r\nimport * as Vue from 'vue'\r\n\r\nlet sitePrefixUrl = 'https://api.cbd.int';\r\n\r\nif(/\\.cbd\\.int$/i   .test(window?.location?.hostname || '')) sitePrefixUrl= 'https://api.cbd.int';\r\nif(/\\.cbddev\\.xyz$/i.test(window?.location?.hostname || '')) sitePrefixUrl= 'https://api.cbddev.xyz';\r\nif(/\\localhost$/i   .test(window?.location?.hostname || '')) sitePrefixUrl= '/';\r\n\r\nconst defaultOptions = { \r\n   prefixUrl:  sitePrefixUrl, \r\n   timeout  : 30 * 1000,\r\n   token: Vue?.prototype?.$auth?.strategy?.token?.get()  \r\n}\r\n\r\nexport default class ApiBase\r\n{\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    if(isFunction(options)) options = { token : options }\r\n\r\n    const { token, prefixUrl, timeout, tokenType } = { ...defaultOptions, ...options }\r\n\r\n    this.config = {\r\n      baseURL : prefixUrl,\r\n      timeout,\r\n      tokenType,\r\n      token,\r\n    }\r\n\r\n    const http = async function (...args) {   \r\n      return (await loadAsyncHeaders(this.config))(...args);\r\n    }\r\n\r\n    http.get     = async (...args)=> (await loadAsyncHeaders(this.config)).get    (...args);\r\n    http.head    = async (...args)=> (await loadAsyncHeaders(this.config)).head   (...args);\r\n    http.post    = async (...args)=> (await loadAsyncHeaders(this.config)).post   (...args);\r\n    http.put     = async (...args)=> (await loadAsyncHeaders(this.config)).put    (...args);\r\n    http.patch   = async (...args)=> (await loadAsyncHeaders(this.config)).patch  (...args);\r\n    http.delete  = async (...args)=> (await loadAsyncHeaders(this.config)).delete (...args);\r\n    http.options = async (...args)=> (await loadAsyncHeaders(this.config)).options(...args);\r\n    http.request = async (...args)=> (await loadAsyncHeaders(this.config)).request(...args);\r\n\r\n    this.http = http;\r\n  }\r\n}\r\n\r\nasync function loadAsyncHeaders(baseConfig) {\r\n\r\n  const { token, tokenType, ...config } = baseConfig || {}\r\n\r\n  const headers = { ...(config.headers || {}) };\r\n\r\n  if(token) {\r\n      headers.Authorization = `${tokenType||'Bearer'} ${token}`;\r\n  }\r\n\r\n  return axios.create({ ...config, headers } );\r\n\r\n}\r\n\r\n//////////////////////////\r\n// Helpers\r\n////////////////////////\r\n\r\nexport function tryCastToApiError(error) {\r\n\r\n  if(error && error.response && error.response.data && error.response.data.code) {\r\n      const apiError = error.response.data\r\n      throw error.response.data;\r\n  }\r\n\r\n  throw error\r\n}\r\n\r\nexport function stringifyUrlParam(value) {\r\n  if (value instanceof(Date))   {return value.toISOString()}    \r\n  if (value instanceof(Object)) {return JSON.stringify(value)}  \r\n  return value; \r\n}\r\n\r\nexport function stringifyUrlParams(valueObj) {\r\n  const returnObj = {};\r\n\r\n  for (const [key, value] of Object.entries(valueObj)) {\r\n    if (isValid(value)){\r\n      returnObj[key] = stringifyUrlParam(value);\r\n    }\r\n  }\r\n  \r\n  return returnObj;\r\n}\r\n\r\nexport function mapObjectId(id){  \r\n  return isObjectId(id)? { $oid: id } : id\r\n}\r\n\r\nexport function isObjectId(id){\r\n  return /^[a-f0-9]{24}/i.test(id);\r\n}\r\n\r\nexport function isValid(params){\r\n  return ![undefined, null].includes(params);\r\n}","import ApiBase, { tryCastToApiError, isValid, stringifyUrlParams } from '../api-base';\r\n\r\nconst  serviceUrls = { \r\n  documentQueryUrl      (                     ){ return \"/api/v2013/documents\" },\r\n  documentUrl           (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}` },\r\n  documentInfoUrl       (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/info` }, \r\n  validateUrl           (                     ){ return \"/api/v2013/documents/x/validate\" },\r\n  attachmentUrl         (identifier, filename ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/attachments/${encodeURIComponent(filename)}` },\r\n  temporaryAttachmentUrl(                     ){ return `/api/v2015/temporary-files` },\r\n  persistAttachmentUrl  (identifier, guid     ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/attachments/persist-temporary/${encodeURIComponent(guid)}` },\r\n  securityUrl           (identifier, operation){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/securities/${encodeURIComponent(operation)}` },\r\n  documentVersionListUrl(identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions` },\r\n  documentVersionUrl    (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/:revision` },\r\n  documentVersionInfoUrl(identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/:revision/info` } \r\n}\r\n\r\n\r\nexport class KmDocumentsApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {  \r\n    super(options );\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n\r\n  async query( {realm, q, s, l, sk }={}){\r\n    const params = stringifyUrlParams( { \r\n      $filter:q, \r\n      $orderby:s,\r\n      $skip:sk, \r\n      $top:l,\r\n      collection : \"my\"\r\n    });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n    \r\n    return this.http.get(serviceUrls.documentQueryUrl(), { headers, params } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async get(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n        \r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.documentUrl(identifier) ,{ headers } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n\r\n  async getInfo(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n        \r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.documentInfoUrl(identifier) ,{ headers } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async exists( identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.head(serviceUrls.documentUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async put( identifier, body, {realm}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(body)) throw Error(`invalid value for body`);  \r\n  \r\n    const Realm =  { Realm : realm || this.#realm || undefined };  \r\n    const ContentType = { 'Content-Type': 'application/json' };\r\n    const headers =  { ...Realm , ...ContentType}\r\n    \r\n    return this.http.put(serviceUrls.documentUrl(identifier), body , { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async delete(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.delete(serviceUrls.documentUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n   \r\n  async validate(body, {realm, schema, metadata }={}){\r\n    if(!isValid(body)) throw Error(`invalid value for body`);  \r\n\r\n    const params = stringifyUrlParams( { schema, metadata });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n   \r\n    return this.http.put(serviceUrls.validateUrl(), body, { headers, params } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async canCreate(identifier, {realm, schema, metadata}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(schema)) throw Error(`invalid value for schema`);  \r\n\r\n    const params = stringifyUrlParams({ schema, metadata });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.get(serviceUrls.securityUrl(identifier, 'create'), { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async canUpdate(identifier,  {realm, metadata }={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const params = stringifyUrlParams( {metadata });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.get(serviceUrls.securityUrl(identifier, 'update'), { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  } \r\n \r\n  async canDelete(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n    \r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n   \r\n    return this.http.get(serviceUrls.securityUrl(identifier, 'delete'), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n}\r\n\r\nexport class KmDocumentsVersionApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {    \r\n    super(options);\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n  \r\n\r\n  async query(identifier, {realm}={}){\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n    \r\n    return this.http.get(serviceUrls. documentVersionListUrl(identifier) , { headers, params } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async get(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n        \r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.get(serviceUrls.documentVersionUrl(identifier) ,{ headers } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n\r\n  async getInfo(identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n        \r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.get(serviceUrls.documentVersionInfoUrl(identifier) ,{ headers } )\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async exists( identifier, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };  \r\n\r\n    return this.http.head(serviceUrls.documentVersionUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n}\r\n\r\nexport class KmAttachmentsApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {    \r\n    super(options);\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n\r\n  async uploadTempFile(identifier, file, fileName, options)  {\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(file))       throw Error(`invalid value for file`);  \r\n    if(!isValid(fileName))   throw Error(`invalid value for fileName`);  \r\n    if(!isValid(options))    throw Error(`invalid value for options`);  \r\n    \r\n    \r\n    const { timeout, onUploadProgress, onDownloadProgress }= { ...(options||{}) };\r\n\r\n    const apiConfig = {\r\n      headers: {},\r\n      timeout: timeout || 60 * 60 * 1000,\r\n      onUploadProgress, \r\n      onDownloadProgress\r\n    };\r\n    \r\n    const tempSlotBody = {\r\n        filename    : fileName,\r\n    }\r\n\r\n    //find the content type and validate with whitelist\r\n    if(file instanceof FormData){\r\n        const tempFile = formData.get('file')\r\n        if(tempFile){\r\n            tempSlotBody.contentType = this.getMimeType(file);\r\n        }\r\n    }\r\n    else if(file instanceof File){\r\n        tempSlotBody.contentType = this.getMimeType(file)\r\n    }\r\n    else{\r\n        throw new Error('Unable to read file information.')\r\n    }\r\n    \r\n    if (this.mimeTypeWhitelist().indexOf(tempSlotBody.contentType) < 0) {\r\n        throw new Error(\"File type not supported: \" + mimeType + \"(\" + file.name + \")\");\r\n    }\r\n\r\n    //const key = S4();\r\n    // get a temporary slot from S3 to upload the file\r\n    const temporarySlot = this.http.put(serviceUrls.temporaryAttachmentUrl(),  tempSlotBody  )\r\n                                   .then(res => res.data)\r\n                                   .catch(tryCastToApiError);\r\n    \r\n    // upload the file to the temporary slot on S3    \r\n    apiConfig.headers['Content-Type' ] = temporarySlot.contentType;\r\n    //apiConfig.headers['Authorization'] = undefined;\r\n    const temporaryAttachment =  this.http.put(temporarySlot.url, file,  {  ...apiConfig} )\r\n                                         .then(res => res.data)\r\n                                         .catch(tryCastToApiError);\r\n\r\n    //persists the file using the KM persists attachments endpoint\r\n    const persistedAttachment =  this.http.post(serviceUrls.persistAttachmentUrl(identifier, temporarySlot.uid), fileName,  { params } )\r\n                                          .then(res => res.data)\r\n                                          .catch(tryCastToApiError);\r\n    \r\n    const config = useRuntimeConfig();\r\n    return {\r\n        ...persistedAttachment,\r\n        url     : config.public.API_URL+persistedAttachment.url        \r\n    };\r\n  }\r\n\r\n  async upload(identifier, file,  {contentType, headers  }={}) {\r\n        if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n        if(!isValid(file)) throw Error(`invalid value for file`);  \r\n\r\n        params = {contentType, identifier, filename } || {};\r\n        params.identifier = identifier;\r\n        params.filename = file.name;\r\n\r\n        var contentType = params.contentType || this.getMimeType(file);\r\n\r\n        // params.contentType = undefined;\r\n        params.headers = params.header || {};\r\n        params.headers[\"Content-Type\"] = contentType;\r\n\r\n        ////TEMP////////////////\r\n            //upload to temp url\r\n            const data = this.http.put(serviceUrls.attachmentUrl(identifier, file.name), body=file,  { params } )\r\n                                  .then(res => res.data)\r\n                                  .catch(tryCastToApiError);\r\n            \r\n            const config = useRuntimeConfig()\r\n            data.url = config.public.API_URL+data.url;\r\n            data.urls = {//required by ckeditor\r\n                \"default\": data.url \r\n            };\r\n            \r\n            return data;\r\n        ///////TEMP////////////////\r\n\r\n      //TODO : use s3\r\n      //1 request for temp file from s3\r\n      //upload file \r\n      //return s3 location\r\n      //persist temp file location in api\r\n  }\r\n  getMimeType(file) {\r\n    if(!isValid(file)) throw Error(`invalid value for file`);  \r\n\r\n    const filename = file.name\r\n    let  sMimeType = file.type || \"application/octet-stream\";     \r\n\r\n    if (filename && sMimeType == \"application/octet-stream\") {\r\n        var sExt = \"\";\r\n        var iIndex = filename.lastIndexOf(\".\");\r\n\r\n        if (iIndex >= 0)\r\n            sExt = filename.substring(iIndex).toLowerCase();\r\n\r\n        if (sExt == \".json\") sMimeType = \"application/json\";\r\n        if (sExt == \".geojson\") sMimeType = \"application/json\";\r\n        if (sExt == \".xml\") sMimeType = \"application/xml\";\r\n    }\r\n\r\n    return sMimeType;\r\n  }\r\n  \r\n}\r\n\r\nexport const mimeTypeWhitelist =\r\n   [\r\n    \"application/json\",\"application/ogg\",\"application/pdf\",\"application/xml\",\"application/zip\",\r\n    \"application/x-zip\",\"application/x-zip-compressed\",\"audio/mpeg\",\"audio/x-ms-wma\",\"audio/x-wav\",\r\n    \"image/gif\",\"image/jpeg\", \"image/png\",\"image/bmp\",\r\n    \"image/tiff\",\r\n    \"text/csv\",\"text/html\",\"text/plain\",\"text/xml\",\"video/mpeg\",\"video/mp4\",\"video/quicktime\",\r\n    \"video/x-ms-wmv\",\"video/x-msvideo\",\"video/x-flv\",\"application/vnd.oasis.opendocument.text\",\r\n    \"application/vnd.oasis.opendocument.spreadsheet\",\"application/vnd.oasis.opendocument.presentation\",\"application/vnd.oasis.opendocument.graphics\",\r\n    \"application/vnd.ms-excel\",\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\"application/vnd.ms-powerpoint\",\"application/msword\",\r\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\r\n  ]\r\n","import ApiBase, { tryCastToApiError, isValid, stringifyUrlParams } from '../api-base';\r\n\r\nconst  serviceUrls = { \r\n  documentQueryUrl      (                     ){ return \"/api/v2013/documents\" },\r\n  draftUrl              (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/draft` },\r\n  draftSecurityUrl      (identifier, operation){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/draft/securities/${encodeURIComponent(operation)}` },\r\n  draftLockUrl          (identifier, lockID   ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/draft/locks/${encodeURIComponent(lockID)}` },\r\n  draftLockListUrl      (identifier           ){ return `/api/v2013/documents/${encodeURIComponent(identifier)}/versions/draft/locks` },\r\n}\r\n\r\nexport class KmDraftsApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {    \r\n    super(options);\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n\r\n  async query({realm, q, s, l, sk }={}){  \r\n    const params = stringifyUrlParams( {    \r\n      $filter:q, \r\n      $orderby:s,\r\n      $top:l,\r\n      $skip:sk, \r\n      collection : \"mydraft\"  \r\n    });\r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    const data =  this.http.get(serviceUrls.documentQueryUrl(), { headers, params} )\r\n                           .then(res => res.data)\r\n                           .catch(tryCastToApiError);\r\n     \r\n    if(data?.Items?.length){\r\n      data.Items = data.Items.map(e=>{\r\n            if(e.workingDocumentBody){\r\n                e.body = e.workingDocumentBody;\r\n            }\r\n            return e;\r\n      });\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  async get(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    \r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    const data =  this.http.get(serviceUrls.draftUrl(identifier), { headers })\r\n                           .then(res => res.data)\r\n                           .catch(tryCastToApiError);\r\n    \r\n    if(data.workingDocumentBody){\r\n        data.body = data.workingDocumentBody;\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  async exists( identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n     return this.http.head(serviceUrls.draftUrl(identifier), { headers })\r\n                     .then(res => res.data)\r\n                     .catch(tryCastToApiError);\r\n  }\r\n\r\n  async put( identifier, body, {realm, schema}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(body)) throw Error(`invalid value for body`);  \r\n\r\n    const params = stringifyUrlParams( {schema}); \r\n\r\n    const Realm =  { Realm : realm || this.#realm || undefined };\r\n    const ContentType = { 'Content-Type': 'application/json' };\r\n    const headers =  { ...Realm , ...ContentType}\r\n\r\n    return this.http.put(serviceUrls.draftUrl(identifier),  body , { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async delete(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.delete(serviceUrls.draftUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n  \r\n  async canCreate(identifier, {realm, schema, metadata }={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const params = stringifyUrlParams( {schema, metadata }); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.draftSecurityUrl(identifier, 'create'), { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async canUpdate(identifier, {realm, metadata}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    const params = stringifyUrlParams( {metadata}); \r\n    return this.http.get(serviceUrls.draftSecurityUrl(identifier, 'update'), { headers, params })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async canDelete(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.draftSecurityUrl(identifier, 'delete'), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n}\r\n\r\n\r\nexport class KmLocksApi extends ApiBase\r\n{\r\n  #realm;\r\n  constructor(options) {    \r\n    super(options);\r\n    this.self = this;\r\n    this.#realm = options.realm;\r\n  }\r\n\r\n  async query(identifier, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n \r\n    return this.http.get(serviceUrls.draftLockListUrl(identifier), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async get(identifier, lockID, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(lockID)) throw Error(`invalid value for lockID`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.get(serviceUrls.draftLockUrl(identifier, lockID), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n\r\n  async exists(identifier,lockID, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(lockID)) throw Error(`invalid value for lockID`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.head(serviceUrls.draftLockUrl(identifier, lockID), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }  \r\n \r\n  async put(identifier,lockID, body, {realm}={}){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(lockID)) throw Error(`invalid value for lockID`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n    \r\n    return this.http.put(serviceUrls.draftLockUrl(identifier,lockID), body, { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n \r\n  async delete(identifier,lockID, {realm}={} ){\r\n    if(!isValid(identifier)) throw Error(`invalid value for identifier`);  \r\n    if(!isValid(lockID)) throw Error(`invalid value for lockID`); \r\n\r\n    const headers =  { Realm : realm || this.#realm || undefined };\r\n\r\n    return this.http.delete(serviceUrls.draftLockUrl(identifier,lockID), { headers })\r\n                    .then(res => res.data)\r\n                    .catch(tryCastToApiError);\r\n  }\r\n}\r\n","import ApiBase from '../api-base';\r\nimport { KmDocumentsApi, KmDocumentsVersionApi, KmAttachmentsApi } from './KmDocuments'\r\nimport { KmDraftsApi, KmLocksApi } from './KmDrafts' \r\n\r\nexport default class KmStorageApi extends ApiBase \r\n{\r\n  constructor(options) {\r\n    super(options);\r\n    \r\n    this.documents           = new KmDocumentsApi(options);\r\n    this.documentsVersion    = new KmDocumentsVersionApi(options);\r\n    this.drafts              = new KmDraftsApi(options);\r\n    this.locks               = new KmLocksApi(options);\r\n    this.attachments         = new KmAttachmentsApi(options);    \r\n  }\r\n}\r\n\r\n","<template>\r\n    <div>\r\n      <div style=\"border: 1px solid #eee\" v-if=\"editorConfig\" class=\"vld-parent\">\r\n          <!-- <overlay-loading :active=\"isUploadingFile\" \r\n          :can-cancel=\"false\" background-color=\"rgb(9 9 9)\"\r\n          :is-full-page=\"false\">\r\n          <km-spinner size=\"lg\" \r\n              :message=\"t('uploadingFile')\"></km-spinner>\r\n      </overlay-loading>\r\n   -->\r\n      <ckeditor \r\n          v-model=\"binding\"\r\n          :editor=\"editor\"\r\n          :config=\"editorConfig\"\r\n          :tagName=\"tagName\"\r\n          :disabled=\"$attrs.disabled\"      \r\n          @ready=\"onEditorReady\"\r\n          @focus=\"onEditorFocus\"\r\n          @blur=\"onEditorBlur\"\r\n          @input=\"onEditorInput\"\r\n          @destroy=\"onEditorDestroy\"\r\n        ></ckeditor>\r\n      </div>\r\n      <p style=\"border: 1px solid #eee; border-top: none\">\r\n        {{ t('attachmentMessage') }}\r\n        <span class=\"float-end\" id=\"wordCountSec\" style=\"padding-right: 5px\">\r\n          <strong>{{ t('wordCount') }}: {{ wordCount }}</strong></span>\r\n      </p>\r\n      <p style=\"border: 1px solid #eee; border-top: none\" v-if=\"uploadErrors.length\">         \r\n          <div class=\"alert alert-danger\" role=\"alert\">\r\n            {{ t('uploadError') }} \r\n            <ul><li v-for=\"error in uploadErrors\" :key=\"error\">{{ error.file }}</li></ul>\r\n          </div>\r\n        </p>\r\n    </div>\r\n  </template>\r\n\r\n  <script setup> \r\n    import  \"@ckeditor/ckeditor5-vue/dist/ckeditor.js\";\r\n    import CKEditor   from '@ckeditor/ckeditor5-vue';\r\n    import ClassicEditor from '@scbd/ckeditor5-build-inline-full/build/ckeditor.js';    \r\n    import '@scbd/ckeditor5-build-inline-full/build/ckeditor.css';  \r\n    import { useI18n} from '../../../services/composables/i18n.js'\r\n    import { computed, onMounted, ref , defineComponent} from 'vue';\r\n    import { useLogger } from '../../../services/util/index.js';\r\n    import KmStorageApi from '../../../services/api/km-storage/KmStorage.js';\r\n\r\n    //   import OverlayLoading from 'vue3-loading-overlay';\r\n    //   import 'vue3-loading-overlay/dist/vue3-loading-overlay.css';\r\n    //   import KmSpinner from '../KmSpinner.vue';\r\n    \r\n    const model    = defineModel({type:String, required:true, default:''});\r\n\r\n    const props = defineProps( {     \r\n        tagName  : { type: String, required: false,default: 'div'},     \r\n        uploadUrl: { type: String, required: false},\r\n        config   : { type: Object, required: true},\r\n        identifier: { type: String, required: true}  \r\n    });    \r\n\r\n \r\n    const emit     = defineEmits(['update:modelValue', 'onFileUpload', 'onEditorDestroy']);\r\n\r\n    const api          = new KmStorageApi({});\r\n    const ckeditor     = CKEditor.component;\r\n    const editor       = ClassicEditor;\r\n    const uploadErrors = [];\r\n\r\n    const {t, locale }    = useI18n();\r\n    const wordCount       = ref(0);\r\n    const isUploadingFile = ref(false);\r\n\r\n    const  binding  = computed({       \r\n        get()      {  return model.value;  },        \r\n        set(value) {  emit('update:modelValue', value);  }\r\n    })      \r\n  \r\n     \r\n    const onEditorReady=(ed)  =>{    \r\n        class UploadAdapter {\r\n          constructor(loader) {\r\n            this.loader = loader;\r\n          }\r\n          upload() {\r\n            const loader = this.loader;\r\n            return this.loader.file.then(function(file){\r\n              \r\n              isUploadingFile.value = true;  \r\n              return api.attachments.uploadTempFile(props.identifier, file, file.name)   \r\n                  .then(function(success) {                 \r\n                      success.urls = { \"default\": success.url }\r\n                      loader.uploaded = success;\r\n                      return success;\r\n                  })\r\n                  .catch(function(error) {                   \r\n                      uploadErrors.push({file:file.name })  \r\n                      useLogger().error(error);                     \r\n                      throw error;\r\n                  })\r\n                  .finally(()=>{\r\n                      isUploadingFile.value = false;  \r\n                  });\r\n            })\r\n          }\r\n          abort() {\r\n          }\r\n        }\r\n        ed.plugins.get('FileRepository').createUploadAdapter = function(loader){\r\n            const uploadAdapter = new UploadAdapter(loader);\r\n            uploadAdapter.loader.on('change:uploaded' , onEditorImageUploaded);\r\n            return uploadAdapter;\r\n        };\r\n  \r\n        ed.editing.view.document.on('paste', function (eventInfo, data) {\r\n          // console.debug('paste', eventInfo, data)\r\n        })\r\n  \r\n        ed.editing.view.document.on('drop', async function (eventInfo, data) {\r\n          if(data.dataTransfer){\r\n              isUploadingFile.value = true;   \r\n  \r\n              const fileUploads = data.dataTransfer.files.map(function(file, i){\r\n                  const formData = new FormData();\r\n                  const fileType = file.type.substring( 0, 5 );\r\n                  const mimeType = api.attachments.getMimeType(file);   \r\n  \r\n                  if(fileType == \"image\")\r\n                      return;\r\n                  if (api.attachments.mimeTypeWhitelist().indexOf(mimeType) < 0) {   \r\n                      alert(\"File type not supported: \" + mimeType + \"(\" + file.name + \")\");\r\n                      return;\r\n                  }\r\n  \r\n                  formData.append('file', file);\r\n                  return api.attachments.uploadTempFile(props.identifier, file, file.name)   \r\n                      .then(function(success) {\r\n                          const viewFragment = ed.data.processor.toView('<span class=\"me-2\">&nbsp;<a rel=\"noopener noreferrer\" target=\"_blank\" href=\"'+success.url+'\">'+success.filename+ '</a>&nbsp;</span>' );\r\n                          const modelFragment = ed.data.toModel(viewFragment);\r\n                          ed.model.insertContent( modelFragment);\r\n                          onFileUpload({file:success});   \r\n                      })\r\n                      .catch(e=>{\r\n                          uploadErrors.push({file:file.name })   \r\n                          useLogger().error(e)\r\n                      })\r\n              });\r\n  \r\n              try{\r\n                  await Promise.all(fileUploads)\r\n              }\r\n              catch(e){\r\n                  useLogger().error(e)\r\n                }\r\n              finally{\r\n                  isUploadingFile.value = false   \r\n                };\r\n            }\r\n        })\r\n  \r\n        ed.model.document.on('change:data', function (eventInfo, data) {\r\n          // console.debug('change', eventInfo, data)\r\n        })\r\n  \r\n        function onEditorImageUploaded(eventInfo, name, value, oldValue){\r\n          // console.log((eventInfo, name, value, oldValue))\r\n          //TODO: check why url is not in event args\r\n            if(value.url){\r\n                onFileUpload({file:value})    \r\n            }\r\n        }  \r\n        emit('onEditorReady', ed);      \r\n    }\r\n     \r\n    const onEditorFocus=( event, editor )=> {\r\n        // console.debug( 'Editor focused.', { event, editor } );\r\n        emit('onEditorFocus', event, editor);\r\n    }\r\n\r\n    const onEditorBlur=( event, editor ) =>{\r\n        // console.debug( 'Editor blurred.', { event, editor } );\r\n        emit('onEditorBlur', event, editor);\r\n    }\r\n\r\n    const onEditorInput=( data, event, editor )=> {       \r\n        emit('onEditorInput', event, editor);     \r\n    }\r\n    \r\n    const  onEditorDestroy=( editor )=> {\r\n        // console.debug( 'Editor destroyed.', { editor } );\r\n        emit('onEditorDestroy', editor);\r\n    }\r\n    \r\n    const onFileUpload=(params)=>{\r\n        emit('onFileUpload', params);\r\n    }\r\n\r\n    const editorConfig = computed(()=>{     \r\n          return {\r\n            ...props.config,  \r\n            language: { ui: locale, content: locale },\r\n            wordCount: {\r\n                onUpdate: function (stats) {\r\n                    wordCount.value = stats.words;\r\n                },\r\n            }\r\n        }          \r\n    })\r\n \r\n  \r\n  </script>\r\n\r\n  <style scope>  \r\n    .ck.ck-balloon-panel.ck-balloon-panel_visible {\r\n        /* stylelint-disable-line */\r\n        z-index: 10000 !important;\r\n    }\r\n  </style>\r\n","\r\nexport function lstring(ltext, locale) {\r\n  \r\n    if(Number.isInteger(ltext)) //is number to handle generic implementation of NR\r\n      return ltext;\r\n  \r\n    if (!ltext)\r\n      return \"\";\r\n    if (typeof(ltext) == 'string')\r\n      return ltext;\r\n    let sText=\"\";\r\n    if (!sText && locale)\r\n      sText = ltext[locale];\r\n    if (!sText)\r\n      sText = ltext.en;\r\n    if (!sText) {\r\n      var normalized = normalizeText(ltext)\r\n      if(normalized[locale])\r\n        return normalized[locale];\r\n\r\n      for (var key in ltext) {\r\n        sText = ltext[key];\r\n        if (sText)\r\n          break;\r\n      }\r\n    }\r\n    return sText || \"\";\r\n}\r\n\r\n\r\nfunction normalizeText(text) {\r\n  if(!text) return null;\r\n\r\n  var entry = { ar: text.ar, en: text.en, es: text.es, fr: text.fr, ru: text.ru, zh: text.zh };\r\n\r\n  if(!entry.en) entry.en = entry.fr;\r\n  if(!entry.en) entry.en = entry.es;\r\n  if(!entry.en) entry.en = entry.ru;\r\n  if(!entry.en) entry.en = entry.ar;\r\n  if(!entry.en) entry.en = entry.zh;\r\n\r\n  if(!entry.fr) entry.fr = entry.en;\r\n  if(!entry.es) entry.es = entry.en;\r\n  if(!entry.ru) entry.ru = entry.en;\r\n  if(!entry.ar) entry.ar = entry.en;\r\n  if(!entry.zh) entry.zh = entry.en;\r\n  return entry;\r\n}","export const allPluginsConfig= {  \r\n     toolbar: {\r\n            items: ['heading', 'fontSize', 'fontColor', '|', 'bold', 'italic', 'link', '|',\r\n            'indent', 'outdent', 'alignment', '|', 'bulletedList', 'numberedList', 'blockQuote', '|',\r\n            'highlight', 'insertTable', '|', 'imageInsert', 'mediaEmbed', '|', 'horizontalLine', '|',\r\n            'removeFormat', 'undo', 'redo', '|', 'pageBreak'],\r\n            shouldNotGroupWhenFull: true\r\n        },\r\n        alignment: { options: ['left', 'right', 'center', 'justify'] },\r\n        fontColor: {\r\n            colors: [\r\n            { color: 'hsl(0, 0%, 0%)', label: 'Black' },\r\n            { color: 'hsl(0, 0%, 30%)', label: 'Dim grey' },\r\n            { color: 'hsl(0, 0%, 60%)', label: 'Grey' },\r\n            { color: 'hsl(0, 0%, 90%)', label: 'Light grey' },\r\n            { color: 'hsl(0, 0%, 100%)', label: 'White', hasBorder: true }\r\n            ],\r\n        },\r\n        list: { properties: { styles: true, startIndex: true, reversed: true } },\r\n        image: {\r\n            styles: ['alignCenter', 'alignLeft', 'alignRight'],\r\n            resizeOptions: [\r\n                            { name: 'imageResize:original', label: 'Original', value: null },\r\n                            { name: 'imageResize:25', label: '25%', value: '25' },\r\n                            { name: 'imageResize:50', label: '50%', value: '50' },\r\n                            { name: 'imageResize:75', label: '75%', value: '75' },\r\n                            ],\r\n            toolbar: ['imageTextAlternative', 'toggleImageCaption', '|',\r\n                    'imageStyle:inline', 'imageStyle:wrapText', 'imageStyle:breakText',\r\n                    'imageStyle:side', '|', 'resizeImage'],\r\n            insert: { integrations: ['insertImageViaUrl'] },\r\n        },\r\n        heading: {\r\n            options: [{ model: 'paragraph', title: 'Paragraph', class: 'ck-heading_paragraph' },\r\n                      { model: 'heading1', view: 'h1', title: 'Heading 1', class: 'ck-heading_heading1' },\r\n                      { model: 'heading2', view: 'h2', title: 'Heading 2', class: 'ck-heading_heading2' },\r\n                      { model: 'heading3', view: 'h3', title: 'Heading 3', class: 'ck-heading_heading3' }],\r\n        },\r\n        fontSize: {\r\n            options: [8, 10, 12, 14, 'default', 18, 20, 22],\r\n            supportAllValues: true,\r\n        },\r\n        table: {\r\n            contentToolbar: ['tableColumn', 'tableRow', 'mergeTableCells', 'tableProperties', 'tableCellProperties', 'toggleTableCaption']\r\n        },\r\n        link: {\r\n            addTargetToExternalLinks: false,\r\n            defaultProtocol: 'https://',\r\n            decorators: [\r\n            { mode: 'manual', label: 'Downloadable', attributes: { download: 'download', }, },\r\n            { mode: 'manual', label: 'Open in a new tab', attributes: { target: '_blank', rel: 'noopener noreferrer', }, },\r\n            ],\r\n        },\r\n        mediaEmbed: {\r\n            previewsInData: false,\r\n            removeProviders: ['youtube'],\r\n            extraProviders: [\r\n            {\r\n                name: 'youtubePlaylist',\r\n                url: [/^youtube\\.com\\/embed\\/videoseries\\?list=([\\w-]+)/],\r\n                html: (match) => {\r\n                const id = match[1]\r\n    \r\n                return (\r\n                    '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' +\r\n                    `<iframe src=\"https://www.youtube.com/embed/videoseries?list=${id}\" ` +\r\n                    'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' +\r\n                    'frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen>' +\r\n                    '</iframe>' +\r\n                    '</div>'\r\n                )\r\n                },\r\n            },\r\n            {\r\n                name: 'youtube',\r\n                url: [\r\n                /^(?:m\\.)?youtube\\.com\\/watch\\?v=([\\w-]+)/,\r\n                /^(?:m\\.)?youtube\\.com\\/v\\/([\\w-]+)/,\r\n                /^youtube\\.com\\/embed\\/([\\w-]+)/,\r\n                /^youtu\\.be\\/([\\w-]+)/,\r\n                ],\r\n                html: (match) => {\r\n                const id = match[1]\r\n    \r\n                return (\r\n                    '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' +\r\n                    `<iframe src=\"https://www.youtube.com/embed/${id}\" ` +\r\n                    'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' +\r\n                    'frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen>' +\r\n                    '</iframe>' +\r\n                    '</div>'\r\n                )\r\n                },\r\n            },\r\n            {\r\n                name: 'customEmbed',\r\n                url: [\r\n                /cdn\\.knightlab\\.com\\/libs\\/timeline3\\/.*/,\r\n                /uploads\\.knightlab\\.com\\/storymapjs\\/.*/,\r\n                /cdn\\.knightlab\\.com\\/libs\\/juxtapose\\/.*/,\r\n                /uploads\\.knightlab\\.com\\/scenevr\\/.*/,\r\n                /cdn\\.knightlab\\.com\\/libs\\/storyline\\/.*/,\r\n                /theydrawit\\.mucollective\\.co\\/vis\\/.*/,\r\n                /youtube\\.com\\/embed\\/videoseries.*/,\r\n                ],\r\n                html: function (id) {\r\n                return (\r\n                    '<figure class=\"media\">' + '\t<oembed url=\"' + id.input + '\">' +\r\n                    '<a href=\"' + id.input + '\">' + id.input + '</a>' + '\t</oembed>' + '</figure>'\r\n                )\r\n                },\r\n            },\r\n            ],\r\n        }      \r\n}","<template>\r\n    <div class=\"scbd-common km-input-rich-lstring\">\r\n        <div :id=\"`km-rich-lstring-${uid}`\"> \r\n            <ul class=\"nav nav-tabs\">      \r\n               <li class=\"nav-item\"  v-for=\"locale in props.locales\" :key=\"locale\" :id=\"`lstringTab-${uid}`\">           \r\n                  <a class=\"nav-link \" aria-current=\"page\"  href=\"javascript:void(0);\" :class=\"{'active': selectedLocale === locale}\"  @click=\"onTabChange(locale)\">      \r\n                  {{lstring(getTerm(locale).title||locale)}}   \r\n                    \r\n                  </a>\r\n              </li>        \r\n            </ul>   \r\n          \r\n            <div class=\"mt-2\" :aria-labelledby=\"`tabContent-${locale}-${uid}`\" v-for=\"locale in locales\" :key=\"locale\"  :class=\"{'d-none': selectedLocale != locale}\" :id=\"`lstringTabContent-${uid}`\">       \r\n                  <ck-editor v-if=\"selectedLocale==locale\" v-model=\"binding[selectedLocale]\" :identifier=\"identifier\"\r\n                             :locale=\"selectedLocale\"  :config=\"allPluginsConfig\" @update:modelValue=\"onChange\" @on-file-upload=\"onFileUpload\"  >\r\n                  </ck-editor>     \r\n              </div> \r\n          </div>\r\n    </div> \r\n</template>  \r\n\r\n<script setup>\r\n    import { ref, watch, onMounted, computed} from 'vue';\r\n    import {without} from 'lodash';\r\n    import ckEditor from '../../inputs/ck-editor/ck-editor.vue';\r\n    import { useThesaurus }    from '@/services/composables/thesaurus';  \r\n    import { makeSmallUid }   from '@/services/util/index';\r\n    import {lstring } from '../../../services/filters/lstring';   \r\n    import { removeEmpty }  from '../../../services/util/index';\r\n    import { allPluginsConfig } from '../../inputs/ck-editor/all-plugins-config.js';\r\n  \r\n  \r\n    const model = defineModel({ type: Object, required: false, default:{}});\r\n  \r\n    const props = defineProps({\r\n        locales:    { type: Array,    required: true  }, \r\n        disabled:   { type: Boolean,  required: false },\r\n        identifier: { type: String,   required: true  }\r\n    });\r\n\r\n    const emit = defineEmits(['update:modelValue', 'onFileUpload', 'onLanguageFocus']);\r\n\r\n    const activeLocale = ref('');\r\n    const uid = makeSmallUid();  \r\n\r\n    watch(props.locales,  (newVal, oldVal) => {\r\n        const deleted = without(oldVal, ...newVal);\r\n        if(deleted?.length){      \r\n            deleted.forEach(e=>{\r\n                binding.value[e] = undefined;\r\n            })\r\n            onChange();\r\n        }\r\n        if(!newVal.includes(activeLocale.value)){        \r\n        onTabChange(newVal[0]);\r\n        }\r\n        loadLanguages();\r\n    })     \r\n\r\n    const  binding  = computed(()=>{\r\n        return model.value||{};\r\n    })\r\n     \r\n    const selectedLocale  = computed(()=>{           \r\n        return activeLocale.value;\r\n    })\r\n\r\n    const onChange=(value)=>{\r\n        const clean = removeEmpty({...binding.value}); \r\n        emit('update:modelValue', clean);\r\n    }\r\n\r\n    const onFileUpload=({file})=>{\r\n        emit('onFileUpload', {file, locale : activeLocale.value});\r\n    }\r\n\r\n    const loadLanguages=()=>{   \r\n        const thesaurusService  = useThesaurus();\r\n        props.locales?.forEach(e=>{\r\n            thesaurusService.loadDomainTerms (`lang-${e}`);\r\n        });   \r\n    }\r\n\r\n    const  getTerm=(term)=>{     \r\n        const thesaurusService  = useThesaurus();\r\n        return thesaurusService.getDomainTerms(`lang-${term}`)||{};\r\n    }\r\n\r\n    const  onTabChange=(locale)=>{\r\n        activeLocale.value = locale;\r\n        emit('onLanguageFocus', locale);\r\n   } \r\n\r\n    onMounted(() => {\r\n        activeLocale.value =props.locales[0];        \r\n        if(model.value){\r\n            binding.value = {...model.value||{}};\r\n        }\r\n        loadLanguages();\r\n    }) \r\n</script>\r\n  "],"names":["useI18n","t","key","locale","removeEmpty","obj","remove","current","_","forOwn","value","isUndefined","isNull","isNaN","isString","isEmpty","isObject","isArray","pull","undefined","cloneDeep","useLogger","error","appError","userMessage","includes","status","console","ACCOUNTS_HOST_URL","TAG","COMMIT","useRuntimeConfig","public","realmConfStore","useRealmConfStore","realmConf","errorLog","stack","JSON","stringify","Object","getOwnPropertyNames","message","url","window","location","href","userAgent","navigator","ver","timestamp","Date","realm","useAPIFetch","method","body","err","$toast","useToast","position","sitePrefixUrl","test","_window","hostname","_window2","_window3","defaultOptions","prefixUrl","timeout","token","Vue","_Vue__namespace$proto","prototype","$auth","strategy","get","ApiBase","constructor","options","_this","isFunction","tokenType","config","baseURL","http","loadAsyncHeaders","arguments","head","post","put","patch","delete","request","baseConfig","headers","Authorization","concat","axios","create","tryCastToApiError","response","data","code","stringifyUrlParam","toISOString","stringifyUrlParams","valueObj","returnObj","entries","isValid","params","serviceUrls","documentQueryUrl","documentUrl","identifier","encodeURIComponent","documentInfoUrl","validateUrl","attachmentUrl","filename","temporaryAttachmentUrl","persistAttachmentUrl","guid","securityUrl","operation","documentVersionListUrl","documentVersionUrl","documentVersionInfoUrl","_realm","WeakMap","KmDocumentsApi","_classPrivateFieldInitSpec","self","_classPrivateFieldSet","query","q","s","l","sk","length","$filter","$orderby","$skip","$top","collection","Realm","_classPrivateFieldGet","then","res","catch","Error","getInfo","exists","_ref","ContentType","validate","schema","metadata","canCreate","canUpdate","canDelete","_realm2","KmDocumentsVersionApi","_realm3","KmAttachmentsApi","uploadTempFile","file","fileName","onUploadProgress","onDownloadProgress","apiConfig","tempSlotBody","FormData","tempFile","formData","contentType","getMimeType","File","mimeTypeWhitelist","indexOf","mimeType","name","temporarySlot","persistedAttachment","uid","API_URL","upload","_this2","header","urls","e","Promise","reject","sMimeType","type","sExt","iIndex","lastIndexOf","substring","toLowerCase","draftUrl","draftSecurityUrl","draftLockUrl","lockID","draftLockListUrl","_realm4","KmDraftsApi","_data$Items","Items","map","workingDocumentBody","_realm5","KmLocksApi","KmStorageApi","documents","documentsVersion","drafts","locks","attachments","model","_useModel","__props","props","emit","__emit","api","ckeditor","CKEditor","component","editor","ClassicEditor","uploadErrors","wordCount","ref","isUploadingFile","binding","computed","set","onEditorReady","ed","UploadAdapter","loader","success","uploaded","push","finally","abort","plugins","createUploadAdapter","uploadAdapter","on","onEditorImageUploaded","editing","view","document","eventInfo","dataTransfer","fileUploads","files","i","fileType","alert","append","viewFragment","processor","toView","modelFragment","toModel","insertContent","onFileUpload","all","oldValue","onEditorFocus","event","onEditorBlur","onEditorInput","onEditorDestroy","editorConfig","language","ui","content","onUpdate","stats","words","lstring","ltext","Number","isInteger","sText","en","normalized","normalizeText","text","entry","ar","es","fr","ru","zh","allPluginsConfig","toolbar","items","shouldNotGroupWhenFull","alignment","fontColor","colors","color","label","hasBorder","list","properties","styles","startIndex","reversed","image","resizeOptions","insert","integrations","heading","title","class","fontSize","supportAllValues","table","contentToolbar","link","addTargetToExternalLinks","defaultProtocol","decorators","mode","attributes","download","target","rel","mediaEmbed","previewsInData","removeProviders","extraProviders","html","match","id","input","activeLocale","makeSmallUid","watch","locales","newVal","oldVal","deleted","without","forEach","onChange","onTabChange","loadLanguages","selectedLocale","clean","_ref4","_props$locales","thesaurusService","useThesaurus","loadDomainTerms","getTerm","term","getDomainTerms","onMounted"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,MAAOA,OAAO,GAAGA,CAAA,KAAI;IACxB,OAAO;MACHC,CAAC,EAAUC,GAAG,IAAGA,GAAG;MACpBC,MAAM,EAAI;IACb,CAAA;EACL,CAAA;ECMO,MAAMC,WAAW,GAAIC,GAAG,IAAI;IAC/B,OAAO,SAASC,MAAMA,CAACC,OAAO,EAAE;MAC9BC,UAAAA,CAAAA,SAAAA,CAAC,CAACC,MAAM,CAACF,OAAO,EAAE,UAAUG,KAAK,EAAER,GAAG,EAAE;QACtC,IAAIM,qBAAC,CAACG,WAAW,CAACD,KAAK,CAAC,IAAIF,UAAC,CAAA,SAAA,CAAA,CAACI,MAAM,CAACF,KAAK,CAAC,IAAIF,UAAAA,CAAAA,SAAAA,CAAC,CAACK,KAAK,CAACH,KAAK,CAAC,IAC1DF,UAAC,CAAA,SAAA,CAAA,CAACM,QAAQ,CAACJ,KAAK,CAAC,IAAIF,UAAAA,CAAAA,SAAAA,CAAC,CAACO,OAAO,CAACL,KAAK,CAAE,IACtCF,qBAAC,CAACQ,QAAQ,CAACN,KAAK,CAAC,IAAIF,UAAAA,CAAAA,SAAAA,CAAC,CAACO,OAAO,CAACT,MAAM,CAACI,KAAK,CAAC,CAAE,EAAE;UAEjD,OAAOH,OAAO,CAACL,GAAG,CAAC;QACpB;MACT,CAAO,CAAC;MAEF,IAAIM,UAAC,CAAA,SAAA,CAAA,CAACS,OAAO,CAACV,OAAO,CAAC,EAAEC,UAAC,CAAA,SAAA,CAAA,CAACU,IAAI,CAACX,OAAO,EAAEY,SAAS,CAAC;MAElD,OAAOZ,OAAO;IAEf,CAAA,CAACC,qBAAC,CAACY,SAAS,CAACf,GAAG,CAAC,CAAC;EACvB,CAAA;EC3BO,MAAMgB,SAAS,GAAGA,CAAA,KAAI;IACzB,OAAO;MACHC;IACH,CAAA;EACL,CAAC;EAID,SAASA,KAAKA,CAACC,QAAQ,EAAEC,WAAW,EAAC;IAEjC,IAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAACC,QAAQ,CAACF,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEG,MAAM,CAAC,EAAC;MAE3C,IAAG;QACCC,OAAO,CAACL,KAAK,CAACC,QAAQ,CAAC;QAEvB,MAAM;UAAEK,iBAAiB;UAAEC,GAAG;UAAEC;QAAM,CAAE,GAAGC,gBAAgB,CAAE,CAAA,CAACC,MAAM;QACpE,MAAMC,cAAc,GAAIC,iBAAiB,EAAE;QAC3C,MAAMC,SAAS,GAAGF,cAAc,CAACE,SAAS;QACtD;QACY,MAAMC,QAAQ,GAAG;UACbC,KAAK,EAAGC,IAAI,CAACC,SAAS,CAAChB,QAAQ,EAAEiB,MAAM,CAACC,mBAAmB,CAAClB,QAAQ,CAAC,CAAC;UACtEmB,OAAO,EAAEJ,IAAI,CAACC,SAAS,CAACf,WAAW,KAAID,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEmB,OAAO,KAAI,SAAS,CAAC;UACtEC,GAAG,EAAQC,MAAM,CAACC,QAAQ,CAACC,IAAI;UAC/BC,SAAS,EAAEH,MAAM,CAACI,SAAS,CAACD,SAAS;UACrCE,GAAG,EAAQpB,GAAG,IAAEC,MAAM;UACtBoB,SAAS,EAAE,IAAIC,IAAI,CAAE,CAAA;UACrBC,KAAK,EAAGjB,SAAS,CAACiB;QAClC,CAAa;QAEDC,WAAW,CAAC,aAAa,EAAE;UAACC,MAAM,EAAC,MAAM;UAAEC,IAAI,EAAEnB;QAAQ,CAAC,CAAC;MAC9D,CAAA,CACD,OAAMoB,GAAG,EAAC;QACN7B,OAAO,CAACL,KAAK,CAACkC,GAAG,EAAE,oCAAoC,CAAC;MAC3D;IACJ;IAED,IAAGhC,WAAW,EAAC;MACX,MAAMiC,MAAM,GAAGC,QAAQ,EAAE;MACzBD,MAAM,CAACnC,KAAK,CAACE,WAAW,EAAE;QAACmC,QAAQ,EAAC;MAAW,CAAC,CAAC;IACpD;EACL;ECpCA,IAAIC,aAAa,GAAG,qBAAqB;EAEzC,IAAG,cAAc,CAAIC,IAAI,CAAC,EAAAC,OAAA,GAAAlB,MAAM,cAAAkB,OAAA,gBAAAA,OAAA,GAANA,OAAA,CAAQjB,QAAQ,cAAAiB,OAAA,uBAAhBA,OAAA,CAAkBC,QAAQ,KAAI,EAAE,CAAC,EAAEH,aAAa,GAAE,qBAAqB;EACjG,IAAG,iBAAiB,CAACC,IAAI,CAAC,EAAAG,QAAA,GAAApB,MAAM,cAAAoB,QAAA,gBAAAA,QAAA,GAANA,QAAA,CAAQnB,QAAQ,cAAAmB,QAAA,uBAAhBA,QAAA,CAAkBD,QAAQ,KAAI,EAAE,CAAC,EAAEH,aAAa,GAAE,wBAAwB;EACpG,IAAG,cAAc,CAAIC,IAAI,CAAC,EAAAI,QAAA,GAAArB,MAAM,cAAAqB,QAAA,gBAAAA,QAAA,GAANA,QAAA,CAAQpB,QAAQ,cAAAoB,QAAA,uBAAhBA,QAAA,CAAkBF,QAAQ,KAAI,EAAE,CAAC,EAAEH,aAAa,GAAE,GAAG;EAE/E,MAAMM,cAAc,GAAG;IACpBC,SAAS,EAAGP,aAAa;IACzBQ,OAAO,EAAI,EAAE,GAAG,IAAI;IACpBC,KAAK,EAAEC,cAAG,aAAHA,cAAG,gBAAAC,qBAAA,GAAHD,cAAG,CAAEE,SAAS,cAAAD,qBAAA,gBAAAA,qBAAA,GAAdD,qBAAAA,CAAgBG,KAAK,cAAAF,qBAAA,gBAAAA,qBAAA,GAArBD,qBAAAA,CAAuBI,QAAQ,cAAAH,qBAAA,gBAAAA,qBAAA,GAA/BD,qBAAAA,CAAiCD,KAAK,cAAAE,qBAAA,uBAAtCD,qBAAAA,CAAwCK,GAAG,CAAE;EACvD,CAAC;EAEc,MAAMC,OAAO,CAC5B;IACEC,WAAWA,CAACC,OAAO,EAAE;MAAA,IAAAC,KAAA;MACnBD,OAAO,GAAGA,OAAO,IAAI,EAAE;MAEvB,IAAGE,CAAAA,CAAAA,UAAU,CAACF,OAAO,CAAC,EAAEA,OAAO,GAAG;QAAET,KAAK,EAAGS;MAAS,CAAA;MAErD,MAAM;QAAET,KAAK;QAAEF,SAAS;QAAEC,OAAO;QAAEa;MAAS,CAAE,GAAG;QAAE,GAAGf,cAAc;QAAE,GAAGY;MAAS,CAAA;MAElF,IAAI,CAACI,MAAM,GAAG;QACZC,OAAO,EAAGhB,SAAS;QACnBC,OAAO;QACPa,SAAS;QACTZ;MACD,CAAA;MAED,MAAMe,IAAI,GAAG,eAAAA,CAAA,EAAyB;QACpC,OAAO,CAAC,MAAMC,gBAAgB,CAAC,IAAI,CAACH,MAAM,CAAC,EAAE,GAAAI,SAAO,CAAC;MACtD,CAAA;MAEDF,IAAI,CAACT,GAAG,GAAO;QAAA,OAAkB,CAAC,MAAMU,gBAAgB,CAACN,KAAI,CAACG,MAAM,CAAC,EAAEP,GAAG,CAAK,GAAAW,SAAO,CAAC;MAAA;MACvFF,IAAI,CAACG,IAAI,GAAM;QAAA,OAAkB,CAAC,MAAMF,gBAAgB,CAACN,KAAI,CAACG,MAAM,CAAC,EAAEK,IAAI,CAAI,GAAAD,SAAO,CAAC;MAAA;MACvFF,IAAI,CAACI,IAAI,GAAM;QAAA,OAAkB,CAAC,MAAMH,gBAAgB,CAACN,KAAI,CAACG,MAAM,CAAC,EAAEM,IAAI,CAAI,GAAAF,SAAO,CAAC;MAAA;MACvFF,IAAI,CAACK,GAAG,GAAO;QAAA,OAAkB,CAAC,MAAMJ,gBAAgB,CAACN,KAAI,CAACG,MAAM,CAAC,EAAEO,GAAG,CAAK,GAAAH,SAAO,CAAC;MAAA;MACvFF,IAAI,CAACM,KAAK,GAAK;QAAA,OAAkB,CAAC,MAAML,gBAAgB,CAACN,KAAI,CAACG,MAAM,CAAC,EAAEQ,KAAK,CAAG,GAAAJ,SAAO,CAAC;MAAA;MACvFF,IAAI,CAACO,MAAM,GAAI;QAAA,OAAkB,CAAC,MAAMN,gBAAgB,CAACN,KAAI,CAACG,MAAM,CAAC,EAAES,MAAM,CAAE,GAAAL,SAAO,CAAC;MAAA;MACvFF,IAAI,CAACN,OAAO,GAAG;QAAA,OAAkB,CAAC,MAAMO,gBAAgB,CAACN,KAAI,CAACG,MAAM,CAAC,EAAEJ,OAAO,CAAC,GAAAQ,SAAO,CAAC;MAAA;MACvFF,IAAI,CAACQ,OAAO,GAAG;QAAA,OAAkB,CAAC,MAAMP,gBAAgB,CAACN,KAAI,CAACG,MAAM,CAAC,EAAEU,OAAO,CAAC,GAAAN,SAAO,CAAC;MAAA;MAEvF,IAAI,CAACF,IAAI,GAAGA,IAAI;IACjB;EACH;EAEA,eAAeC,gBAAgBA,CAACQ,UAAU,EAAE;IAE1C,MAAM;MAAExB,KAAK;MAAEY,SAAS;MAAE,GAAGC;IAAQ,CAAA,GAAGW,UAAU,IAAI,CAAE,CAAA;IAExD,MAAMC,OAAO,GAAG;MAAE,IAAIZ,MAAM,CAACY,OAAO,IAAI,CAAA,CAAE;IAAC,CAAE;IAE7C,IAAGzB,KAAK,EAAE;MACNyB,OAAO,CAACC,aAAa,MAAAC,MAAA,CAAMf,SAAS,IAAE,QAAQ,OAAAe,MAAA,CAAI3B,KAAK,CAAE;IAC5D;IAED,OAAO4B,cAAAA,CAAAA,SAAAA,CAAK,CAACC,MAAM,CAAC;MAAE,GAAGhB,MAAM;MAAEY;IAAS,CAAA,CAAE;EAE9C;;EAEA;EACA;EACA;;EAEO,SAASK,iBAAiBA,CAAC7E,KAAK,EAAE;IAEvC,IAAGA,KAAK,IAAIA,KAAK,CAAC8E,QAAQ,IAAI9E,KAAK,CAAC8E,QAAQ,CAACC,IAAI,IAAI/E,KAAK,CAAC8E,QAAQ,CAACC,IAAI,CAACC,IAAI,EAAE;MAC1DhF,KAAK,CAAC8E,QAAQ,CAACC,IAAI;MACpC,MAAM/E,KAAK,CAAC8E,QAAQ,CAACC,IAAI;IAC5B;IAED,MAAM/E,KAAK;EACb;EAEO,SAASiF,iBAAiBA,CAAC7F,KAAK,EAAE;IACvC,IAAIA,KAAK,YAAYyC,IAAK,EAAI;MAAC,OAAOzC,KAAK,CAAC8F,WAAW,CAAA,CAAE;IAAA;IACzD,IAAI9F,KAAK,YAAY8B,MAAO,EAAE;MAAC,OAAOF,IAAI,CAACC,SAAS,CAAC7B,KAAK,CAAC;IAAA;IAC3D,OAAOA,KAAK;EACd;EAEO,SAAS+F,kBAAkBA,CAACC,QAAQ,EAAE;IAC3C,MAAMC,SAAS,GAAG,CAAA,CAAE;IAEpB,KAAK,MAAM,CAACzG,GAAG,EAAEQ,KAAK,CAAC,IAAI8B,MAAM,CAACoE,OAAO,CAACF,QAAQ,CAAC,EAAE;MACnD,IAAIG,OAAO,CAACnG,KAAK,CAAC,EAAC;QACjBiG,SAAS,CAACzG,GAAG,CAAC,GAAGqG,iBAAiB,CAAC7F,KAAK,CAAC;MAC1C;IACF;IAED,OAAOiG,SAAS;EAClB;EAUO,SAASE,OAAOA,CAACC,MAAM,EAAC;IAC7B,OAAO,CAAC,CAAC3F,SAAS,EAAE,IAAI,CAAC,CAACM,QAAQ,CAACqF,MAAM,CAAC;EAC5C;ECvGA,MAAOC,aAAW,GAAG;IACnBC,gBAAgBA,CAAA,EAA6B;MAAE,OAAO,sBAAsB;IAAE,CAAA;IAC9EC,WAAWA,CAAYC,UAAU,EAAY;MAAE,+BAAAlB,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC;IAAI,CAAA;IAChHE,eAAeA,CAAQF,UAAU,EAAY;MAAE,+BAAAlB,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC;IAAS,CAAA;IACrHG,WAAWA,CAAA,EAAkC;MAAE,OAAO,iCAAiC;IAAE,CAAA;IACzFC,aAAaA,CAAUJ,UAAU,EAAEK,QAAQ,EAAE;MAAE,+BAAAvB,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC,mBAAAlB,MAAA,CAAgBmB,kBAAkB,CAACI,QAAQ,CAAC;IAAI,CAAA;IAC5JC,sBAAsBA,CAAA,EAAuB;MAAE;IAAqC,CAAA;IACpFC,oBAAoBA,CAAGP,UAAU,EAAEQ,IAAI,EAAM;MAAE,+BAAA1B,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC,qCAAAlB,MAAA,CAAkCmB,kBAAkB,CAACO,IAAI,CAAC;IAAI,CAAA;IAC1KC,WAAWA,CAAYT,UAAU,EAAEU,SAAS,EAAC;MAAE,+BAAA5B,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC,kBAAAlB,MAAA,CAAemB,kBAAkB,CAACS,SAAS,CAAC;IAAI,CAAA;IAC5JC,sBAAsBA,CAACX,UAAU,EAAY;MAAE,+BAAAlB,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC;IAAa,CAAA;IACzHY,kBAAkBA,CAAKZ,UAAU,EAAY;MAAE,+BAAAlB,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC;IAAuB,CAAA;IACnIa,sBAAsBA,CAACb,UAAU,EAAY;MAAE,+BAAAlB,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC;IAA4B;EAC1I,CAAC;EAAA,IAAAc,MAAA,oBAAAC,OAAA;EAGM,MAAMC,cAAc,SAAStD,OAAO,CAC3C;IAEEC,WAAWA,CAACC,OAAO,EAAE;MACnB,KAAK,CAACA,OAAO,CAAE;MAACqD,0BAAA,OAAAH,MAAA;MAChB,IAAI,CAACI,IAAI,GAAG,IAAI;MAChBC,qBAAA,CAAAL,MAAA,MAAI,EAAUlD,OAAO,CAAC1B,KAAK;IAC5B;IAED,MAAMkF,KAAKA,CAAA,EAA2B;MAAA,IAAzB;QAAClF,KAAK;QAAEmF,CAAC;QAAEC,CAAC;QAAEC,CAAC;QAAEC;MAAI,CAAA,GAAApD,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,EAAE;MACnC,MAAMwB,MAAM,GAAGL,kBAAkB,CAAE;QACjCmC,OAAO,EAACL,CAAC;QACTM,QAAQ,EAACL,CAAC;QACVM,KAAK,EAACJ,EAAE;QACRK,IAAI,EAACN,CAAC;QACNO,UAAU,EAAG;MACnB,CAAK,CAAC;MAEF,MAAMlD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,aAAW,CAACC,gBAAgB,EAAE,EAAE;QAAElB,OAAO;QAAEgB;OAAU,CAAA,CACzDqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMxB,GAAGA,CAACuC,UAAU,EAAc;MAAA,IAAZ;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAC9B,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,aAAW,CAACE,WAAW,CAACC,UAAU,CAAC,EAAE;QAAEpB;OAAW,CAAA,CACtDqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAGD,MAAMoD,OAAOA,CAACrC,UAAU,EAAc;MAAA,IAAZ;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAClC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,aAAW,CAACK,eAAe,CAACF,UAAU,CAAC,EAAE;QAAEpB;OAAW,CAAA,CAC1DqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMqD,MAAMA,CAAEtC,UAAU,EAAc;MAAA,IAAZ;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAClC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACG,IAAI,CAACwB,aAAW,CAACE,WAAW,CAACC,UAAU,CAAC,EAAE;QAAEpB;OAAS,CAAC,CACtDqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMV,GAAGA,CAAEyB,UAAU,EAAE3D,IAAI,EAAAkG,IAAA,EAAU;MAAA,IAAR;QAACrG;MAAK,CAAC,GAAAqG,IAAA;MAClC,IAAG,CAAC5C,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MACpE,IAAG,CAACzC,OAAO,CAACtD,IAAI,CAAC,EAAE,MAAM+F,KAAK,yBAAyB,CAAC;MAExD,MAAML,KAAK,GAAI;QAAEA,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAC5D,MAAMuI,WAAW,GAAG;QAAE,cAAc,EAAE;OAAoB;MAC1D,MAAM5D,OAAO,GAAI;QAAE,GAAGmD,KAAK;QAAG,GAAGS;MAAW,CAAC;MAE7C,OAAO,IAAI,CAACtE,IAAI,CAACK,GAAG,CAACsB,aAAW,CAACE,WAAW,CAACC,UAAU,CAAC,EAAE3D,IAAI,EAAG;QAAEuC;OAAS,CAAC,CAC5DqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMR,MAAMA,CAACuB,UAAU,EAAa;MAAA,IAAX;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MACjC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACO,MAAM,CAACoB,aAAW,CAACE,WAAW,CAACC,UAAU,CAAC,EAAE;QAAEpB;OAAS,CAAC,CACxDqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMwD,QAAQA,CAACpG,IAAI,EAAgC;MAAA,IAA9B;QAACH,KAAK;QAAEwG,MAAM;QAAEC;MAAU,CAAA,GAAAvE,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,EAAE;MAChD,IAAG,CAACuB,OAAO,CAACtD,IAAI,CAAC,EAAE,MAAM+F,KAAK,yBAAyB,CAAC;MAExD,MAAMxC,MAAM,GAAGL,kBAAkB,CAAE;QAAEmD,MAAM;QAAEC;MAAU,CAAA,CAAC;MAExD,MAAM/D,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACK,GAAG,CAACsB,aAAW,CAACM,WAAW,CAAE,CAAA,EAAE9D,IAAI,EAAE;QAAEuC,OAAO;QAAEgB;OAAU,CAAA,CAC1DqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAM2D,SAASA,CAAC5C,UAAU,EAA+B;MAAA,IAA7B;QAAC9D,KAAK;QAAEwG,MAAM;QAAEC;MAAQ,CAAC,GAAAvE,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,EAAE;MACtD,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MACpE,IAAG,CAACzC,OAAO,CAAC+C,MAAM,CAAC,EAAE,MAAMN,KAAK,2BAA2B,CAAC;MAE5D,MAAMxC,MAAM,GAAGL,kBAAkB,CAAC;QAAEmD,MAAM;QAAEC;MAAU,CAAA,CAAC;MAEvD,MAAM/D,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,aAAW,CAACY,WAAW,CAACT,UAAU,EAAE,QAAQ,CAAC,EAAE;QAAEpB,OAAO;QAAEgB;MAAM,CAAE,CAAC,CACvEqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAM4D,SAASA,CAAC7C,UAAU,EAAyB;MAAA,IAAtB;QAAC9D,KAAK;QAAEyG;MAAQ,CAAE,GAAAvE,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAChD,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxC,MAAM,GAAGL,kBAAkB,CAAE;QAACoD;MAAU,CAAA,CAAC;MAE/C,MAAM/D,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,aAAW,CAACY,WAAW,CAACT,UAAU,EAAE,QAAQ,CAAC,EAAE;QAAEpB,OAAO;QAAEgB;MAAM,CAAE,CAAC,CACvEqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAM6D,SAASA,CAAC9C,UAAU,EAAc;MAAA,IAAZ;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MACpC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAlB,MAAA,EAAI,IAAI,CAAO,IAAI7G;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,aAAW,CAACY,WAAW,CAACT,UAAU,EAAE,QAAQ,CAAC,EAAE;QAAEpB;OAAS,CAAC,CAC/DqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;EACH;EAAC,IAAA8D,OAAA,oBAAAhC,OAAA;EAEM,MAAMiC,qBAAqB,SAAStF,OAAO,CAClD;IAEEC,WAAWA,CAACC,OAAO,EAAE;MACnB,KAAK,CAACA,OAAO,CAAC;MAACqD,0BAAA,OAAA8B,OAAA;MACf,IAAI,CAAC7B,IAAI,GAAG,IAAI;MAChBC,qBAAA,CAAA4B,OAAA,MAAI,EAAUnF,OAAO,CAAC1B,KAAK;IAC5B;IAGD,MAAMkF,KAAKA,CAACpB,UAAU,EAAa;MAAA,IAAX;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAEhC,MAAMQ,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAe,OAAA,EAAI,IAAI,CAAO,IAAI9I;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,aAAW,CAAEc,sBAAsB,CAACX,UAAU,CAAC,EAAG;QAAEpB,OAAO;QAAEgB;OAAU,CAAA,CAC3EqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMxB,GAAGA,CAACuC,UAAU,EAAc;MAAA,IAAZ;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAC9B,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAe,OAAA,EAAI,IAAI,CAAO,IAAI9I;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,aAAW,CAACe,kBAAkB,CAACZ,UAAU,CAAC,EAAE;QAAEpB;OAAW,CAAA,CAC7DqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAGD,MAAMoD,OAAOA,CAACrC,UAAU,EAAc;MAAA,IAAZ;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAClC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAe,OAAA,EAAI,IAAI,CAAO,IAAI9I;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,aAAW,CAACgB,sBAAsB,CAACb,UAAU,CAAC,EAAE;QAAEpB;OAAW,CAAA,CACjEqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMqD,MAAMA,CAAEtC,UAAU,EAAc;MAAA,IAAZ;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAClC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAe,OAAA,EAAI,IAAI,CAAO,IAAI9I;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACG,IAAI,CAACwB,aAAW,CAACe,kBAAkB,CAACZ,UAAU,CAAC,EAAE;QAAEpB;OAAS,CAAC,CAC7DqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;EAEH;EAAC,IAAAgE,OAAA,oBAAAlC,OAAA;EAEM,MAAMmC,gBAAgB,SAASxF,OAAO,CAC7C;IAEEC,WAAWA,CAACC,OAAO,EAAE;MACnB,KAAK,CAACA,OAAO,CAAC;MAACqD,0BAAA,OAAAgC,OAAA;MACf,IAAI,CAAC/B,IAAI,GAAG,IAAI;MAChBC,qBAAA,CAAA8B,OAAA,MAAI,EAAUrF,OAAO,CAAC1B,KAAK;IAC5B;IAED,MAAMiH,cAAcA,CAACnD,UAAU,EAAEoD,IAAI,EAAEC,QAAQ,EAAEzF,OAAO,EAAG;MACzD,IAAG,CAAC+B,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MACpE,IAAG,CAACzC,OAAO,CAACyD,IAAI,CAAC,EAAQ,MAAMhB,KAAK,yBAAyB,CAAC;MAC9D,IAAG,CAACzC,OAAO,CAAC0D,QAAQ,CAAC,EAAI,MAAMjB,KAAK,6BAA6B,CAAC;MAClE,IAAG,CAACzC,OAAO,CAAC/B,OAAO,CAAC,EAAK,MAAMwE,KAAK,4BAA4B,CAAC;MAGjE,MAAM;QAAElF,OAAO;QAAEoG,gBAAgB;QAAEC;MAAkB,CAAE,GAAE;QAAE,IAAI3F,OAAO,IAAE,CAAE,CAAA;OAAG;MAE7E,MAAM4F,SAAS,GAAG;QAChB5E,OAAO,EAAE,CAAE,CAAA;QACX1B,OAAO,EAAEA,OAAO,IAAI,EAAE,GAAG,EAAE,GAAG,IAAI;QAClCoG,gBAAgB;QAChBC;MACN,CAAK;MAED,MAAME,YAAY,GAAG;QACjBpD,QAAQ,EAAMgD;MACjB,CAAA;;MAEL;MACI,IAAGD,IAAI,YAAYM,QAAQ,EAAC;QACxB,MAAMC,QAAQ,GAAGC,QAAQ,CAACnG,GAAG,CAAC,MAAM,CAAC;QACrC,IAAGkG,QAAQ,EAAC;UACRF,YAAY,CAACI,WAAW,GAAG,IAAI,CAACC,WAAW,CAACV,IAAI,CAAC;QACpD;MACJ,CAAA,MACI,IAAGA,IAAI,YAAYW,IAAI,EAAC;QACzBN,YAAY,CAACI,WAAW,GAAG,IAAI,CAACC,WAAW,CAACV,IAAI,CAAC;MACpD,CAAA,MACG;QACA,MAAM,IAAIhB,KAAK,CAAC,kCAAkC,CAAC;MACtD;MAED,IAAI,IAAI,CAAC4B,iBAAiB,EAAE,CAACC,OAAO,CAACR,YAAY,CAACI,WAAW,CAAC,GAAG,CAAC,EAAE;QAChE,MAAM,IAAIzB,KAAK,CAAC,2BAA2B,GAAG8B,QAAQ,GAAG,GAAG,GAAGd,IAAI,CAACe,IAAI,GAAG,GAAG,CAAC;MAClF;;MAEL;MACA;MACI,MAAMC,aAAa,GAAG,IAAI,CAAClG,IAAI,CAACK,GAAG,CAACsB,aAAW,CAACS,sBAAsB,CAAE,CAAA,EAAGmD,YAAe,CAAA,CAC1DxB,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;;MAE5D;MACIuE,SAAS,CAAC5E,OAAO,CAAC,cAAc,CAAE,GAAGwF,aAAa,CAACP,WAAW;MAClE;MACiC,IAAI,CAAC3F,IAAI,CAACK,GAAG,CAAC6F,aAAa,CAAC3I,GAAG,EAAE2H,IAAI,EAAG;QAAG,GAAGI;MAAS,CAAG,CAAA,CACjDvB,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAE;;MAEnE;MACI,MAAMoF,mBAAmB,GAAI,IAAI,CAACnG,IAAI,CAACI,IAAI,CAACuB,aAAW,CAACU,oBAAoB,CAACP,UAAU,EAAEoE,aAAa,CAACE,GAAG,CAAC,EAAEjB,QAAQ,EAAG;QAAEzD;MAAM,CAAI,CAAA,CAC7FqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;MAE/D,MAAMjB,MAAM,GAAGnD,gBAAgB,EAAE;MACjC,OAAO;QACH,GAAGwJ,mBAAmB;QACtB5I,GAAG,EAAOuC,MAAM,CAAClD,MAAM,CAACyJ,OAAO,GAACF,mBAAmB,CAAC5I;MAC5D,CAAK;IACF;IAEK+I,MAAMA,CAACxE,UAAU,EAAEoD,IAAI;MAAA;QAAA,IAAAqB,MAAA;QAAA,IAAG;UAACZ,WAAW;UAAEjF;QAAU,CAAA,GAAAR,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,EAAE;QAAA,uBAAAyF,WAAA,EAAE;UACvD,IAAG,CAAClE,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;UACpE,IAAG,CAACzC,OAAO,CAACyD,IAAI,CAAC,EAAE,MAAMhB,KAAK,yBAAyB,CAAC;UAExDxC,MAAM,GAAG;YAACiE,WAAW;YAAE7D,UAAU;YAAEK;UAAQ,CAAE,IAAI,CAAA,CAAE;UACnDT,MAAM,CAACI,UAAU,GAAGA,UAAU;UAC9BJ,MAAM,CAACS,QAAQ,GAAG+C,IAAI,CAACe,IAAI;UAE3B,IAAIN,WAAW,GAAGjE,MAAM,CAACiE,WAAW,IAAIY,MAAI,CAACX,WAAW,CAACV,IAAI,CAAC;;UAEtE;UACQxD,MAAM,CAAChB,OAAO,GAAGgB,MAAM,CAAC8E,MAAM,IAAI,CAAA,CAAE;UACpC9E,MAAM,CAAChB,OAAO,CAAC,cAAc,CAAC,GAAGiF,WAAW;;UAEpD;UACA;UACY,MAAM1E,IAAI,GAAGsF,MAAI,CAACvG,IAAI,CAACK,GAAG,CAACsB,aAAW,CAACO,aAAa,CAACJ,UAAU,EAAEoD,IAAI,CAACe,IAAI,CAAC,EAAE9H,IAAI,GAAC+G,IAAI,EAAG;YAAExD;UAAM,CAAI,CAAA,CAC9EqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;UAE/C,MAAMjB,MAAM,GAAGnD,gBAAgB,CAAE,CAAA;UACjCsE,IAAI,CAAC1D,GAAG,GAAGuC,MAAM,CAAClD,MAAM,CAACyJ,OAAO,GAACpF,IAAI,CAAC1D,GAAG;UACzC0D,IAAI,CAACwF,IAAI,GAAG;YAAA;YACR,SAAS,EAAExF,IAAI,CAAC1D;UAChC,CAAa;UAED,OAAO0D,IAAI;UACvB;;UAEA;UACA;UACA;UACA;UACA;QACG,CAAA,CAAA0E,WAAA;MAAA,SAAAe,CAAA;QAAA,OAAAC,OAAA,CAAAC,MAAA,CAAAF,CAAA;MAAA;IAAA;IACDd,WAAWA,CAACV,IAAI,EAAE;MAChB,IAAG,CAACzD,OAAO,CAACyD,IAAI,CAAC,EAAE,MAAMhB,KAAK,yBAAyB,CAAC;MAExD,MAAM/B,QAAQ,GAAG+C,IAAI,CAACe,IAAI;MAC1B,IAAKY,SAAS,GAAG3B,IAAI,CAAC4B,IAAI,IAAI,0BAA0B;MAExD,IAAI3E,QAAQ,IAAI0E,SAAS,IAAI,0BAA0B,EAAE;QACrD,IAAIE,IAAI,GAAG,EAAE;QACb,IAAIC,MAAM,GAAG7E,QAAQ,CAAC8E,WAAW,CAAC,GAAG,CAAC;QAEtC,IAAID,MAAM,IAAI,CAAC,EACXD,IAAI,GAAG5E,QAAQ,CAAC+E,SAAS,CAACF,MAAM,CAAC,CAACG,WAAW,CAAA,CAAE;QAEnD,IAAIJ,IAAI,IAAI,OAAO,EAAEF,SAAS,GAAG,kBAAkB;QACnD,IAAIE,IAAI,IAAI,UAAU,EAAEF,SAAS,GAAG,kBAAkB;QACtD,IAAIE,IAAI,IAAI,MAAM,EAAEF,SAAS,GAAG,iBAAiB;MACpD;MAED,OAAOA,SAAS;IACjB;EAEH;EClUA,MAAOlF,WAAW,GAAG;IACnBC,gBAAgBA,CAAA,EAA6B;MAAE,OAAO,sBAAsB;IAAE,CAAA;IAC9EwF,QAAQA,CAAetF,UAAU,EAAY;MAAE,+BAAAlB,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC;IAAmB,CAAA;IAC/HuF,gBAAgBA,CAAOvF,UAAU,EAAEU,SAAS,EAAC;MAAE,+BAAA5B,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC,iCAAAlB,MAAA,CAA8BmB,kBAAkB,CAACS,SAAS,CAAC;IAAI,CAAA;IAC3K8E,YAAYA,CAAWxF,UAAU,EAAEyF,MAAM,EAAI;MAAE,+BAAA3G,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC,4BAAAlB,MAAA,CAAyBmB,kBAAkB,CAACwF,MAAM,CAAC;IAAI,CAAA;IACnKC,gBAAgBA,CAAO1F,UAAU,EAAY;MAAE,+BAAAlB,MAAA,CAA+BmB,kBAAkB,CAACD,UAAU,CAAC;IAAyB;EACvI,CAAC;EAAA,IAAA2F,OAAA,oBAAA5E,OAAA;EAEM,MAAM6E,WAAW,SAASlI,OAAO,CACxC;IAEEC,WAAWA,CAACC,OAAO,EAAE;MACnB,KAAK,CAACA,OAAO,CAAC;MAACqD,0BAAA,OAAA0E,OAAA;MACf,IAAI,CAACzE,IAAI,GAAG,IAAI;MAChBC,qBAAA,CAAAwE,OAAA,MAAI,EAAU/H,OAAO,CAAC1B,KAAK;IAC5B;IAED,MAAMkF,KAAKA,CAAA,EAA0B;MAAA,IAAAyE,WAAA;MAAA,IAAzB;QAAC3J,KAAK;QAAEmF,CAAC;QAAEC,CAAC;QAAEC,CAAC;QAAEC;MAAI,CAAA,GAAApD,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,EAAE;MAClC,MAAMwB,MAAM,GAAGL,kBAAkB,CAAE;QACjCmC,OAAO,EAACL,CAAC;QACTM,QAAQ,EAACL,CAAC;QACVO,IAAI,EAACN,CAAC;QACNK,KAAK,EAACJ,EAAE;QACRM,UAAU,EAAG;MACnB,CAAK,CAAC;MAEF,MAAMlD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAA2D,OAAA,EAAI,IAAI,CAAO,IAAI1L;OAAW;MAE9D,MAAMkF,IAAI,GAAI,IAAI,CAACjB,IAAI,CAACT,GAAG,CAACoC,WAAW,CAACC,gBAAgB,EAAE,EAAE;QAAElB,OAAO;QAAEgB;MAAM,CAAG,CAAA,CACxDqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;MAEhD,IAAGE,IAAI,aAAJA,IAAI,gBAAA0G,WAAA,GAAJ1G,IAAI,CAAE2G,KAAK,cAAAD,WAAA,eAAXA,WAAA,CAAapE,MAAM,EAAC;QACrBtC,IAAI,CAAC2G,KAAK,GAAG3G,IAAI,CAAC2G,KAAK,CAACC,GAAG,CAACnB,CAAC,IAAE;UACzB,IAAGA,CAAC,CAACoB,mBAAmB,EAAC;YACrBpB,CAAC,CAACvI,IAAI,GAAGuI,CAAC,CAACoB,mBAAmB;UACjC;UACD,OAAOpB,CAAC;QACpB,CAAO,CAAC;MACH;MAED,OAAOzF,IAAI;IACZ;IAED,MAAM1B,GAAGA,CAACuC,UAAU,EAAa;MAAA,IAAX;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAC9B,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAA2D,OAAA,EAAI,IAAI,CAAO,IAAI1L;OAAW;MAE9D,MAAMkF,IAAI,GAAI,IAAI,CAACjB,IAAI,CAACT,GAAG,CAACoC,WAAW,CAACyF,QAAQ,CAACtF,UAAU,CAAC,EAAE;QAAEpB;OAAS,CAAC,CAClDqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;MAEhD,IAAGE,IAAI,CAAC6G,mBAAmB,EAAC;QACxB7G,IAAI,CAAC9C,IAAI,GAAG8C,IAAI,CAAC6G,mBAAmB;MACvC;MAED,OAAO7G,IAAI;IACZ;IAED,MAAMmD,MAAMA,CAAEtC,UAAU,EAAa;MAAA,IAAX;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAClC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAA2D,OAAA,EAAI,IAAI,CAAO,IAAI1L;OAAW;MAE7D,OAAO,IAAI,CAACiE,IAAI,CAACG,IAAI,CAACwB,WAAW,CAACyF,QAAQ,CAACtF,UAAU,CAAC,EAAE;QAAEpB;OAAS,CAAC,CACnDqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC3C;IAED,MAAMV,GAAGA,CAAEyB,UAAU,EAAE3D,IAAI,EAAqB;MAAA,IAAnB;QAACH,KAAK;QAAEwG;MAAM,CAAC,GAAAtE,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,EAAE;MAC7C,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MACpE,IAAG,CAACzC,OAAO,CAACtD,IAAI,CAAC,EAAE,MAAM+F,KAAK,yBAAyB,CAAC;MAExD,MAAMxC,MAAM,GAAGL,kBAAkB,CAAE;QAACmD;MAAM,CAAC,CAAC;MAE5C,MAAMX,KAAK,GAAI;QAAEA,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAA2D,OAAA,EAAI,IAAI,CAAO,IAAI1L;OAAW;MAC5D,MAAMuI,WAAW,GAAG;QAAE,cAAc,EAAE;OAAoB;MAC1D,MAAM5D,OAAO,GAAI;QAAE,GAAGmD,KAAK;QAAG,GAAGS;MAAW,CAAC;MAE7C,OAAO,IAAI,CAACtE,IAAI,CAACK,GAAG,CAACsB,WAAW,CAACyF,QAAQ,CAACtF,UAAU,CAAC,EAAG3D,IAAI,EAAG;QAAEuC,OAAO;QAAEgB;MAAM,CAAE,CAAC,CAClEqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMR,MAAMA,CAACuB,UAAU,EAAa;MAAA,IAAX;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MACjC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAA2D,OAAA,EAAI,IAAI,CAAO,IAAI1L;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACO,MAAM,CAACoB,WAAW,CAACyF,QAAQ,CAACtF,UAAU,CAAC,EAAE;QAAEpB;OAAS,CAAC,CACrDqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAM2D,SAASA,CAAC5C,UAAU,EAAgC;MAAA,IAA9B;QAAC9D,KAAK;QAAEwG,MAAM;QAAEC;MAAU,CAAA,GAAAvE,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,EAAE;MACvD,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxC,MAAM,GAAGL,kBAAkB,CAAE;QAACmD,MAAM;QAAEC;MAAU,CAAA,CAAC;MAEvD,MAAM/D,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAA2D,OAAA,EAAI,IAAI,CAAO,IAAI1L;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,WAAW,CAAC0F,gBAAgB,CAACvF,UAAU,EAAE,QAAQ,CAAC,EAAE;QAAEpB,OAAO;QAAEgB;MAAM,CAAE,CAAC,CAC5EqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAM4D,SAASA,CAAC7C,UAAU,EAAuB;MAAA,IAArB;QAAC9D,KAAK;QAAEyG;MAAQ,CAAC,GAAAvE,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAC9C,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAA2D,OAAA,EAAI,IAAI,CAAO,IAAI1L;OAAW;MAE9D,MAAM2F,MAAM,GAAGL,kBAAkB,CAAE;QAACoD;MAAQ,CAAC,CAAC;MAC9C,OAAO,IAAI,CAACzE,IAAI,CAACT,GAAG,CAACoC,WAAW,CAAC0F,gBAAgB,CAACvF,UAAU,EAAE,QAAQ,CAAC,EAAE;QAAEpB,OAAO;QAAEgB;MAAM,CAAE,CAAC,CAC5EqC,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAM6D,SAASA,CAAC9C,UAAU,EAAa;MAAA,IAAX;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MACpC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAA2D,OAAA,EAAI,IAAI,CAAO,IAAI1L;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,WAAW,CAAC0F,gBAAgB,CAACvF,UAAU,EAAE,QAAQ,CAAC,EAAE;QAAEpB;OAAS,CAAC,CACpEqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;EACH;EAAC,IAAAgH,OAAA,oBAAAlF,OAAA;EAGM,MAAMmF,UAAU,SAASxI,OAAO,CACvC;IAEEC,WAAWA,CAACC,OAAO,EAAE;MACnB,KAAK,CAACA,OAAO,CAAC;MAACqD,0BAAA,OAAAgF,OAAA;MACf,IAAI,CAAC/E,IAAI,GAAG,IAAI;MAChBC,qBAAA,CAAA8E,OAAA,MAAI,EAAUrI,OAAO,CAAC1B,KAAK;IAC5B;IAED,MAAMkF,KAAKA,CAACpB,UAAU,EAAa;MAAA,IAAX;QAAC9D;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MAChC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MAEpE,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAiE,OAAA,EAAI,IAAI,CAAO,IAAIhM;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,WAAW,CAAC6F,gBAAgB,CAAC1F,UAAU,CAAC,EAAE;QAAEpB;OAAS,CAAC,CAC1DqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMxB,GAAGA,CAACuC,UAAU,EAAEyF,MAAM,EAAc;MAAA,IAAZ;QAACvJ;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MACtC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MACpE,IAAG,CAACzC,OAAO,CAAC8F,MAAM,CAAC,EAAE,MAAMrD,KAAK,2BAA2B,CAAC;MAE5D,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAiE,OAAA,EAAI,IAAI,CAAO,IAAIhM;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACT,GAAG,CAACoC,WAAW,CAAC2F,YAAY,CAACxF,UAAU,EAAEyF,MAAM,CAAC,EAAE;QAAE7G;OAAS,CAAC,CAC9DqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMqD,MAAMA,CAACtC,UAAU,EAACyF,MAAM,EAAa;MAAA,IAAX;QAACvJ;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MACxC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MACpE,IAAG,CAACzC,OAAO,CAAC8F,MAAM,CAAC,EAAE,MAAMrD,KAAK,2BAA2B,CAAC;MAE5D,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAiE,OAAA,EAAI,IAAI,CAAO,IAAIhM;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACG,IAAI,CAACwB,WAAW,CAAC2F,YAAY,CAACxF,UAAU,EAAEyF,MAAM,CAAC,EAAE;QAAE7G;OAAS,CAAC,CAC/DqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMV,GAAGA,CAACyB,UAAU,EAACyF,MAAM,EAAEpJ,IAAI,EAAa;MAAA,IAAX;QAACH;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,EAAE;MAC3C,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MACpE,IAAG,CAACzC,OAAO,CAAC8F,MAAM,CAAC,EAAE,MAAMrD,KAAK,2BAA2B,CAAC;MAE5D,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAiE,OAAA,EAAI,IAAI,CAAO,IAAIhM;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACK,GAAG,CAACsB,WAAW,CAAC2F,YAAY,CAACxF,UAAU,EAACyF,MAAM,CAAC,EAAEpJ,IAAI,EAAE;QAAEuC;MAAO,CAAE,CAAC,CACnEqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;IAED,MAAMR,MAAMA,CAACuB,UAAU,EAACyF,MAAM,EAAc;MAAA,IAAZ;QAACvJ;MAAK,CAAC,GAAAkC,SAAA,CAAAqD,MAAA,QAAArD,SAAA,QAAAnE,SAAA,GAAAmE,SAAA,MAAC,CAAA,CAAE;MACxC,IAAG,CAACuB,OAAO,CAACK,UAAU,CAAC,EAAE,MAAMoC,KAAK,+BAA+B,CAAC;MACpE,IAAG,CAACzC,OAAO,CAAC8F,MAAM,CAAC,EAAE,MAAMrD,KAAK,2BAA2B,CAAC;MAE5D,MAAMxD,OAAO,GAAI;QAAEmD,KAAK,EAAG7F,KAAK,IAAA8F,qBAAA,CAAAiE,OAAA,EAAI,IAAI,CAAO,IAAIhM;OAAW;MAE9D,OAAO,IAAI,CAACiE,IAAI,CAACO,MAAM,CAACoB,WAAW,CAAC2F,YAAY,CAACxF,UAAU,EAACyF,MAAM,CAAC,EAAE;QAAE7G;OAAS,CAAC,CAChEqD,IAAI,CAACC,GAAG,IAAIA,GAAG,CAAC/C,IAAI,CAAC,CACrBgD,KAAK,CAAClD,iBAAiB,CAAC;IAC1C;EACH;EC9Le,MAAMkH,YAAY,SAASzI,OAAO,CACjD;IACEC,WAAWA,CAACC,OAAO,EAAE;MACnB,KAAK,CAACA,OAAO,CAAC;MAEd,IAAI,CAACwI,SAAS,GAAa,IAAIpF,cAAc,CAACpD,OAAO,CAAC;MACtD,IAAI,CAACyI,gBAAgB,GAAM,IAAIrD,qBAAqB,CAACpF,OAAO,CAAC;MAC7D,IAAI,CAAC0I,MAAM,GAAgB,IAAIV,WAAW,CAAChI,OAAO,CAAC;MACnD,IAAI,CAAC2I,KAAK,GAAiB,IAAIL,UAAU,CAACtI,OAAO,CAAC;MAClD,IAAI,CAAC4I,WAAW,GAAW,IAAItD,gBAAgB,CAACtF,OAAO,CAAC;IACzD;EACH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ECgCA;EACA;EACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAEI,MAAM6I,KAAK,GAAMC,GAAAA,CAAAA,QAAW,CAAAC,OAAA,EAAA,YAAyC,CAAC;MAEtE,MAAMC,KAAK,GAAGD,OAKZ;MAGF,MAAME,IAAI,GAAOC,MAAqE;MAEtF,MAAMC,GAAG,GAAY,IAAIZ,YAAY,CAAC,CAAA,CAAE,CAAC;MACzC,MAAMa,QAAQ,GAAOC,iBAAQ,CAAA,SAAA,CAAA,CAACC,SAAS;MACvC,MAAMC,MAAM,GAASC,sBAAAA,CAAAA,SAAAA,CAAa;MAClC,MAAMC,YAAY,GAAG,EAAE;MAEvB,MAAM;QAACtO,CAAC;QAAEE;MAAQ,CAAA,GAAMH,OAAO,CAAA,CAAE;MACjC,MAAMwO,SAAS,GAASC,OAAG,CAAC,CAAC,CAAC;MAC9B,MAAMC,eAAe,GAAGD,OAAG,CAAC,KAAK,CAAC;MAElC,MAAOE,OAAO,GAAIC,GAAAA,CAAAA,QAAQ,CAAC;QACvBjK,GAAGA,CAAA,EAAQ;UAAG,OAAOgJ,KAAK,CAACjN,KAAK;QAAI,CAAA;QACpCmO,GAAGA,CAACnO,KAAK,EAAE;UAAGqN,IAAI,CAAC,mBAAmB,EAAErN,KAAK,CAAC;QAAI;MAC1D,CAAK,CAAC;MAGF,MAAMoO,aAAa,GAAEC,EAAE,IAAK;QACxB,MAAMC,aAAa,CAAC;UAClBnK,WAAWA,CAACoK,MAAM,EAAE;YAClB,IAAI,CAACA,MAAM,GAAGA,MAAM;UACrB;UACDvD,MAAMA,CAAA,EAAG;YACP,MAAMuD,MAAM,GAAG,IAAI,CAACA,MAAM;YAC1B,OAAO,IAAI,CAACA,MAAM,CAAC3E,IAAI,CAACnB,IAAI,CAAC,UAASmB,IAAI,EAAC;cAEzCoE,eAAe,CAAChO,KAAK,GAAG,IAAI;cAC5B,OAAOuN,GAAG,CAACP,WAAW,CAACrD,cAAc,CAACyD,KAAK,CAAC5G,UAAU,EAAEoD,IAAI,EAAEA,IAAI,CAACe,IAAI,CAAC,CACnElC,IAAI,CAAC,UAAS+F,OAAO,EAAE;gBACpBA,OAAO,CAACrD,IAAI,GAAG;kBAAE,SAAS,EAAEqD,OAAO,CAACvM;gBAAK,CAAA;gBACzCsM,MAAM,CAACE,QAAQ,GAAGD,OAAO;gBACzB,OAAOA,OAAO;cACpC,CAAmB,CAAC,CACD7F,KAAK,CAAC,UAAS/H,KAAK,EAAE;gBACnBiN,YAAY,CAACa,IAAI,CAAC;kBAAC9E,IAAI,EAACA,IAAI,CAACe;gBAAI,CAAE,CAAC;gBACpChK,SAAS,CAAE,CAAA,CAACC,KAAK,CAACA,KAAK,CAAC;gBACxB,MAAMA,KAAK;cACjC,CAAmB,CAAC,CACD+N,OAAO,CAAC,MAAI;gBACTX,eAAe,CAAChO,KAAK,GAAG,KAAK;cACnD,CAAmB,CAAC;YACpB,CAAa,CAAC;UACH;UACD4O,KAAKA,CAAA,EAAG,CACP;QACF;QACDP,EAAE,CAACQ,OAAO,CAAC5K,GAAG,CAAC,gBAAgB,CAAC,CAAC6K,mBAAmB,GAAG,UAASP,MAAM,EAAC;UACnE,MAAMQ,aAAa,GAAG,IAAIT,aAAa,CAACC,MAAM,CAAC;UAC/CQ,aAAa,CAACR,MAAM,CAACS,EAAE,CAAC,iBAAiB,EAAGC,qBAAqB,CAAC;UAClE,OAAOF,aAAa;QAChC,CAAS;QAEDV,EAAE,CAACa,OAAO,CAACC,IAAI,CAACC,QAAQ,CAACJ,EAAE,CAAC,OAAO,EAAE,UAAUK,SAAS,EAAE1J,IAAI,EAAE;UACxE;QAAA,CACS,CAAC;QAEF0I,EAAE,CAACa,OAAO,CAACC,IAAI,CAACC,QAAQ,CAACJ,EAAE,CAAC,MAAM,EAAE,gBAAgBK,SAAS,EAAE1J,IAAI,EAAE;UACnE,IAAGA,IAAI,CAAC2J,YAAY,EAAC;YACjBtB,eAAe,CAAChO,KAAK,GAAG,IAAI;YAE5B,MAAMuP,WAAW,GAAG5J,IAAI,CAAC2J,YAAY,CAACE,KAAK,CAACjD,GAAG,CAAC,UAAS3C,IAAI,EAAE6F,CAAC,EAAC;cAC7D,MAAMrF,QAAQ,GAAG,IAAIF,QAAQ,EAAE;cAC/B,MAAMwF,QAAQ,GAAG9F,IAAI,CAAC4B,IAAI,CAACI,SAAS,CAAE,CAAC,EAAE,EAAG;cAC5C,MAAMlB,QAAQ,GAAG6C,GAAG,CAACP,WAAW,CAAC1C,WAAW,CAACV,IAAI,CAAC;cAElD,IAAG8F,QAAQ,IAAI,OAAO,EAClB;cACJ,IAAInC,GAAG,CAACP,WAAW,CAACxC,iBAAiB,CAAA,CAAE,CAACC,OAAO,CAACC,QAAQ,CAAC,GAAG,CAAC,EAAE;gBAC3DiF,KAAK,CAAC,2BAA2B,GAAGjF,QAAQ,GAAG,GAAG,GAAGd,IAAI,CAACe,IAAI,GAAG,GAAG,CAAC;gBACrE;cACH;cAEDP,QAAQ,CAACwF,MAAM,CAAC,MAAM,EAAEhG,IAAI,CAAC;cAC7B,OAAO2D,GAAG,CAACP,WAAW,CAACrD,cAAc,CAACyD,KAAK,CAAC5G,UAAU,EAAEoD,IAAI,EAAEA,IAAI,CAACe,IAAI,CAAC,CACnElC,IAAI,CAAC,UAAS+F,OAAO,EAAE;gBACpB,MAAMqB,YAAY,GAAGxB,EAAE,CAAC1I,IAAI,CAACmK,SAAS,CAACC,MAAM,CAAC,8EAA8E,GAACvB,OAAO,CAACvM,GAAG,GAAC,IAAI,GAACuM,OAAO,CAAC3H,QAAQ,GAAE,mBAAmB,CAAE;gBACrL,MAAMmJ,aAAa,GAAG3B,EAAE,CAAC1I,IAAI,CAACsK,OAAO,CAACJ,YAAY,CAAC;gBACnDxB,EAAE,CAACpB,KAAK,CAACiD,aAAa,CAAEF,aAAa,CAAC;gBACtCG,YAAY,CAAC;kBAACvG,IAAI,EAAC4E;gBAAO,CAAC,CAAC;cACtD,CAAuB,CAAC,CACD7F,KAAK,CAACyC,CAAC,IAAE;gBACNyC,YAAY,CAACa,IAAI,CAAC;kBAAC9E,IAAI,EAACA,IAAI,CAACe;gBAAI,CAAE,CAAC;gBACpChK,SAAS,CAAE,CAAA,CAACC,KAAK,CAACwK,CAAC,CAAC;cAC9C,CAAuB,CAAC;YACxB,CAAe,CAAC;YAEF,IAAG;cACC,MAAMC,OAAO,CAAC+E,GAAG,CAACb,WAAW,CAAC;YACjC,CAAA,CACD,OAAMnE,CAAC,EAAC;cACJzK,SAAS,CAAE,CAAA,CAACC,KAAK,CAACwK,CAAC,CAAC;YACrB,CAAA,SACI;cACH4C,eAAe,CAAChO,KAAK,GAAG,KAAK;YAC/C;UACa;QACb,CAAS,CAAC;QAEFqO,EAAE,CAACpB,KAAK,CAACmC,QAAQ,CAACJ,EAAE,CAAC,aAAa,EAAE,UAAUK,SAAS,EAAE1J,IAAI,EAAE;UACvE;QAAA,CACS,CAAC;QAEF,SAASsJ,qBAAqBA,CAACI,SAAS,EAAE1E,IAAI,EAAE3K,KAAK,EAAEqQ,QAAQ,EAAC;UACxE;UACA;UACY,IAAGrQ,KAAK,CAACiC,GAAG,EAAC;YACTkO,YAAY,CAAC;cAACvG,IAAI,EAAC5J;YAAK,CAAC,CAAC;UAC7B;QACJ;QACDqN,IAAI,CAAC,eAAe,EAAEgB,EAAE,CAAC;MAC5B,CAAA;MAED,MAAMiC,aAAa,GAACA,CAAEC,KAAK,EAAE5C,MAAM,KAAK;QAC5C;QACQN,IAAI,CAAC,eAAe,EAAEkD,KAAK,EAAE5C,MAAM,CAAC;MACvC,CAAA;MAED,MAAM6C,YAAY,GAACA,CAAED,KAAK,EAAE5C,MAAM,KAAK;QAC3C;QACQN,IAAI,CAAC,cAAc,EAAEkD,KAAK,EAAE5C,MAAM,CAAC;MACtC,CAAA;MAED,MAAM8C,aAAa,GAACA,CAAE9K,IAAI,EAAE4K,KAAK,EAAE5C,MAAM,KAAK;QAC1CN,IAAI,CAAC,eAAe,EAAEkD,KAAK,EAAE5C,MAAM,CAAC;MACvC,CAAA;MAED,MAAO+C,eAAe,GAAG/C,MAAM,IAAK;QACxC;QACQN,IAAI,CAAC,iBAAiB,EAAEM,MAAM,CAAC;MAClC,CAAA;MAED,MAAMwC,YAAY,GAAE/J,MAAM,IAAG;QACzBiH,IAAI,CAAC,cAAc,EAAEjH,MAAM,CAAC;MAC/B,CAAA;MAED,MAAMuK,YAAY,GAAGzC,GAAAA,CAAAA,QAAQ,CAAC,MAAI;QAC5B,OAAO;UACL,GAAGd,KAAK,CAAC5I,MAAM;UACfoM,QAAQ,EAAE;YAAEC,EAAE,EAAEpR,MAAM;YAAEqR,OAAO,EAAErR;UAAQ,CAAA;UACzCqO,SAAS,EAAE;YACPiD,QAAQ,EAAE,SAAAA,CAAUC,KAAK,EAAE;cACvBlD,SAAS,CAAC9N,KAAK,GAAGgR,KAAK,CAACC,KAAK;YAChC;UACJ;QACJ,CAAA;MACT,CAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;EC7MC,SAASC,OAAOA,CAACC,KAAK,EAAE1R,MAAM,EAAE;IAEnC,IAAG2R,MAAM,CAACC,SAAS,CAACF,KAAK,CAAC;MAAA;MACxB,OAAOA,KAAK;IAEd,IAAI,CAACA,KAAK,EACR,OAAO,EAAE;IACX,IAAI,OAAOA,KAAM,IAAI,QAAQ,EAC3B,OAAOA,KAAK;IACd,IAAIG,KAAK,GAAC,EAAE;IACZ,IAAI,CAACA,KAAK,IAAI7R,MAAM,EAClB6R,KAAK,GAAGH,KAAK,CAAC1R,MAAM,CAAC;IACvB,IAAI,CAAC6R,KAAK,EACRA,KAAK,GAAGH,KAAK,CAACI,EAAE;IAClB,IAAI,CAACD,KAAK,EAAE;MACV,IAAIE,UAAU,GAAGC,aAAa,CAACN,KAAK,CAAC;MACrC,IAAGK,UAAU,CAAC/R,MAAM,CAAC,EACnB,OAAO+R,UAAU,CAAC/R,MAAM,CAAC;MAE3B,KAAK,IAAID,GAAG,IAAI2R,KAAK,EAAE;QACrBG,KAAK,GAAGH,KAAK,CAAC3R,GAAG,CAAC;QAClB,IAAI8R,KAAK,EACP;MACH;IACF;IACD,OAAOA,KAAK,IAAI,EAAE;EACtB;EAGA,SAASG,aAAaA,CAACC,IAAI,EAAE;IAC3B,IAAG,CAACA,IAAI,EAAE,OAAO,IAAI;IAErB,IAAIC,KAAK,GAAG;MAAEC,EAAE,EAAEF,IAAI,CAACE,EAAE;MAAEL,EAAE,EAAEG,IAAI,CAACH,EAAE;MAAEM,EAAE,EAAEH,IAAI,CAACG,EAAE;MAAEC,EAAE,EAAEJ,IAAI,CAACI,EAAE;MAAEC,EAAE,EAAEL,IAAI,CAACK,EAAE;MAAEC,EAAE,EAAEN,IAAI,CAACM;KAAI;IAE5F,IAAG,CAACL,KAAK,CAACJ,EAAE,EAAEI,KAAK,CAACJ,EAAE,GAAGI,KAAK,CAACG,EAAE;IACjC,IAAG,CAACH,KAAK,CAACJ,EAAE,EAAEI,KAAK,CAACJ,EAAE,GAAGI,KAAK,CAACE,EAAE;IACjC,IAAG,CAACF,KAAK,CAACJ,EAAE,EAAEI,KAAK,CAACJ,EAAE,GAAGI,KAAK,CAACI,EAAE;IACjC,IAAG,CAACJ,KAAK,CAACJ,EAAE,EAAEI,KAAK,CAACJ,EAAE,GAAGI,KAAK,CAACC,EAAE;IACjC,IAAG,CAACD,KAAK,CAACJ,EAAE,EAAEI,KAAK,CAACJ,EAAE,GAAGI,KAAK,CAACK,EAAE;IAEjC,IAAG,CAACL,KAAK,CAACG,EAAE,EAAEH,KAAK,CAACG,EAAE,GAAGH,KAAK,CAACJ,EAAE;IACjC,IAAG,CAACI,KAAK,CAACE,EAAE,EAAEF,KAAK,CAACE,EAAE,GAAGF,KAAK,CAACJ,EAAE;IACjC,IAAG,CAACI,KAAK,CAACI,EAAE,EAAEJ,KAAK,CAACI,EAAE,GAAGJ,KAAK,CAACJ,EAAE;IACjC,IAAG,CAACI,KAAK,CAACC,EAAE,EAAED,KAAK,CAACC,EAAE,GAAGD,KAAK,CAACJ,EAAE;IACjC,IAAG,CAACI,KAAK,CAACK,EAAE,EAAEL,KAAK,CAACK,EAAE,GAAGL,KAAK,CAACJ,EAAE;IACjC,OAAOI,KAAK;EACd;EC/CO,MAAMM,gBAAgB,GAAE;IAC1BC,OAAO,EAAE;MACFC,KAAK,EAAE,CAAC,SAAS,EAAE,UAAU,EAAE,WAAW,EAAE,GAAG,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,EAC9E,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAE,GAAG,EAAE,cAAc,EAAE,cAAc,EAAE,YAAY,EAAE,GAAG,EACxF,WAAW,EAAE,aAAa,EAAE,GAAG,EAAE,aAAa,EAAE,YAAY,EAAE,GAAG,EAAE,gBAAgB,EAAE,GAAG,EACxF,cAAc,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,CAAC;MACjDC,sBAAsB,EAAE;IAC3B,CAAA;IACDC,SAAS,EAAE;MAAEjO,OAAO,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,SAAS;IAAG,CAAA;IAC9DkO,SAAS,EAAE;MACPC,MAAM,EAAE,CACR;QAAEC,KAAK,EAAE,gBAAgB;QAAEC,KAAK,EAAE;MAAS,CAAA,EAC3C;QAAED,KAAK,EAAE,iBAAiB;QAAEC,KAAK,EAAE;MAAY,CAAA,EAC/C;QAAED,KAAK,EAAE,iBAAiB;QAAEC,KAAK,EAAE;MAAQ,CAAA,EAC3C;QAAED,KAAK,EAAE,iBAAiB;QAAEC,KAAK,EAAE;MAAc,CAAA,EACjD;QAAED,KAAK,EAAE,kBAAkB;QAAEC,KAAK,EAAE,OAAO;QAAEC,SAAS,EAAE;MAAM,CAAA;IAEjE,CAAA;IACDC,IAAI,EAAE;MAAEC,UAAU,EAAE;QAAEC,MAAM,EAAE,IAAI;QAAEC,UAAU,EAAE,IAAI;QAAEC,QAAQ,EAAE;;IAAQ,CAAA;IACxEC,KAAK,EAAE;MACHH,MAAM,EAAE,CAAC,aAAa,EAAE,WAAW,EAAE,YAAY,CAAC;MAClDI,aAAa,EAAE,CACC;QAAEtI,IAAI,EAAE,sBAAsB;QAAE8H,KAAK,EAAE,UAAU;QAAEzS,KAAK,EAAE;MAAM,CAAA,EAChE;QAAE2K,IAAI,EAAE,gBAAgB;QAAE8H,KAAK,EAAE,KAAK;QAAEzS,KAAK,EAAE;MAAM,CAAA,EACrD;QAAE2K,IAAI,EAAE,gBAAgB;QAAE8H,KAAK,EAAE,KAAK;QAAEzS,KAAK,EAAE;MAAM,CAAA,EACrD;QAAE2K,IAAI,EAAE,gBAAgB;QAAE8H,KAAK,EAAE,KAAK;QAAEzS,KAAK,EAAE;MAAM,CAAA,CACpD;MACjBkS,OAAO,EAAE,CAAC,sBAAsB,EAAE,oBAAoB,EAAE,GAAG,EACnD,mBAAmB,EAAE,qBAAqB,EAAE,sBAAsB,EAClE,iBAAiB,EAAE,GAAG,EAAE,aAAa,CAAC;MAC9CgB,MAAM,EAAE;QAAEC,YAAY,EAAE,CAAC,mBAAmB;MAAG;IAClD,CAAA;IACDC,OAAO,EAAE;MACLhP,OAAO,EAAE,CAAC;QAAE6I,KAAK,EAAE,WAAW;QAAEoG,KAAK,EAAE,WAAW;QAAEC,KAAK,EAAE;MAAwB,CAAA,EACzE;QAAErG,KAAK,EAAE,UAAU;QAAEkC,IAAI,EAAE,IAAI;QAAEkE,KAAK,EAAE,WAAW;QAAEC,KAAK,EAAE;MAAuB,CAAA,EACnF;QAAErG,KAAK,EAAE,UAAU;QAAEkC,IAAI,EAAE,IAAI;QAAEkE,KAAK,EAAE,WAAW;QAAEC,KAAK,EAAE;MAAuB,CAAA,EACnF;QAAErG,KAAK,EAAE,UAAU;QAAEkC,IAAI,EAAE,IAAI;QAAEkE,KAAK,EAAE,WAAW;QAAEC,KAAK,EAAE;OAAuB;IAChG,CAAA;IACDC,QAAQ,EAAE;MACNnP,OAAO,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;MAC/CoP,gBAAgB,EAAE;IACrB,CAAA;IACDC,KAAK,EAAE;MACHC,cAAc,EAAE,CAAC,aAAa,EAAE,UAAU,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,qBAAqB,EAAE,oBAAoB;IAChI,CAAA;IACDC,IAAI,EAAE;MACFC,wBAAwB,EAAE,KAAK;MAC/BC,eAAe,EAAE,UAAU;MAC3BC,UAAU,EAAE,CACZ;QAAEC,IAAI,EAAE,QAAQ;QAAEtB,KAAK,EAAE,cAAc;QAAEuB,UAAU,EAAE;UAAEC,QAAQ,EAAE;;MAAgB,CAAA,EACjF;QAAEF,IAAI,EAAE,QAAQ;QAAEtB,KAAK,EAAE,mBAAmB;QAAEuB,UAAU,EAAE;UAAEE,MAAM,EAAE,QAAQ;UAAEC,GAAG,EAAE;;MAA2B,CAAA;IAEjH,CAAA;IACDC,UAAU,EAAE;MACRC,cAAc,EAAE,KAAK;MACrBC,eAAe,EAAE,CAAC,SAAS,CAAC;MAC5BC,cAAc,EAAE,CAChB;QACI5J,IAAI,EAAE,iBAAiB;QACvB1I,GAAG,EAAE,CAAC,kDAAkD,CAAC;QACzDuS,IAAI,EAAGC,KAAK,IAAK;UACjB,MAAMC,EAAE,GAAGD,KAAK,CAAC,CAAC,CAAC;UAEnB,OACI,8FAA8F,mEAAAnP,MAAA,CAC/BoP,EAAE,QAAI,GACrE,0EAA0E,GAC1E,oEAAoE,GACpE,WAAW,GACX,QAAQ;QAEX;MACJ,CAAA,EACD;QACI/J,IAAI,EAAE,SAAS;QACf1I,GAAG,EAAE,CACL,0CAA0C,EAC1C,oCAAoC,EACpC,gCAAgC,EAChC,sBAAsB,CACrB;QACDuS,IAAI,EAAGC,KAAK,IAAK;UACjB,MAAMC,EAAE,GAAGD,KAAK,CAAC,CAAC,CAAC;UAEnB,OACI,8FAA8F,kDAAAnP,MAAA,CAChDoP,EAAE,QAAI,GACpD,0EAA0E,GAC1E,oEAAoE,GACpE,WAAW,GACX,QAAQ;QAEX;MACJ,CAAA,EACD;QACI/J,IAAI,EAAE,aAAa;QACnB1I,GAAG,EAAE,CACL,0CAA0C,EAC1C,yCAAyC,EACzC,0CAA0C,EAC1C,sCAAsC,EACtC,0CAA0C,EAC1C,uCAAuC,EACvC,oCAAoC,CACnC;QACDuS,IAAI,EAAE,SAAAA,CAAUE,EAAE,EAAE;UACpB,OACI,wBAAwB,GAAG,gBAAgB,GAAGA,EAAE,CAACC,KAAK,GAAG,IAAI,GAC7D,WAAW,GAAGD,EAAE,CAACC,KAAK,GAAG,IAAI,GAAGD,EAAE,CAACC,KAAK,GAAG,MAAM,GAAG,YAAY,GAAG,WAAW;QAEjF;MACJ,CAAA;IAEJ;EACT,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MClFI,MAAM1H,KAAK,GAAGC,GAAAA,CAAAA,QAAW,CAAAC,OAAA,EAAA,YAA6C,CAAC;MAEvE,MAAMC,KAAK,GAAGD,OAIZ;MAEF,MAAME,IAAI,GAAGC,MAAqE;MAElF,MAAMsH,YAAY,GAAG7G,OAAG,CAAC,EAAE,CAAC;MAC5B,MAAMjD,GAAG,GAAG+J,KAAAA,CAAAA,YAAY,EAAE;MAE1BC,GAAAA,CAAAA,KAAK,CAAC1H,KAAK,CAAC2H,OAAO,EAAG,CAACC,MAAM,EAAEC,MAAM,KAAK;QACtC,MAAMC,OAAO,GAAGC,CAAO,CAAAA,OAAA,CAACF,MAAM,EAAE,GAAGD,MAAM,CAAC;QAC1C,IAAGE,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEjN,MAAM,EAAC;UACfiN,OAAO,CAACE,OAAO,CAAChK,CAAC,IAAE;YACf6C,OAAO,CAACjO,KAAK,CAACoL,CAAC,CAAC,GAAG3K,SAAS;UAC5C,CAAa,CAAC;UACF4U,QAAQ,EAAE;QACb;QACD,IAAG,CAACL,MAAM,CAACjU,QAAQ,CAAC6T,YAAY,CAAC5U,KAAK,CAAC,EAAC;UACxCsV,WAAW,CAACN,MAAM,CAAC,CAAC,CAAC,CAAC;QACrB;QACDO,aAAa,EAAE;MACvB,CAAK,CAAC;MAEF,MAAOtH,OAAO,GAAIC,GAAAA,CAAAA,QAAQ,CAAC,MAAI;QAC3B,OAAOjB,KAAK,CAACjN,KAAK,IAAE,EAAE;MAC9B,CAAK,CAAC;MAEF,MAAMwV,cAAc,GAAItH,GAAAA,CAAAA,QAAQ,CAAC,MAAI;QACjC,OAAO0G,YAAY,CAAC5U,KAAK;MACjC,CAAK,CAAC;MAEF,MAAMqV,QAAQ,GAAErV,KAAK,IAAG;QACpB,MAAMyV,KAAK,GAAG/V,WAAW,CAAC;UAAC,GAAGuO,OAAO,CAACjO;QAAK,CAAC,CAAC;QAC7CqN,IAAI,CAAC,mBAAmB,EAAEoI,KAAK,CAAC;MACnC,CAAA;MAED,MAAMtF,YAAY,GAACuF,KAAA,IAAU;QAAA,IAAT;UAAC9L;QAAI,CAAC,GAAA8L,KAAA;QACtBrI,IAAI,CAAC,cAAc,EAAE;UAACzD,IAAI;UAAEnK,MAAM,EAAGmV,YAAY,CAAC5U;QAAK,CAAC,CAAC;MAC5D,CAAA;MAED,MAAMuV,aAAa,GAACA,CAAA,KAAI;QAAA,IAAAI,cAAA;QACpB,MAAMC,gBAAgB,GAAIC,SAAAA,CAAAA,YAAY,EAAE;QACxC,CAAAF,cAAA,GAAAvI,KAAK,CAAC2H,OAAO,cAAAY,cAAA,eAAbA,cAAA,CAAeP,OAAO,CAAChK,CAAC,IAAE;UACtBwK,gBAAgB,CAACE,eAAe,SAAAxQ,MAAA,CAAU8F,CAAC,CAAE,CAAC;QAC1D,CAAS,CAAC;MACL,CAAA;MAED,MAAO2K,OAAO,GAAEC,IAAI,IAAG;QACnB,MAAMJ,gBAAgB,GAAIC,SAAAA,CAAAA,YAAY,EAAE;QACxC,OAAOD,gBAAgB,CAACK,cAAc,SAAA3Q,MAAA,CAAS0Q,IAAI,CAAE,CAAC,IAAE,EAAE;MAC7D,CAAA;MAED,MAAOV,WAAW,GAAE7V,MAAM,IAAG;QACzBmV,YAAY,CAAC5U,KAAK,GAAGP,MAAM;QAC3B4N,IAAI,CAAC,iBAAiB,EAAE5N,MAAM,CAAC;MACnC,CAAA;MAEAyW,GAAAA,CAAAA,SAAS,CAAC,MAAM;QACZtB,YAAY,CAAC5U,KAAK,GAAEoN,KAAK,CAAC2H,OAAO,CAAC,CAAC,CAAC;QACpC,IAAG9H,KAAK,CAACjN,KAAK,EAAC;UACXiO,OAAO,CAACjO,KAAK,GAAG;YAAC,IAAGiN,KAAK,CAACjN,KAAK,IAAE,CAAE,CAAA;UAAA,CAAC;QACvC;QACDuV,aAAa,EAAE;MACvB,CAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}