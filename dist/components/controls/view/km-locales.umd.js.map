{"version":3,"file":"km-locales.umd.js","sources":["../../../../src/services/util/lstring.js","../../../../src/components/controls/view/km-locales.vue"],"sourcesContent":["export function lstring(ltext, locale) {\r\n  if (Number.isInteger(ltext))\r\n    //is number to handle generic implementation of NR\r\n    return ltext;\r\n\r\n  if (!ltext) return \"\";\r\n\r\n  if (typeof ltext === \"string\") return ltext;\r\n\r\n  locale = locale || lstringLocale(ltext, locale);\r\n  let sText = \"\";\r\n  if (!sText && locale) sText = ltext[locale];\r\n  if (!sText) sText = ltext.en;\r\n  if (!sText) {\r\n    var normalized = normalizeText(ltext);\r\n    if (normalized[locale]) return normalized[locale];\r\n\r\n    for (var key in ltext) {\r\n      sText = ltext[key];\r\n      if (sText) break;\r\n    }\r\n  }\r\n  return sText || \"\";\r\n}\r\n\r\nexport const lstringLocale = (ltext, locale) => {\r\n  // TODO: use thesaraus API\r\n\r\n  // TODO: use thesaraus API, there was an OR case to get value from thesaraus API\r\n  if (!ltext) return locale;\r\n\r\n  if (typeof ltext == \"string\") return locale;\r\n\r\n  if (ltext[locale]) return locale;\r\n\r\n  // TODO: use thesaraus API, there was a conditional check to get value from 'defaultLocale.value'\r\n\r\n  if (ltext.en) return \"en\";\r\n\r\n  if (ltext.fr) return \"fr\";\r\n  if (ltext.es) return \"es\";\r\n  if (ltext.ru) return \"ru\";\r\n  if (ltext.ar) return \"ar\";\r\n  if (ltext.zh) return \"zh\";\r\n\r\n  for (var key in ltext) {\r\n    if (ltext[key]) return key;\r\n  }\r\n\r\n  return locale;\r\n};\r\n\r\nexport const direction = (text, locale) => {\r\n  locale = lstringLocale(text, locale);\r\n\r\n  return localeDirection(locale);\r\n};\r\n\r\nexport const localeDirection = (locale) => {\r\n  // TODO: use thesaraus API\r\n  return locale == \"ar\" ? \"rtl\" : \"ltr\";\r\n};\r\n\r\nfunction normalizeText(text) {\r\n  if (!text) return null;\r\n\r\n  var entry = {\r\n    ar: text.ar,\r\n    en: text.en,\r\n    es: text.es,\r\n    fr: text.fr,\r\n    ru: text.ru,\r\n    zh: text.zh,\r\n  };\r\n\r\n  if (!entry.en) entry.en = entry.fr;\r\n  if (!entry.en) entry.en = entry.es;\r\n  if (!entry.en) entry.en = entry.ru;\r\n  if (!entry.en) entry.en = entry.ar;\r\n  if (!entry.en) entry.en = entry.zh;\r\n\r\n  if (!entry.fr) entry.fr = entry.en;\r\n  if (!entry.es) entry.es = entry.en;\r\n  if (!entry.ru) entry.ru = entry.en;\r\n  if (!entry.ar) entry.ar = entry.en;\r\n  if (!entry.zh) entry.zh = entry.en;\r\n  return entry;\r\n}\r\n","<template>\r\n  <div class=\"scbd-controls km-locales btn-group\" role=\"group\" aria-label=\"Document locales\" :id=\"$attrs.id\">\r\n    <button v-for=\"locale in locales\" :key=\"locale\" :class=\"['btn', 'btn-primary', { active: locale === modelValue }]\" \r\n        @click=\"onLocaleSelected(locale)\">\r\n      <div data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" class=\"d-inline-block\" :title=\"lstring(getTerm(locale), appLocale)\">\r\n        <span tabindex=\"0\">{{ locale.toUpperCase() }}</span>\r\n      </div>\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\n  import { defineProps, ref, watch } from 'vue';\r\n  import { lstring } from \"../../../services/util/index\"\r\n\r\n  const model = defineModel({type:String, required: true})\r\n  const props = defineProps({  \r\n    locales: { type: Array, required: true },\r\n  });\r\n\r\n  // TODO: use i18n\r\n  // const { t, locale : appLocale } = useI18n();\r\n  const appLocale = ref(\"en\");\r\n\r\n  function onLocaleSelected(locale) {\r\n    model.value = locale;\r\n  }\r\n\r\n  function setDefaultLocale(languages) {\r\n    if (languages?.length) {\r\n      if (languages.length === 1 || languages.includes(appLocale.value)) {\r\n        onLocaleSelected(appLocale.value);\r\n      } else {\r\n        onLocaleSelected(languages[0]);\r\n      }\r\n    }\r\n  }\r\n\r\n  watch(props.locales, (languages) => {\r\n    setDefaultLocale(languages);\r\n  });\r\n\r\n  function getTerm(lang) {\r\n    //TODO: Use thesaurus API\r\n    // thesaurusStore.loadTerm(`lang-${lang}`)\r\n    // return thesaurusStore.getTerm(`lang-${lang}`)||{};   \r\n    return lang;   \r\n  }\r\n</script>"],"names":["lstring","ltext","locale","Number","isInteger","lstringLocale","sText","en","normalized","normalizeText","key","fr","es","ru","ar","zh","text","entry","model","_useModel","__props","props","appLocale","ref","onLocaleSelected","value","setDefaultLocale","languages","length","includes","watch","locales","getTerm","lang"],"mappings":"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"}