{"version":3,"file":"km-value-terms.cjs","sources":["../../../../src/services/util/lstring.js","../../../../src/components/controls/view/km-term.vue","../../../../src/components/controls/view/km-value-term.vue","../../../../src/components/controls/view/km-value-terms.vue"],"sourcesContent":["export function lstring(ltext, locale) {\r\n  if (Number.isInteger(ltext))\r\n    //is number to handle generic implementation of NR\r\n    return ltext;\r\n\r\n  if (!ltext) return \"\";\r\n\r\n  if (typeof ltext === \"string\") return ltext;\r\n\r\n  locale = locale || lstringLocale(ltext, locale);\r\n  let sText = \"\";\r\n  if (!sText && locale) sText = ltext[locale];\r\n  if (!sText) sText = ltext.en;\r\n  if (!sText) {\r\n    var normalized = normalizeText(ltext);\r\n    if (normalized[locale]) return normalized[locale];\r\n\r\n    for (var key in ltext) {\r\n      sText = ltext[key];\r\n      if (sText) break;\r\n    }\r\n  }\r\n  return sText || \"\";\r\n}\r\n\r\nexport const lstringLocale = (ltext, locale) => {\r\n  // TODO: use thesaraus API\r\n\r\n  // TODO: use thesaraus API, there was an OR case to get value from thesaraus API\r\n  if (!ltext) return locale;\r\n\r\n  if (typeof ltext == \"string\") return locale;\r\n\r\n  if (ltext[locale]) return locale;\r\n\r\n  // TODO: use thesaraus API, there was a conditional check to get value from 'defaultLocale.value'\r\n\r\n  if (ltext.en) return \"en\";\r\n\r\n  if (ltext.fr) return \"fr\";\r\n  if (ltext.es) return \"es\";\r\n  if (ltext.ru) return \"ru\";\r\n  if (ltext.ar) return \"ar\";\r\n  if (ltext.zh) return \"zh\";\r\n\r\n  for (var key in ltext) {\r\n    if (ltext[key]) return key;\r\n  }\r\n\r\n  return locale;\r\n};\r\n\r\nexport const direction = (text, locale) => {\r\n  locale = lstringLocale(text, locale);\r\n\r\n  return localeDirection(locale);\r\n};\r\n\r\nexport const localeDirection = (locale) => {\r\n  // TODO: use thesaraus API\r\n  return locale == \"ar\" ? \"rtl\" : \"ltr\";\r\n};\r\n\r\nfunction normalizeText(text) {\r\n  if (!text) return null;\r\n\r\n  var entry = {\r\n    ar: text.ar,\r\n    en: text.en,\r\n    es: text.es,\r\n    fr: text.fr,\r\n    ru: text.ru,\r\n    zh: text.zh,\r\n  };\r\n\r\n  if (!entry.en) entry.en = entry.fr;\r\n  if (!entry.en) entry.en = entry.es;\r\n  if (!entry.en) entry.en = entry.ru;\r\n  if (!entry.en) entry.en = entry.ar;\r\n  if (!entry.en) entry.en = entry.zh;\r\n\r\n  if (!entry.fr) entry.fr = entry.en;\r\n  if (!entry.es) entry.es = entry.en;\r\n  if (!entry.ru) entry.ru = entry.en;\r\n  if (!entry.ar) entry.ar = entry.en;\r\n  if (!entry.zh) entry.zh = entry.en;\r\n  return entry;\r\n}\r\n","<template>\r\n  <span class=\"scbd-controls km-term\">\r\n    <div v-if=\"error\" class=\"alert alert-danger\" role=\"alert\">Error loading term {{ value.identifier }}</div>\r\n    {{ lstring(term, locale) }}\r\n    <slot name=\"help\" :term=\"term\"></slot>\r\n  </span>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, defineEmits, ref } from 'vue';\r\nimport { lstring } from \"../../../services/util/index\";\r\n\r\nconst emit = defineEmits(['onTermLoad']);\r\nconst props = defineProps({\r\n  value: { type: Object, required: true },\r\n  locale: { type: String, required: true },\r\n});\r\n\r\nconst term = ref(null);\r\nconst error = ref(null);\r\n\r\nif (!props.value?.identifier || props.value) {\r\n    try {\r\n      // TODO: Use thesaurus API\r\n      // term = await  thesaurusStore.loadTerm(value.value?.identifier||value.value);\r\n      term.value = { title: 'SCBD Term' }; \r\n      if (term.value) {\r\n        emit('onTermLoad', term.value);\r\n      }\r\n      //TODO: Use Thesaurus API\r\n    } catch (error) {\r\n      error.value = error;\r\n      console.error(`Error loading term ${value.value}`, error);\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n/* Add scoped styles if needed */\r\n</style>\r\n","<template>\r\n  <div :id=\"$attrs.id\" class=\"scbd-controls km-value-term\">\r\n    <div :class=\"`input-group input-lang-${locale}`\">\r\n      <div class=\"form-control km-value\" :dir=\"direction(termValue?.title, locale)\">\r\n        <km-term :value=\"value\" :locale=\"locale\" @on-term-load=\"onTermLoad\">\r\n        </km-term>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, defineProps } from 'vue';\r\nimport { direction } from \"../../../services/util/index\"\r\nimport KmTerm from './km-term.vue';\r\n\r\nconst props = defineProps({\r\n  value: { type: Object, required: true },\r\n  locale: { type: String, required: true },\r\n});\r\nconst termValue = ref(null);\r\n\r\nconst onTermLoad = function(term){\r\n    termValue.value = { title: 'SCBD Term' }\r\n    // thesaurusStore.loadTerm(`lang-${term}`);\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* Add any scoped styles here */\r\n</style>\r\n","<template>\r\n  <div :id=\"$attrs.id\" class=\"scbd-controls km-value-terms d-grid gap-1 \">\r\n    <div v-for=\"term in value\" :key=\"term\">\r\n      <km-value-term :value=\"term\" :locale=\"locale\"></km-value-term>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport KmValueTerm from './km-value-term.vue';\r\nimport { defineProps } from 'vue';\r\n\r\nconst props = defineProps({\r\n  value: { type: Array, required: true },\r\n  locale: { type: String, required: true },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Add scoped styles here */\r\n</style>\r\n"],"names":["ref"],"mappings":"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"}