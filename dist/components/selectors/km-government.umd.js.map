{"version":3,"file":"km-government.umd.js","sources":["../../../src/services/util/arrays.js","../../../src/components/controls/multi-selector.vue","../../../src/services/composables/i18n.js","../../../src/components/selectors/km-government.vue"],"sourcesContent":["import _ from 'lodash';\r\nimport { useI18n} from '@/services/composables/i18n';\r\nimport { lstring } from '@/services/filters/lstring'  \r\n\r\n\r\nexport function asArray(data) {\r\n    return _([ data ])\r\n      .flatten()\r\n      .compact()\r\n      .value();\r\n}\r\n\r\nexport function sortBy(list, property){    \r\n  //const { locale } = useNuxtApp().$i18n;\r\n  const {t, locale }    = useI18n();  \r\n  return list.sort((a ,b )=>{\r\n      let valueA = a[property];\r\n      let valueB = b[property];\r\n\r\n      if(isLString(valueA)){\r\n          valueA = lstring(valueA, locale.value)\r\n          valueB = lstring(valueB, locale.value)\r\n      }\r\n\r\n      return valueA.localeCompare(valueB);\r\n\r\n  })\r\n}\r\n","\r\n<template> \r\n  <VueMultiselect\r\n    v-model=\"selectItems\"\r\n    :label=\"label\"\r\n    :track-by=\"trackBy\"\r\n    :placeholder=\"placeholder\"\r\n    :open-direction=\"openDirection\"\r\n    :options=\"options\"\r\n    :group-values=\"groupValues\"\r\n    :group-label=\"groupLabel\"\r\n    :group-select=\"groupSelect\"\r\n    :multiple=\"multiple\"\r\n    :clear-on-select=\"clearOnSelect\"\r\n    :close-on-select=\"closeOnSelect\"      \r\n    :searchable=\"searchable\"\r\n    :disabled=\"disabled\"\r\n    @search-change=\"onEventTextChange\"\r\n    \r\n    :custom-label=\"customLabel\"\r\n    :allow-empty=\"allowEmpty\"\r\n    deselect-label=\"Can't remove this value\"\r\n  > \r\n    <slot name=\"clear\">\r\n      <template slot=\"clear\">\r\n        <div\r\n          v-if=\"selectItems.length && !disabled\"\r\n          class=\"multiselect__clear\"\r\n          @mousedown.prevent.stop=\"selectItems = null; $emit('change', null)\"\r\n        />\r\n      </template>\r\n    </slot>     \r\n  </VueMultiselect>\r\n\r\n</template>\r\n\r\n<script setup >  \r\nimport VueMultiselect from 'vue-multiselect';\r\nimport { asArray } from   '../../services/util/index.js';\r\nimport { isEqual, compact } from 'lodash';\r\n\r\nimport {computed, ref, defineProps, defineEmits, onMounted,defineModel} from 'vue'\r\nconst emit = defineEmits(['update:model-value', \"on-select\",\"on-remove\",\"on-search-change\",\"on-open\", \"on-close\", \"on-add-tag\",\"on-value-change\"]);\r\n\r\nconst props = defineProps({   \r\n    modelValue     : {type:[ String, Array, Object ], required:true, default:() => []},\r\n    options      : { type: Array, required: true },\r\n    label        : { type: String },\r\n    trackBy      : { type: String },  \r\n    placeholder  : { type: String,  default: 'Select option' },\r\n    openDirection: { type: String, default: 'below' },\r\n    groupValues  : { type: String },\r\n    groupLabel   : { type: String },\r\n    groupSelect  : { type: Boolean, default: false },\r\n    multiple     : { type: Boolean, default: false },\r\n    clearOnSelect: { type: Boolean, default: true },  \r\n    closeOnSelect: { type: Boolean, default: true },\r\n    searchable   : { type: Boolean, default: true },\r\n    disabled     : { type: Boolean, default: false },\r\n    customLabel  : { type: Function,\r\n      default (option, label) {\r\n        // if (isEmpty(option)) return ''\r\n        return label ? option[label] : option\r\n      }\r\n    },\r\n    allowEmpty   : { type: Boolean, default: true },\r\n    valueKey     : { type: String, required: true},\r\n    customSelectedItem  : {type: Function,default (item) {return item;}},\r\n    isValid      : { type: [ Boolean, Function ],  default: null },   \r\n});\r\n\r\nconst onEventTextChange=(...args)=>{\r\n  this.$emit('on-search-change', ...args)\r\n};\r\nconst fetchOptions=()=>{\r\n  this.options = this.optionsFn();\r\n}   \r\nlet selectItems = computed({  \r\n    get() {\r\n      const selected = asArray(props.modelValue).map((value) => {\r\n        return props.options?.find((option) => {\r\n          const customSelectedItem =props.customSelectedItem(option[props.valueKey], option);\r\n          \r\n          return isEqual(customSelectedItem, value);\r\n        })\r\n      });\r\n\r\n      return compact(selected)\r\n    },\r\n    set(events) {\r\n      let ids = asArray(events).map((event) => props.customSelectedItem(event[props.valueKey], event));     \r\n      emit('update:model-value', props.multiple ? ids : ids[0]);\r\n    },\r\n  }\r\n); \r\n</script>\r\n<!-- ToDo: need to fix the path -->\r\n<!-- <style src=\"vue-multiselect/dist/vue-multiselect.css\"></style> -->\r\n","export const  useI18n = ()=>{\r\n    return {\r\n        t       : (key)=>key,\r\n        locale  : 'en'\r\n    }\r\n}","<template> \r\n    <div class=\"scbd-common km-government\">\r\n        <multi-selector\r\n            v-model=\"model.identifier\"\r\n            class=\"validationClass\"\r\n            label=\"name\"\r\n            track-by=\"code\"\r\n            value-key=\"code\"\r\n            :placeholder=\"$attrs.placeholder || t('government')\"\r\n            :options=\"countryList\"\r\n            :disabled=\"!countryList || $attrs.disabled\" >\r\n        </multi-selector>  \r\n    </div>\r\n</template>\r\n\r\n<!-- TODO: add i18n support -->\r\n<script setup >\r\n    import { computed, defineModel } from 'vue'\r\n    import multiSelector from \"../controls/multi-selector.vue\"\r\n    import { useI18n } from '../../services/composables/i18n';\r\n    import { useCountries }    from '@/services/composables/countries';   \r\n    \r\n    const model = defineModel({ type: Array,required: true, \r\n                                default: {identifier:undefined}\r\n                            });  \r\n    \r\n    const countries = useCountries ();   \r\n    const {t, locale }   = useI18n();  \r\n\r\n    const countryList   = computed(()=>{  \r\n        return (countries||[]).map(e=>{            \r\n            return { name : e.name[locale], code : e.code?.toLowerCase()}\r\n        })\r\n    })  \r\n\r\n</script>"],"names":["asArray","data","_","flatten","compact","value","emit","__emit","props","__props","onEventTextChange","_len","arguments","length","args","Array","_key","_this","$emit","selectItems","computed","get","selected","modelValue","map","_props$options","options","find","option","customSelectedItem","valueKey","isEqual","set","events","ids","event","multiple","useI18n","t","key","locale","model","_useModel","countries","useCountries","countryList","e","_e$code","name","code","toLowerCase"],"mappings":"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"}