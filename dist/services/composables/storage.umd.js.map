{"version":3,"file":"storage.umd.js","sources":["../../../src/services/util/helper.js","../../../src/services/composables/storage.js"],"sourcesContent":["import _ from 'lodash';\r\n\r\nexport const makeSmallUid = () => {\r\n    const key = (S4() + S4()).toUpperCase();\r\n    return 'uid-' + key;\r\n}\r\n\r\nexport function S4() {\r\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n}\r\n\r\nexport const removeEmpty = (obj)=> {\r\n    return function remove(current) {\r\n      _.forOwn(current, function (value, key) {\r\n        if (_.isUndefined(value) || _.isNull(value) || _.isNaN(value) ||\r\n          (_.isString(value) && _.isEmpty(value)) ||\r\n          (_.isObject(value) && _.isEmpty(remove(value)))) {\r\n  \r\n          delete current[key];\r\n        }\r\n      });\r\n\r\n      if (_.isArray(current)) _.pull(current, undefined);\r\n  \r\n      return current;\r\n  \r\n    }(_.cloneDeep(obj));\r\n}","\r\nimport { removeEmpty } from '../util/index';\r\n\r\nexport const useKmStorage = ()=>{\r\n    return {\r\n        cleanDocument\r\n    }\r\n    \r\n}\r\nexport const useOnFileUpload = ({document, file, locale}) => {\r\n    \r\n    if(!document.value.additionalDocuments)\r\n        document.value.additionalDocuments = [];\r\n\r\n    const additionalDocuments = document.value.additionalDocuments;\r\n    const tag = `hash:${file.hash}`;\r\n\r\n    if(additionalDocuments.find(e=>e.tag == tag))\r\n        return;\r\n    additionalDocuments.push({\r\n        url     : file.url,\r\n        language: locale,\r\n        name    : file.filename,\r\n        tag     : tag\r\n    });\r\n\r\n}\r\n\r\n\r\nconst cleanDocument = (document)=>{\r\n\r\n    return removeEmpty(document);    \r\n\r\n}\r\n\r\n"],"names":["removeEmpty","obj","remove","current","_","forOwn","value","key","isUndefined","isNull","isNaN","isString","isEmpty","isObject","isArray","pull","undefined","cloneDeep","useKmStorage","cleanDocument","useOnFileUpload","_ref","document","file","locale","additionalDocuments","tag","concat","hash","find","e","push","url","language","name","filename"],"mappings":";;;;;;;;;;;EAWO,MAAMA,WAAW,GAAIC,GAAG,IAAI;IAC/B,OAAO,SAASC,MAAMA,CAACC,OAAO,EAAE;MAC9BC,UAAAA,CAAAA,SAAAA,CAAC,CAACC,MAAM,CAACF,OAAO,EAAE,UAAUG,KAAK,EAAEC,GAAG,EAAE;QACtC,IAAIH,qBAAC,CAACI,WAAW,CAACF,KAAK,CAAC,IAAIF,UAAC,CAAA,SAAA,CAAA,CAACK,MAAM,CAACH,KAAK,CAAC,IAAIF,UAAAA,CAAAA,SAAAA,CAAC,CAACM,KAAK,CAACJ,KAAK,CAAC,IAC1DF,UAAC,CAAA,SAAA,CAAA,CAACO,QAAQ,CAACL,KAAK,CAAC,IAAIF,UAAAA,CAAAA,SAAAA,CAAC,CAACQ,OAAO,CAACN,KAAK,CAAE,IACtCF,qBAAC,CAACS,QAAQ,CAACP,KAAK,CAAC,IAAIF,UAAAA,CAAAA,SAAAA,CAAC,CAACQ,OAAO,CAACV,MAAM,CAACI,KAAK,CAAC,CAAE,EAAE;UAEjD,OAAOH,OAAO,CAACI,GAAG,CAAC;QACpB;MACT,CAAO,CAAC;MAEF,IAAIH,UAAC,CAAA,SAAA,CAAA,CAACU,OAAO,CAACX,OAAO,CAAC,EAAEC,UAAC,CAAA,SAAA,CAAA,CAACW,IAAI,CAACZ,OAAO,EAAEa,SAAS,CAAC;MAElD,OAAOb,OAAO;IAEf,CAAA,CAACC,qBAAC,CAACa,SAAS,CAAChB,GAAG,CAAC,CAAC;EACvB,CAAA;ECxBa,MAAAiB,YAAY,GAAGA,CAAA,KAAI;IAC5B,OAAO;MACHC;IACH,CAAA;EAEL,CAAC;EACY,MAAAC,eAAe,GAAGC,IAAA,IAA8B;IAAA,IAA7B;MAACC,QAAQ;MAAEC,IAAI;MAAEC;IAAM,CAAC,GAAAH,IAAA;IAEpD,IAAG,CAACC,QAAQ,CAAChB,KAAK,CAACmB,mBAAmB,EAClCH,QAAQ,CAAChB,KAAK,CAACmB,mBAAmB,GAAG,EAAE;IAE3C,MAAMA,mBAAmB,GAAGH,QAAQ,CAAChB,KAAK,CAACmB,mBAAmB;IAC9D,MAAMC,GAAG,WAAAC,MAAA,CAAWJ,IAAI,CAACK,IAAI,CAAE;IAE/B,IAAGH,mBAAmB,CAACI,IAAI,CAACC,CAAC,IAAEA,CAAC,CAACJ,GAAG,IAAIA,GAAG,CAAC,EACxC;IACJD,mBAAmB,CAACM,IAAI,CAAC;MACrBC,GAAG,EAAOT,IAAI,CAACS,GAAG;MAClBC,QAAQ,EAAET,MAAM;MAChBU,IAAI,EAAMX,IAAI,CAACY,QAAQ;MACvBT,GAAG,EAAOA;IAClB,CAAK,CAAC;EAEN,CAAC;EAGD,MAAMP,aAAa,GAAIG,QAAQ,IAAG;IAE9B,OAAOtB,WAAW,CAACsB,QAAQ,CAAC;EAEhC,CAAA;;;;;;"}