{"version":3,"file":"storage.js","sources":["../../../src/services/util/helper.js","../../../src/services/composables/storage.js"],"sourcesContent":["import _ from 'lodash';\r\n\r\nexport const makeSmallUid = () => {\r\n    const key = (S4() + S4()).toUpperCase();\r\n    return 'uid-' + key;\r\n}\r\n\r\nexport function S4() {\r\n    return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n}\r\n\r\nexport const removeEmpty = (obj)=> {\r\n    return function remove(current) {\r\n      _.forOwn(current, function (value, key) {\r\n        if (_.isUndefined(value) || _.isNull(value) || _.isNaN(value) ||\r\n          (_.isString(value) && _.isEmpty(value)) ||\r\n          (_.isObject(value) && _.isEmpty(remove(value)))) {\r\n  \r\n          delete current[key];\r\n        }\r\n      });\r\n\r\n      if (_.isArray(current)) _.pull(current, undefined);\r\n  \r\n      return current;\r\n  \r\n    }(_.cloneDeep(obj));\r\n}","\r\nimport { removeEmpty } from '../util/index';\r\n\r\nexport const useKmStorage = ()=>{\r\n    return {\r\n        cleanDocument\r\n    }\r\n    \r\n}\r\nexport const useOnFileUpload = ({document, file, locale}) => {\r\n    \r\n    if(!document.value.additionalDocuments)\r\n        document.value.additionalDocuments = [];\r\n\r\n    const additionalDocuments = document.value.additionalDocuments;\r\n    const tag = `hash:${file.hash}`;\r\n\r\n    if(additionalDocuments.find(e=>e.tag == tag))\r\n        return;\r\n    additionalDocuments.push({\r\n        url     : file.url,\r\n        language: locale,\r\n        name    : file.filename,\r\n        tag     : tag\r\n    });\r\n\r\n}\r\n\r\n\r\nconst cleanDocument = (document)=>{\r\n\r\n    return removeEmpty(document);    \r\n\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAWO,MAAM,WAAW,GAAG,CAAC,GAAG,IAAI;AACnC,IAAI,OAAO,SAAS,MAAM,CAAC,OAAO,EAAE;AACpC,MAAM,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,UAAU,KAAK,EAAE,GAAG,EAAE;AAC9C,QAAQ,IAAI,CAAC,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC;AACrE,WAAW,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AACjD,WAAW,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;AAC3D;AACA,UAAU,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC;AAC9B,SAAS;AACT,OAAO,CAAC,CAAC;AACT;AACA,MAAM,IAAI,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;AACzD;AACA,MAAM,OAAO,OAAO,CAAC;AACrB;AACA,KAAK,CAAC,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC;AACxB;;ACxBY,MAAC,YAAY,GAAG,IAAI;AAChC,IAAI,OAAO;AACX,QAAQ,aAAa;AACrB,KAAK;AACL;AACA,EAAC;AACW,MAAC,eAAe,GAAG,CAAC,CAAC,QAAQ,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK;AAC7D;AACA,IAAI,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,mBAAmB;AAC1C,QAAQ,QAAQ,CAAC,KAAK,CAAC,mBAAmB,GAAG,EAAE,CAAC;AAChD;AACA,IAAI,MAAM,mBAAmB,GAAG,QAAQ,CAAC,KAAK,CAAC,mBAAmB,CAAC;AACnE,IAAI,MAAM,GAAG,GAAG,CAAC,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;AACpC;AACA,IAAI,GAAG,mBAAmB,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC;AAChD,QAAQ,OAAO;AACf,IAAI,mBAAmB,CAAC,IAAI,CAAC;AAC7B,QAAQ,GAAG,OAAO,IAAI,CAAC,GAAG;AAC1B,QAAQ,QAAQ,EAAE,MAAM;AACxB,QAAQ,IAAI,MAAM,IAAI,CAAC,QAAQ;AAC/B,QAAQ,GAAG,OAAO,GAAG;AACrB,KAAK,CAAC,CAAC;AACP;AACA,EAAC;AACD;AACA;AACA,MAAM,aAAa,GAAG,CAAC,QAAQ,GAAG;AAClC;AACA,IAAI,OAAO,WAAW,CAAC,QAAQ,CAAC,CAAC;AACjC;AACA;;;;"}