{"version":3,"file":"index.umd.js","sources":["../../../src/services/filters/datetime.js","../../../src/services/filters/lstring.js"],"sourcesContent":["import { DateTime } from 'luxon'\r\n\r\nexport function timezone(dateTime, tz=null) {\r\n    dateTime = dateTime && asDateTime(dateTime);\r\n\r\n    if(dateTime) dateTime = dateTime.setZone(tz||'local');\r\n\r\n    return dateTime;\r\n}\r\n\r\n//https://moment.github.io/luxon/docs/manual/formatting#table-of-tokens\r\n\r\nexport function format(dateTime, format='T') {\r\n    return dateTime && asDateTime(dateTime).toFormat(format)\r\n}\r\n\r\nexport function asDateTime(date) {\r\n    if(date instanceof DateTime)  return date\r\n    if(date instanceof Date)      return DateTime.fromJSDate(date)\r\n    if(typeof(date) === 'string') return DateTime.fromISO(date)\r\n\r\n    throw Error('Unknown date/time format');\r\n}","\r\nexport function lstring(ltext, locale) {\r\n  \r\n    if(Number.isInteger(ltext)) //is number to handle generic implementation of NR\r\n      return ltext;\r\n  \r\n    if (!ltext)\r\n      return \"\";\r\n    if (typeof(ltext) == 'string')\r\n      return ltext;\r\n    let sText=\"\";\r\n    if (!sText && locale)\r\n      sText = ltext[locale];\r\n    if (!sText)\r\n      sText = ltext.en;\r\n    if (!sText) {\r\n      var normalized = normalizeText(ltext)\r\n      if(normalized[locale])\r\n        return normalized[locale];\r\n\r\n      for (var key in ltext) {\r\n        sText = ltext[key];\r\n        if (sText)\r\n          break;\r\n      }\r\n    }\r\n    return sText || \"\";\r\n}\r\n\r\n\r\nfunction normalizeText(text) {\r\n  if(!text) return null;\r\n\r\n  var entry = { ar: text.ar, en: text.en, es: text.es, fr: text.fr, ru: text.ru, zh: text.zh };\r\n\r\n  if(!entry.en) entry.en = entry.fr;\r\n  if(!entry.en) entry.en = entry.es;\r\n  if(!entry.en) entry.en = entry.ru;\r\n  if(!entry.en) entry.en = entry.ar;\r\n  if(!entry.en) entry.en = entry.zh;\r\n\r\n  if(!entry.fr) entry.fr = entry.en;\r\n  if(!entry.es) entry.es = entry.en;\r\n  if(!entry.ru) entry.ru = entry.en;\r\n  if(!entry.ar) entry.ar = entry.en;\r\n  if(!entry.zh) entry.zh = entry.en;\r\n  return entry;\r\n}"],"names":["timezone","dateTime","tz","arguments","length","undefined","asDateTime","setZone","format","toFormat","date","DateTime","Date","fromJSDate","fromISO","Error","lstring","ltext","locale","Number","isInteger","sText","en","normalized","normalizeText","key","text","entry","ar","es","fr","ru","zh"],"mappings":"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"}