{"version":3,"file":"index.js","sources":["../../../src/services/filters/datetime.js","../../../src/services/filters/lstring.js"],"sourcesContent":["import { DateTime } from 'luxon'\r\n\r\nexport function timezone(dateTime, tz=null) {\r\n    dateTime = dateTime && asDateTime(dateTime);\r\n\r\n    if(dateTime) dateTime = dateTime.setZone(tz||'local');\r\n\r\n    return dateTime;\r\n}\r\n\r\n//https://moment.github.io/luxon/docs/manual/formatting#table-of-tokens\r\n\r\nexport function format(dateTime, format='T') {\r\n    return dateTime && asDateTime(dateTime).toFormat(format)\r\n}\r\n\r\nexport function asDateTime(date) {\r\n    if(date instanceof DateTime)  return date\r\n    if(date instanceof Date)      return DateTime.fromJSDate(date)\r\n    if(typeof(date) === 'string') return DateTime.fromISO(date)\r\n\r\n    throw Error('Unknown date/time format');\r\n}","\r\nexport function lstring(ltext, locale) {\r\n  \r\n    if(Number.isInteger(ltext)) //is number to handle generic implementation of NR\r\n      return ltext;\r\n  \r\n    if (!ltext)\r\n      return \"\";\r\n    if (typeof(ltext) == 'string')\r\n      return ltext;\r\n    let sText=\"\";\r\n    if (!sText && locale)\r\n      sText = ltext[locale];\r\n    if (!sText)\r\n      sText = ltext.en;\r\n    if (!sText) {\r\n      var normalized = normalizeText(ltext)\r\n      if(normalized[locale])\r\n        return normalized[locale];\r\n\r\n      for (var key in ltext) {\r\n        sText = ltext[key];\r\n        if (sText)\r\n          break;\r\n      }\r\n    }\r\n    return sText || \"\";\r\n}\r\n\r\n\r\nfunction normalizeText(text) {\r\n  if(!text) return null;\r\n\r\n  var entry = { ar: text.ar, en: text.en, es: text.es, fr: text.fr, ru: text.ru, zh: text.zh };\r\n\r\n  if(!entry.en) entry.en = entry.fr;\r\n  if(!entry.en) entry.en = entry.es;\r\n  if(!entry.en) entry.en = entry.ru;\r\n  if(!entry.en) entry.en = entry.ar;\r\n  if(!entry.en) entry.en = entry.zh;\r\n\r\n  if(!entry.fr) entry.fr = entry.en;\r\n  if(!entry.es) entry.es = entry.en;\r\n  if(!entry.ru) entry.ru = entry.en;\r\n  if(!entry.ar) entry.ar = entry.en;\r\n  if(!entry.zh) entry.zh = entry.en;\r\n  return entry;\r\n}"],"names":[],"mappings":";;AAEO,SAAS,QAAQ,CAAC,QAAQ,EAAE,EAAE,CAAC,IAAI,EAAE;AAC5C,IAAI,QAAQ,GAAG,QAAQ,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC;AAChD;AACA,IAAI,GAAG,QAAQ,EAAE,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;AAC1D;AACA,IAAI,OAAO,QAAQ,CAAC;AACpB,CAAC;AACD;AACA;AACA;AACO,SAAS,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,EAAE;AAC7C,IAAI,OAAO,QAAQ,IAAI,UAAU,CAAC,QAAQ,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC;AAC5D,CAAC;AACD;AACO,SAAS,UAAU,CAAC,IAAI,EAAE;AACjC,IAAI,GAAG,IAAI,YAAY,QAAQ,GAAG,OAAO,IAAI;AAC7C,IAAI,GAAG,IAAI,YAAY,IAAI,OAAO,OAAO,QAAQ,CAAC,UAAU,CAAC,IAAI,CAAC;AAClE,IAAI,GAAG,OAAO,IAAI,CAAC,KAAK,QAAQ,EAAE,OAAO,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC;AAC/D;AACA,IAAI,MAAM,KAAK,CAAC,0BAA0B,CAAC,CAAC;AAC5C;;;;;;;;;ACrBO,SAAS,OAAO,CAAC,KAAK,EAAE,MAAM,EAAE;AACvC;AACA,IAAI,GAAG,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC;AAC9B,MAAM,OAAO,KAAK,CAAC;AACnB;AACA,IAAI,IAAI,CAAC,KAAK;AACd,MAAM,OAAO,EAAE,CAAC;AAChB,IAAI,IAAI,OAAO,KAAK,CAAC,IAAI,QAAQ;AACjC,MAAM,OAAO,KAAK,CAAC;AACnB,IAAI,IAAI,KAAK,CAAC,EAAE,CAAC;AACjB,IAAI,IAAI,CAAC,KAAK,IAAI,MAAM;AACxB,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;AAC5B,IAAI,IAAI,CAAC,KAAK;AACd,MAAM,KAAK,GAAG,KAAK,CAAC,EAAE,CAAC;AACvB,IAAI,IAAI,CAAC,KAAK,EAAE;AAChB,MAAM,IAAI,UAAU,GAAG,aAAa,CAAC,KAAK,EAAC;AAC3C,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC;AAC3B,QAAQ,OAAO,UAAU,CAAC,MAAM,CAAC,CAAC;AAClC;AACA,MAAM,KAAK,IAAI,GAAG,IAAI,KAAK,EAAE;AAC7B,QAAQ,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC;AAC3B,QAAQ,IAAI,KAAK;AACjB,UAAU,MAAM;AAChB,OAAO;AACP,KAAK;AACL,IAAI,OAAO,KAAK,IAAI,EAAE,CAAC;AACvB,CAAC;AACD;AACA;AACA,SAAS,aAAa,CAAC,IAAI,EAAE;AAC7B,EAAE,GAAG,CAAC,IAAI,EAAE,OAAO,IAAI,CAAC;AACxB;AACA,EAAE,IAAI,KAAK,GAAG,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,CAAC;AAC/F;AACA,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC;AACA,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;AACpC,EAAE,OAAO,KAAK,CAAC;AACf;;;;;;;;;"}